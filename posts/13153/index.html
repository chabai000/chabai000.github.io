<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>mysql快速入门 | 茶白的博客</title><meta name="author" content="茶白"><meta name="copyright" content="茶白"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="mysql基础下载安装1234# mysql安装  自己安装即- 注：安装不能存在中文目录# 连接可视化软件sqlyog、navicat  数据类型基础语法数据库的基本操作 1.数据库的基本操作  123456789101112131415161718192021-- 查看该机器上的所有数据库show databases;-- 新建数据库名为sql 注:引用到与mysql关键字重名的字段时，加上&#96;">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql快速入门">
<meta property="og:url" content="https://chabai000.github.io/posts/13153/index.html">
<meta property="og:site_name" content="茶白的博客">
<meta property="og:description" content="mysql基础下载安装1234# mysql安装  自己安装即- 注：安装不能存在中文目录# 连接可视化软件sqlyog、navicat  数据类型基础语法数据库的基本操作 1.数据库的基本操作  123456789101112131415161718192021-- 查看该机器上的所有数据库show databases;-- 新建数据库名为sql 注:引用到与mysql关键字重名的字段时，加上&#96;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://chabai000.github.io/UpPictures/UpCover/mysql.png">
<meta property="article:published_time" content="2022-04-26T07:49:33.000Z">
<meta property="article:modified_time" content="2024-09-05T13:41:59.942Z">
<meta property="article:author" content="茶白">
<meta property="article:tag" content="mysql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://chabai000.github.io/UpPictures/UpCover/mysql.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://chabai000.github.io/posts/13153/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 茶白","link":"链接: ","source":"来源: 茶白的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'mysql快速入门',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-05 21:41:59'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><style type="text/css">.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><meta name="generator" content="Hexo 7.1.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-comments"></i><span> 说说</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/UpPictures/UpCover/mysql.png')"><nav id="nav"><span id="blog-info"><a href="/" title="茶白的博客"><span class="site-name">茶白的博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-comments"></i><span> 说说</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">mysql快速入门</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-26T07:49:33.000Z" title="发表于 2022-04-26 15:49:33">2022-04-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-05T13:41:59.942Z" title="更新于 2024-09-05 21:41:59">2024-09-05</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>37分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="mysql快速入门"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="mysql基础"><a href="#mysql基础" class="headerlink" title="mysql基础"></a>mysql基础</h1><h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># mysql安装  自己安装即</span></span><br><span class="line"><span class="bullet">-</span> 注：安装不能存在中文目录</span><br><span class="line"><span class="section"># 连接可视化软件</span></span><br><span class="line">sqlyog、navicat</span><br></pre></td></tr></table></figure>

<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><h3 id="数据库的基本操作"><a href="#数据库的基本操作" class="headerlink" title="数据库的基本操作"></a>数据库的基本操作</h3><blockquote>
<p>1.数据库的基本操作</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看该机器上的所有数据库</span></span><br><span class="line"><span class="keyword">show</span> databases;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 新建数据库名为sql 注:引用到与mysql关键字重名的字段时，加上``</span></span><br><span class="line"><span class="keyword">create</span> database `<span class="keyword">sql</span>`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看该数据库创建语句 </span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> database `<span class="keyword">sql</span>`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 切换数据库命令</span></span><br><span class="line">use `<span class="keyword">sql</span>`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看当前使用的数据库</span></span><br><span class="line"><span class="keyword">select</span> database();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改数据库的字符集为gbk </span></span><br><span class="line"><span class="keyword">alter</span> database `<span class="keyword">sql</span>` <span class="type">character</span> <span class="keyword">set</span> gbk;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除数据库 </span></span><br><span class="line"><span class="keyword">drop</span> database <span class="keyword">sql</span>;</span><br></pre></td></tr></table></figure>

<h3 id="数据库表的基本操作"><a href="#数据库表的基本操作" class="headerlink" title="数据库表的基本操作"></a>数据库表的基本操作</h3><blockquote>
<p>2.数据库表的基本操作</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 注：在创建表之前一定要指明使用哪个数据库</span></span><br><span class="line">use `<span class="keyword">sql</span>`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看当前数据库所有表</span></span><br><span class="line"><span class="keyword">show</span> tables;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建数据表 </span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">birthday <span class="type">date</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看该表创建语句</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看表的字段信息</span></span><br><span class="line"><span class="keyword">desc</span> student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改表名</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student rename <span class="keyword">to</span> stu;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改类型长度(不改变类型)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu change name name <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改字段名和类型长度(不改变类型)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu change name sname <span class="type">varchar</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改类型长度(不改变类型)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu modify <span class="keyword">column</span> name <span class="type">varchar</span>(<span class="number">10</span>);</span><br><span class="line"><span class="comment">-- 修改字段数据类型</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu modify sname <span class="type">int</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">add</span> address <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">drop</span> address;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除数据表 </span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> stu;</span><br></pre></td></tr></table></figure>

<h3 id="数据表的约束"><a href="#数据表的约束" class="headerlink" title="数据表的约束"></a>数据表的约束</h3><blockquote>
<p>3.数据表的约束 为了防止错误数据插入到数据表</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 主键约束1 用于唯一标识主键的每一行</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 主键约束2</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student01(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line"><span class="keyword">primary</span> key(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 非空约束</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student02(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 默认值约束</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student03(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">default</span> <span class="string">&#x27;male&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 唯一性约束 同一表中字段不能重复出现</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student04(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">unique</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看表的约束信息 外键约束看不到</span></span><br><span class="line"><span class="keyword">desc</span> student04;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 外键约束 外键用来让两张表的数据之间 建立连接 ，从而保证数据的 一致性和完整性</span></span><br><span class="line"><span class="comment">-- 外键约束两种方法 即建表时设置外键 建表后设置外键 我们演示一个</span></span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (studentid) <span class="keyword">REFERENCES</span> student05(id)</span><br><span class="line"><span class="comment">-- 某些数据库管理系统允许使用约束定义语法（如 CONSTRAINT 关键字）来添加外键约束。</span></span><br><span class="line"><span class="keyword">constraint</span> 外键名 <span class="keyword">foreign</span> key (从表外键字段) <span class="keyword">references</span> 主表 (主键字段)</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class <span class="keyword">add</span> <span class="keyword">FOREIGN</span> KEY (studentid) <span class="keyword">REFERENCES</span> student05(id);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 从表名 <span class="keyword">add</span> <span class="keyword">constraint</span> 外键名 <span class="keyword">foreign</span> key (从表外键字段) <span class="keyword">references</span> 主表(主键字段)</span><br><span class="line"><span class="comment">-- 先建两个表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student05(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> class(</span><br><span class="line">classid <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">studentid <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class <span class="keyword">add</span> <span class="keyword">constraint</span> fk_class_studentid <span class="keyword">foreign</span> key(studentid) <span class="keyword">references</span> student05(id);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看建表时语句查看外键是否存在</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> class;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除外键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class <span class="keyword">drop</span> <span class="keyword">foreign</span> key fk_class_studentid;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检查约束 mysql8.x.x后有的</span></span><br><span class="line">xxxx</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3.1外键约束延申</p>
</blockquote>
<blockquote>
<p>3.1.1定义</p>
</blockquote>
<p>外键约束（Foreign Key Constraint）是数据库中一种用于建立表与表之间关联关系的约束，它确保了参考表（父表）和外键表（子表）之间的数据一致性和完整性。</p>
<blockquote>
<p>3.1.2作用</p>
</blockquote>
<p>外键约束的主要作用是确保数据的完整性和一致性，以及建立表之间的关联关系。虽然连接查询可以实现关联查询，但外键约束在数据库设计中仍然具有重要作用。它们可以确保数据的一致性，避免了无效的关联，同时也使得数据库结构更加清晰，并提供了数据库引擎进行优化的可能性。</p>
<blockquote>
<p>3.1.3让我用一个更简单的例子来说明为什么要使用外键约束。</p>
</blockquote>
<p>假设我们有两个表：<code>students</code>（学生表）和<code>courses</code>（课程表）。每个学生可以选修多门课程，而每门课程也可以被多个学生选修。我们想要确保每个学生所选的课程在<code>courses</code>表中是存在的，并且在删除课程时不会留下不一致的数据。</p>
<p>如果我们没有外键约束，可能会出现这样的情况：一个学生选修了一个不存在于<code>courses</code>表中的课程，或者一个课程被删除了，但是仍然存在于<code>students</code>表中。这种情况下，数据库中的数据就会变得不一致。</p>
<p>但是，如果我们在<code>students</code>表中的<code>course_id</code>列上添加外键约束，引用了<code>courses</code>表中的<code>course_id</code>列，情况就会不同。当尝试将一个不存在于<code>courses</code>表中的<code>course_id</code>插入到<code>students</code>表中时，数据库会拒绝这个操作，因为外键约束要求<code>students</code>表中的<code>course_id</code>列必须引用<code>courses</code>表中已经存在的<code>course_id</code>。这样，我们就能够确保每个学生所选的课程在<code>courses</code>表中是存在的，并且保持了数据的一致性和完整性。</p>
<h3 id="数据表插入数据"><a href="#数据表插入数据" class="headerlink" title="数据表插入数据"></a>数据表插入数据</h3><blockquote>
<p>4.数据表插入数据</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 新建学生表用于演示</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student06(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为表中所用字段擦插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student06(id,name,age,gender) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;bbb&#x27;</span>,<span class="number">16</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为表中指定字段插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student06(id,name) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 同时插入多条记录</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student06(id,name,age,gender) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;chabai&#x27;</span>,<span class="number">22</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student06;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="数据表更新数据"><a href="#数据表更新数据" class="headerlink" title="数据表更新数据"></a>数据表更新数据</h3><blockquote>
<p>5.更新数据</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 更新部分数据</span></span><br><span class="line"><span class="keyword">update</span> student06 <span class="keyword">set</span> age<span class="operator">=</span><span class="number">20</span>,gender<span class="operator">=</span><span class="string">&#x27;male&#x27;</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;chabai&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 更新全部数据</span></span><br><span class="line"><span class="keyword">update</span> student06 <span class="keyword">set</span> age<span class="operator">=</span><span class="number">18</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student06;</span><br></pre></td></tr></table></figure>

<h3 id="数据表删除数据"><a href="#数据表删除数据" class="headerlink" title="数据表删除数据"></a>数据表删除数据</h3><blockquote>
<p>6.删除数据</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除数据演示</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student07(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">desc</span> student07;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student07(id,name,age,gender) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;chabai&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除部分数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student07 <span class="keyword">where</span> age<span class="operator">=</span><span class="number">18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除全部数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student07;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- TRUNCATE是一种SQL命令，用于删除表中的所有行，但保留表的结构（列定义等）。TRUNCATE比DELETE语句更快，因为它不会逐行删除数据，而是直接删除整个表中的数据。执行此命令后，表中的所有行都将被删除，但表的结构将保持不变。请注意，TRUNCATE命令是不可逆的，一旦执行，表中的数据就无法恢复。因此，请谨慎使用TRUNCATE命令，并确保在执行之前已经做好了备份或确认数据可以被删除。</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> student07;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student07;</span><br></pre></td></tr></table></figure>

<h3 id="数据表简单查询"><a href="#数据表简单查询" class="headerlink" title="数据表简单查询"></a>数据表简单查询</h3><blockquote>
<p> 7.数据表简单查询</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 简单数据查询</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student08(</span><br><span class="line">id <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">default</span> <span class="string">&#x27;male&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_1&#x27;</span>,<span class="string">&#x27;chabai01&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_2&#x27;</span>,<span class="string">&#x27;chabai02&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_3&#x27;</span>,<span class="string">&#x27;chabai03&#x27;</span>,<span class="number">3</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_4&#x27;</span>,<span class="string">&#x27;chabai04&#x27;</span>,<span class="number">4</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_5&#x27;</span>,<span class="string">&#x27;chabai05&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_6&#x27;</span>,<span class="string">&#x27;chabai06&#x27;</span>,<span class="number">6</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_7&#x27;</span>,<span class="string">&#x27;chabai07&#x27;</span>,<span class="number">7</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_8&#x27;</span>,<span class="string">&#x27;chabai08&#x27;</span>,<span class="number">8</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询所有字段的所有数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student08;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询指定字段的所有数据</span></span><br><span class="line"><span class="keyword">select</span> id,name <span class="keyword">from</span> student08;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 常用查询举例 </span></span><br><span class="line"><span class="comment">-- 这个 SQL 查询语句会从名为 &quot;student08&quot; 的表中选择 &quot;id&quot; 和 &quot;name&quot; 列，并添加一个固定值为 &#x27;3&#x27; 的列。这个固定值 &#x27;3&#x27; 不是从表中获取的，而是直接写在查询语句中的。这就意味着查询结果中的每一行都会有相同的值 &#x27;3&#x27;。</span></span><br><span class="line"><span class="keyword">select</span> id,name,<span class="string">&#x27;3&#x27;</span> <span class="keyword">from</span> student08;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询结果中过滤重复数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> gender <span class="keyword">from</span> student08;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 算数运算符</span></span><br><span class="line"><span class="keyword">select</span> name,age<span class="operator">+</span><span class="number">10</span> <span class="keyword">from</span> student08;</span><br></pre></td></tr></table></figure>

<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><blockquote>
<p>函数</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 函数</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student09(</span><br><span class="line">id <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">default</span> <span class="string">&#x27;male&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student09(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_1&#x27;</span>,<span class="string">&#x27;chabai01&#x27;</span>,<span class="number">14</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student09(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_2&#x27;</span>,<span class="string">&#x27;chabai02&#x27;</span>,<span class="number">15</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student09(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_3&#x27;</span>,<span class="string">&#x27;chabai03&#x27;</span>,<span class="number">16</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student09(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_4&#x27;</span>,<span class="string">&#x27;chabai04&#x27;</span>,<span class="number">17</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student09(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_5&#x27;</span>,<span class="string">&#x27;chabai05&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student09(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_6&#x27;</span>,<span class="string">&#x27;chabai06&#x27;</span>,<span class="number">19</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student09;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.聚合函数</span></span><br><span class="line"><span class="comment">-- count()</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> student09;</span><br><span class="line"><span class="comment">-- max</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(age) <span class="keyword">from</span> student09;</span><br><span class="line"><span class="comment">-- min</span></span><br><span class="line"><span class="keyword">select</span> name,<span class="built_in">min</span>(age) <span class="keyword">from</span> student09;</span><br><span class="line"><span class="comment">-- sum</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(age) <span class="keyword">from</span> student09;</span><br><span class="line"><span class="comment">-- avg</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(age) <span class="keyword">from</span> student09;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 2.时间函数</span></span><br><span class="line"><span class="comment">-- 查询当前日期=年月日+时分秒</span></span><br><span class="line"><span class="keyword">select</span> now();</span><br><span class="line"><span class="comment">-- 查询当前日期并提取年月日</span></span><br><span class="line"><span class="keyword">select</span> <span class="type">date</span>(now());</span><br><span class="line"><span class="comment">-- 查询当前日期并提取时分秒</span></span><br><span class="line"><span class="keyword">select</span> <span class="type">time</span>(now());</span><br><span class="line"><span class="comment">-- 查询当前日期并提取年</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(now());</span><br><span class="line"><span class="comment">-- 查询当前日期并提取月</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">month</span>(now());</span><br><span class="line"><span class="comment">-- 查询当前日期并提取日数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">day</span>(now());</span><br><span class="line"><span class="comment">-- 查询当前年月日</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">current_date</span>();</span><br><span class="line"><span class="comment">-- 查询当前时分秒</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">current_time</span>(); </span><br><span class="line"><span class="comment">-- 查询当前年月日+时分秒</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">current_timestamp</span>(); </span><br><span class="line"><span class="comment">-- 两个时间相加得到的结果</span></span><br><span class="line"><span class="keyword">select</span> addtime(<span class="string">&#x27;14:23:12&#x27;</span>,<span class="string">&#x27;01:02:03&#x27;</span>);</span><br><span class="line"><span class="comment">-- 计算两个日期之间的天数差</span></span><br><span class="line"><span class="keyword">select</span> datediff(<span class="string">&#x27;2024-05-01&#x27;</span>,<span class="string">&#x27;2024-04-30&#x27;</span>);</span><br><span class="line"><span class="comment">-- 将日期加上指定的时间间隔日</span></span><br><span class="line"><span class="keyword">select</span> date_add(now(),<span class="type">interval</span> <span class="number">1</span> <span class="keyword">day</span>);</span><br><span class="line"><span class="comment">-- 将日期加上指定的时间间隔月</span></span><br><span class="line"><span class="keyword">select</span> date_add(now(),<span class="type">interval</span> <span class="number">1</span> <span class="keyword">month</span>);</span><br><span class="line"><span class="comment">-- 将日期减去上指定的时间间隔日</span></span><br><span class="line"><span class="keyword">select</span> date_sub(now(),<span class="type">interval</span> <span class="number">1</span> <span class="keyword">day</span>);</span><br><span class="line"><span class="comment">-- 将日期加减去指定的时间间隔月</span></span><br><span class="line"><span class="keyword">select</span> date_sub(now(),<span class="type">interval</span> <span class="number">1</span> <span class="keyword">month</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.字符串函数</span></span><br><span class="line"><span class="comment">-- 函数用于连接两个或多个字符串</span></span><br><span class="line"><span class="keyword">select</span> concat(<span class="string">&#x27;chabai&#x27;</span>,<span class="string">&#x27;baicha&#x27;</span>);</span><br><span class="line"><span class="comment">-- 函数用于查找一个字符串在另一个字符串中第一次出现的位置</span></span><br><span class="line"><span class="keyword">select</span> instr(<span class="string">&#x27;chabai&#x27;</span>,<span class="string">&#x27;bai&#x27;</span>);</span><br><span class="line"><span class="comment">-- 函数用于计算字符串的长度，以字符为单位</span></span><br><span class="line"><span class="keyword">select</span> length(<span class="string">&#x27;chabai&#x27;</span>);</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 4.数学函数</span></span><br><span class="line"><span class="comment">-- 绝对值</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">abs</span>(<span class="number">-1</span>);</span><br><span class="line"><span class="comment">-- 向下取整</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">floor</span>(<span class="number">3.14</span>);</span><br><span class="line"><span class="comment">-- 向上取整</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">ceiling</span>(<span class="number">3.14</span>);</span><br></pre></td></tr></table></figure>

<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><blockquote>
<p>条件查询</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student10(</span><br><span class="line">id <span class="type">varchar</span>(<span class="number">6</span>),</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">6</span>),</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">default</span> <span class="string">&#x27;male&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student10 change id id <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student10 change name name <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student10 modify <span class="keyword">column</span> name <span class="type">varchar</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">desc</span> student10;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student10(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_1&#x27;</span>,<span class="string">&#x27;chabai01&#x27;</span>,<span class="number">14</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student10(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_2&#x27;</span>,<span class="string">&#x27;chabai02&#x27;</span>,<span class="number">15</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student10(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_3&#x27;</span>,<span class="string">&#x27;chabai03&#x27;</span>,<span class="number">16</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student10(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_4&#x27;</span>,<span class="string">&#x27;chabai04&#x27;</span>,<span class="number">17</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student10(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_5&#x27;</span>,<span class="string">&#x27;chabai05&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student10(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_6&#x27;</span>,<span class="string">&#x27;chabai06&#x27;</span>,<span class="number">19</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.关系运算符</span></span><br><span class="line"><span class="comment">-- 查询年龄大于等于17的所有记录信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> age<span class="operator">&gt;=</span><span class="number">16</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 2.关键字in</span></span><br><span class="line"><span class="comment">-- 查询和集合里的值相同的所有记录信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> id <span class="keyword">in</span>(<span class="string">&#x27;s_1&#x27;</span>,<span class="string">&#x27;s_3&#x27;</span>);</span><br><span class="line"><span class="comment">-- 查询和集合里的值不相同的所有记录信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> <span class="keyword">not</span> id <span class="keyword">in</span>(<span class="string">&#x27;s_1&#x27;</span>,<span class="string">&#x27;s_3&#x27;</span>);</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 3.关键字between AND</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> age <span class="keyword">between</span> <span class="number">15</span> <span class="keyword">and</span> <span class="number">18</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> age  <span class="keyword">not</span> <span class="keyword">between</span> <span class="number">15</span> <span class="keyword">and</span> <span class="number">18</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 4.空值查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 5.关键字and</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> age<span class="operator">&gt;</span><span class="number">15</span> <span class="keyword">and</span> gender<span class="operator">=</span><span class="string">&#x27;male&#x27;</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 6.关键字or</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> age<span class="operator">&gt;</span><span class="number">15</span> <span class="keyword">or</span> gender<span class="operator">=</span><span class="string">&#x27;male&#x27;</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 7.关键字like 模糊查询</span></span><br><span class="line"><span class="comment">-- 普通字符串</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;chabai02&#x27;</span>;</span><br><span class="line"><span class="comment">-- 含有%通配的字符串</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;cha%&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%cha%&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%2&#x27;</span>;</span><br><span class="line"><span class="comment">-- 含有_通配的字符串 一个_匹配一个字符</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;chabai__&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;______06&#x27;</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 8.关键字limit</span></span><br><span class="line"><span class="comment">-- 按照年龄字段升序排序 即 1 2 3 用 LIMIT 关键字限制只返回前3行数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span> limit <span class="number">15</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 9.关键字group by 分组查询</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student11(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">salary <span class="type">int</span>,</span><br><span class="line">departmentnumber <span class="type">int</span></span><br><span class="line">); </span><br><span class="line"></span><br><span class="line"><span class="keyword">desc</span> student11;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;chabai01&#x27;</span>,<span class="number">14</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;chabai02&#x27;</span>,<span class="number">15</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;chabai03&#x27;</span>,<span class="number">16</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;chabai04&#x27;</span>,<span class="number">17</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">5</span>,<span class="string">&#x27;chabai05&#x27;</span>,<span class="number">18</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;chabai06&#x27;</span>,<span class="number">19</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;chabai06&#x27;</span>,<span class="number">19</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;chabai06&#x27;</span>,<span class="number">19</span>,<span class="number">3</span>);</span><br><span class="line"><span class="comment">-- group by + 聚合函数</span></span><br><span class="line"><span class="comment">-- GROUP BY子句会先按指定的列进行分组，然后对每个分组进行聚合操作。在你的查询中，COUNT(*)函数是一个聚合函数，它会对每个分组中的行数进行计数。</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),departmentnumber <span class="keyword">from</span> student11 <span class="keyword">group</span> <span class="keyword">by</span> departmentnumber;</span><br><span class="line"><span class="comment">-- group by + 聚合函数 + 关系运算符</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),departmentnumber <span class="keyword">from</span> student11 <span class="keyword">where</span> departmentnumber<span class="operator">&gt;</span><span class="number">2</span> <span class="keyword">group</span> <span class="keyword">by</span> departmentnumber;</span><br><span class="line"><span class="comment">-- group by + 聚合函数 + having</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(salary),departmentnumber <span class="keyword">from</span> student11 <span class="keyword">group</span> <span class="keyword">by</span> departmentnumber <span class="keyword">having</span> <span class="built_in">sum</span>(salary)<span class="operator">&gt;</span><span class="number">20</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 10.关键字order by 排序 asc 升序 123 desc 降序321</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student11 <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">asc</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student11 <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<h3 id="别名设置"><a href="#别名设置" class="headerlink" title="别名设置"></a>别名设置</h3><blockquote>
<p>别名设置</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用别名 &quot;stud&quot; 来代替原始的表名</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student11 <span class="keyword">as</span> stud</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student11 stud</span><br><span class="line"><span class="comment">-- 字段取别名</span></span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">as</span> <span class="string">&#x27;姓名&#x27;</span>,id <span class="keyword">from</span> student11;</span><br></pre></td></tr></table></figure>

<h3 id="关联关系"><a href="#关联关系" class="headerlink" title="关联关系"></a>关联关系</h3><blockquote>
<p>表的关联关系 外键表示关联关系</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 表的关联关系演示 一对一 一对多 多对多</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> class01(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student12(</span><br><span class="line">id <span class="type">int</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">classid <span class="type">int</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student12 <span class="keyword">add</span> <span class="keyword">constraint</span> fk_student_classid <span class="keyword">foreign</span> key(classid) <span class="keyword">references</span> class01(id);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class01(id,name) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;chabai01&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class01(id,name) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;chabai02&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student12(id,name,classid) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;baicha01&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student12(id,name,classid) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;baicha02&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student12(id,name,classid) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;baicha03&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student12(id,name,classid) <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;baicha04&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 关联查询 子查询|连接查询完成</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student12 <span class="keyword">where</span> classid<span class="operator">=</span>(<span class="keyword">select</span> id <span class="keyword">from</span> class01 <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;chabai01&#x27;</span>);</span><br><span class="line"><span class="comment">-- 关于关联关系的删除数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student12 <span class="keyword">where</span> classid<span class="operator">=</span>(<span class="keyword">select</span> id <span class="keyword">from</span> class01 <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;chabai01&#x27;</span>);</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> class01 <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;chabai01&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="多表连接查询"><a href="#多表连接查询" class="headerlink" title="多表连接查询"></a>多表连接查询</h3><blockquote>
<p>多表连接查询</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.交叉连接查询 不实用</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表<span class="number">1</span> <span class="keyword">cross</span> <span class="keyword">join</span> 表<span class="number">2</span>;</span><br><span class="line"><span class="comment">-- 2.内连接查询</span></span><br><span class="line"><span class="comment">-- 内连接查询会返回两个表中符合连接条件的交集，即只返回两个表中共同满足连接条件的行</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dep(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span>(<span class="number">2</span>),</span><br><span class="line">dep_id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dep <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;财务部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dep <span class="keyword">values</span>(<span class="number">1002</span>,<span class="string">&#x27;技术部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dep <span class="keyword">values</span>(<span class="number">1003</span>,<span class="string">&#x27;行政部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dep <span class="keyword">values</span>(<span class="number">1004</span>,<span class="string">&#x27;生活部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">19</span>,<span class="number">1003</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="number">18</span>,<span class="number">1002</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="number">20</span>,<span class="number">1001</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;赵六&#x27;</span>,<span class="number">16</span>,<span class="number">1004</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> emp.name ename,dep.name dname <span class="keyword">from</span> dep <span class="keyword">inner</span> <span class="keyword">join</span> emp <span class="keyword">on</span> dep.id<span class="operator">=</span>emp.dep_id;</span><br><span class="line"><span class="comment">-- 3.外连接查询</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> cla(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stud(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span>(<span class="number">2</span>),</span><br><span class="line">cla_id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> cla <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;java&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> cla <span class="keyword">values</span>(<span class="number">1002</span>,<span class="string">&#x27;python&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> cla <span class="keyword">values</span>(<span class="number">1003</span>,<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> cla <span class="keyword">values</span>(<span class="number">1004</span>,<span class="string">&#x27;php&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stud <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">19</span>,<span class="number">1003</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stud <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="number">18</span>,<span class="number">1002</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stud <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="number">20</span>,<span class="number">1001</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stud <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;赵六&#x27;</span>,<span class="number">16</span>,<span class="number">1004</span>);</span><br><span class="line"><span class="comment">-- 左(外)连接查询</span></span><br><span class="line"><span class="comment">-- 包括左表所有记录，以及满足连接条件右表记录，如果左表的记录在右表不存在，则会在右表用null填充</span></span><br><span class="line"><span class="keyword">select</span> cla.id,cla.name,stud.name <span class="keyword">from</span> cla <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> stud <span class="keyword">on</span> cla.id<span class="operator">=</span>stud.cla_id;</span><br><span class="line"><span class="comment">-- 右(外)连接查询</span></span><br><span class="line"><span class="comment">-- 包括右表所有记录，以及满足连接条件左表记录</span></span><br><span class="line"><span class="keyword">select</span> cla.id,cla.name,stud.name <span class="keyword">from</span> cla <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> stud <span class="keyword">on</span> cla.id<span class="operator">=</span>stud.cla_id;</span><br></pre></td></tr></table></figure>

<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><blockquote>
<p>子查询</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> class02(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student13(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span>(<span class="number">2</span>),</span><br><span class="line">class_id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class02 <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;java&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class02 <span class="keyword">values</span>(<span class="number">1002</span>,<span class="string">&#x27;python&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class02 <span class="keyword">values</span>(<span class="number">1003</span>,<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class02 <span class="keyword">values</span>(<span class="number">1004</span>,<span class="string">&#x27;php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student13 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;zhangsan&#x27;</span>,<span class="number">13</span>,<span class="number">1001</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student13 <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;lisi&#x27;</span>,<span class="number">15</span>,<span class="number">1002</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student13 <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;wangwu&#x27;</span>,<span class="number">16</span>,<span class="number">1003</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student13 <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;zhaosi&#x27;</span>,<span class="number">22</span>,<span class="number">1004</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 带比较的子查询 满足任意所需子查询条件的结果才会进行外层查询</span></span><br><span class="line"><span class="comment">-- 这个只是我看看能查到什么select class_id from student13 where name=&#x27;zhangsan&#x27;</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class02 <span class="keyword">where</span> id<span class="operator">=</span>(<span class="keyword">select</span> class_id <span class="keyword">from</span> student13 <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class02 <span class="keyword">where</span> id<span class="operator">&gt;</span>(<span class="keyword">select</span> class_id <span class="keyword">from</span> student13 <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 带exists关键字的子查询 子查询不返回任何数据当为true才会执行外层查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class02 <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> class_id <span class="keyword">from</span> student13 <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 带any关键字的子查询 满足任意一个子查询条件的结果都进行外层查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class02 <span class="keyword">where</span> id<span class="operator">&gt;</span><span class="keyword">any</span>(<span class="keyword">select</span> class_id <span class="keyword">from</span> student13);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 带all关键字的子查询 满足所有子查询条件的结果才会进行外层查询</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class02 <span class="keyword">values</span>(<span class="number">1005</span>,<span class="string">&#x27;helloworld&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class02 <span class="keyword">where</span> id<span class="operator">&gt;</span><span class="keyword">all</span>(<span class="keyword">select</span> class_id <span class="keyword">from</span> student13);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>子查询和连接查询区别</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 子查询是在主查询内部执行的查询，它返回的结果会作为主查询的条件之一</span></span><br><span class="line"><span class="section"># 连接查询是通过连接多个表来检索相关联数据的查询方式。</span></span><br></pre></td></tr></table></figure>

<h1 id="mysql高级"><a href="#mysql高级" class="headerlink" title="mysql高级"></a>mysql高级</h1><h2 id="mysql逻辑架构"><a href="#mysql逻辑架构" class="headerlink" title="mysql逻辑架构"></a>mysql逻辑架构</h2><blockquote>
<p>1.概述</p>
</blockquote>
<p>和其它数据库相比，MySQL有点与众不同，它的架构可以在多种不同场景中应用并发挥良好作用。主要体现在存储引擎的架构上，插件式的存储引擎架构将查询处理和其它的系统任务以及数据的存储提取相分离。这种架构可以根据业务的需求和实际需要选择合适的存储引擎。</p>
<blockquote>
<p>2.架构</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 连接层</span><br><span class="line">最上层是一些客户端和连接服务，包含本地sock通信和大多数基于客户端/服务端工具实现的类似于tcp/ip的通信。主要完成一些类似于连接处理、授权认证、及相关的安全方案。在该层上引入了线程池的概念，为通过认证安全接入的客户端提供线程。同样在该层上可以实现基于SSL的安全链接。服务器也会为安全接入的每个客户端验证它所具有的操作权限。</span><br><span class="line"><span class="bullet">2.</span> 服务层</span><br><span class="line"><span class="bullet">-</span> Management Serveices &amp; Utilities： 系统管理和控制工具  </span><br><span class="line"><span class="bullet">-</span> SQL Interface: SQL接口</span><br><span class="line"><span class="code">      接受用户的SQL命令，并且返回用户需要查询的结果。比如select from就是调用SQL Interface</span></span><br><span class="line"><span class="code">- Parser: 解析器</span></span><br><span class="line"><span class="code">      SQL命令传递到解析器的时候会被解析器验证和解析。 </span></span><br><span class="line"><span class="code">- Optimizer: 查询优化器。</span></span><br><span class="line"><span class="code">      SQL语句在查询之前会使用查询优化器对查询进行优化。 </span></span><br><span class="line"><span class="code">      用一个例子就可以理解： select uid,name from user where  gender= 1;</span></span><br><span class="line"><span class="code">      优化器来决定先投影还是先过滤。</span></span><br><span class="line"><span class="code">- Cache和Buffer： 查询缓存。</span></span><br><span class="line"><span class="code">      如果查询缓存有命中的查询结果，查询语句就可以直接去查询缓存中取数据。</span></span><br><span class="line"><span class="code">      这个缓存机制是由一系列小缓存组成的。比如表缓存，记录缓存，key缓存，权限缓存等</span></span><br><span class="line"><span class="code">      缓存是负责读，缓冲负责写。</span></span><br><span class="line"><span class="code">3. 引擎层</span></span><br><span class="line"><span class="code">存储引擎层，存储引擎真正的负责了MySQL中数据的存储和提取，服务器通过API与存储引擎进行通信。不同的存储引擎具有的功能不同，这样我们可以根据自己的实际需要进行选取。后面介绍MyISAM和InnoDB</span></span><br><span class="line"><span class="code">4. 存储层</span></span><br><span class="line"><span class="code">数据存储层，主要是将数据存储在运行于裸设备的文件系统之上，并完成与存储引擎的交互。</span></span><br></pre></td></tr></table></figure>

<h2 id="mysql索引"><a href="#mysql索引" class="headerlink" title="mysql索引"></a>mysql索引</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 1.什么是索引</span></span><br><span class="line"><span class="bullet">-</span> 官方定义:一种帮助mysql提高查询效率的数据结构</span><br><span class="line"><span class="bullet">-</span> 索引数据结构</span><br><span class="line"><span class="bullet">-</span> 索引的与优点</span><br><span class="line"><span class="code">		大大加快数据查询速度</span></span><br><span class="line"><span class="code">- 索引的缺点</span></span><br><span class="line"><span class="code">		1.维护索引需要耗费数据库资源</span></span><br><span class="line"><span class="code">		2.索引需要占用磁盘空间</span></span><br><span class="line"><span class="code">		3.当对表的数据进行增删改查的时候，因为要维护索引，速度会受到影响</span></span><br><span class="line"><span class="code"># 2.索引分类 InnoDB引擎包含前四种   MyISAM引擎全有</span></span><br><span class="line"><span class="code">- a.主键索引</span></span><br><span class="line"><span class="code">		设定为主键后数据库会自动建立索引,innodb为聚簇索引 主键索引索引列的值不能为空</span></span><br><span class="line"><span class="code">- b.单值索引 | 单列索引 | 普通索引</span></span><br><span class="line"><span class="code">		即一个索引只包含单个列,一个表可以有多个单例索引</span></span><br><span class="line"><span class="code">- c.唯一索引</span></span><br><span class="line"><span class="code">		索引列的值必须唯一，但允许有空值  唯一索引索引列的值可以存在null，但只能存在一个null</span></span><br><span class="line"><span class="code">- d.复合索引</span></span><br><span class="line"><span class="code">		即一个索引包含多个列</span></span><br><span class="line"><span class="code">- e.Full Text全文索引(Mysql5.7 版本之前 只能用于MYISAM引擎) 暂不学</span></span><br><span class="line"><span class="code">        全文索引类型为FULLTEXT，在定义索引的列上支持值的全文查找，允许在这些索引列中插入重复值和空值。全文索引可以在CHAR、VARCHAR、			TEXT类型列上创建。MYSQL只有MYISAM存储引擎支持全文索引</span></span><br><span class="line"><span class="code"># 3.索引的基本操作</span></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 主键索引 在建表时自动创建无需自己创建</span><br><span class="line">--建表 主键自动创建主键索引</span><br><span class="line">create table t<span class="emphasis">_user(id varchar(20) primary key,name varchar(20));</span></span><br><span class="line"><span class="emphasis">--查看索引</span></span><br><span class="line"><span class="emphasis">show index from t_</span>user;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysqlPictures/image-20240426173013732.png" alt="image-20240426173013732"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">2.</span> 普通索引 两种创建方式</span><br><span class="line">--建表时创建 注意:随表一起建立的索引索引名同列名一致</span><br><span class="line">create table t<span class="emphasis">_user1(id varchar(20) primary key,name varchar(20),key(name));</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">--建表之后创建</span></span><br><span class="line"><span class="emphasis">create index name_</span>index on t<span class="emphasis">_user(name);</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">--删除索引</span></span><br><span class="line"><span class="emphasis">drop index 索引名 on 表名</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysql%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/image-20240518162616773.png" alt="image-20240518162616773"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">3.</span> 唯一索引</span><br><span class="line">--建表时创建</span><br><span class="line">create table t<span class="emphasis">_user(id varchar(20) primary key,name varchar(20),unique(name));</span></span><br><span class="line"><span class="emphasis"> </span></span><br><span class="line"><span class="emphasis">--建表后创建</span></span><br><span class="line"><span class="emphasis">create unique index nameindex on t_</span>user(name);</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysql%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/image-20240518165137252.png" alt="image-20240518165137252"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">4.</span> 复合索引</span><br><span class="line">---建表时创建</span><br><span class="line">create table t<span class="emphasis">_user(id varchar(20) primary key,name varchar(20),age int,key(name,age));</span></span><br><span class="line"><span class="emphasis"> </span></span><br><span class="line"><span class="emphasis">--建表后创建</span></span><br><span class="line"><span class="emphasis">create index nameageindex on t_</span>user(name,age);</span><br><span class="line"></span><br><span class="line">--面试题：如果基于name age bir构建复合索引 以下能否利用索引</span><br><span class="line">根据1.最左前缀|左包含原则 2.mysql引擎在查询为了更好利用索引 在查询过程中会动态调整查询字段顺序以便利用索引</span><br><span class="line">name bir age  可 可调整为name age bir </span><br><span class="line">name age bir  可 可调整为name age bir</span><br><span class="line">bir age name  可 可调整为name age bir</span><br><span class="line">age bir       不可 不管怎么调整都包含name不包含左前缀</span><br><span class="line">bir age       不可 不管怎么调整都包含name不包含左前缀</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysql%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/image-20240518165306373.png" alt="image-20240518165306373"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 4.索引的底层原理</span></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1.思考</span><br><span class="line">---建表</span><br><span class="line">create table t<span class="emphasis">_emp(id int primary key,name varchar(20),age int);</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">--插入数据</span></span><br><span class="line"><span class="emphasis">insert into t_</span>emp values(5,&#x27;d&#x27;,22);</span><br><span class="line">insert into t<span class="emphasis">_emp values(6,&#x27;d&#x27;,22);</span></span><br><span class="line"><span class="emphasis">insert into t_</span>emp values(7,&#x27;e&#x27;,21);</span><br><span class="line">insert into t<span class="emphasis">_emp values(1,&#x27;a&#x27;,23);</span></span><br><span class="line"><span class="emphasis">insert into t_</span>emp values(2,&#x27;b&#x27;,26);</span><br><span class="line">insert into t<span class="emphasis">_emp values(3,&#x27;c&#x27;,27);</span></span><br><span class="line"><span class="emphasis">insert into t_</span>emp values(4,&#x27;a&#x27;,32);</span><br><span class="line">insert into t<span class="emphasis">_emp values(8,&#x27;f&#x27;,53);</span></span><br><span class="line"><span class="emphasis">insert into t_</span>emp values(9,&#x27;v&#x27;,13);</span><br><span class="line"></span><br><span class="line">--查询</span><br><span class="line">select * from t<span class="emphasis">_emp;</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysql%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/image-20240518170540568.png" alt="image-20240518170540568"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 5.为什么上面数据明明没有按顺序插入,为什么查询时却是有顺序呢?</span></span><br><span class="line"><span class="bullet">-</span> 原因是:mysql底层为主键自动创建索引,一创建索引会进行排序</span><br><span class="line"><span class="bullet">-</span> 也就是mysql底层真正存储是这样的，如下图</span><br><span class="line"><span class="bullet">-</span> 为什么要排序呢?因为排序之后在查询就相对比较快了 如查询 id=3的我只需要按照顺序找到3就行啦(如果没有排序大海捞针,全靠运气!)</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysql%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/image-20240518170952626.png" alt="image-20240518170952626"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 6.为了进一步提高效率mysql索引又进行了优化 注:1.一般来说树到三层已经够我们用了 2.最顶层常驻内存</span></span><br><span class="line"><span class="bullet">-</span>  就是基于页的形式进行管理索引</span><br><span class="line"><span class="bullet">-</span>  如 查询id=4的 直接先比较页 先去页目录中找,再去 数据目录中找</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysql%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/image-20240518171519553.png" alt="image-20240518171519553"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 7.上面这种索引结构称之为B+树数据结构,那么什么是B+树呢?</span></span><br><span class="line"><span class="bullet">-</span> 参考资料: https://www.cnblogs.com/lianzhilei/p/11250589.html</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysql%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/image-20240518171924114.png" alt="image-20240518171924114"></p>
<p>B+Tree是在B-Tree基础上的一种优化，使其更适合实现外存储索引结构，InnoDB存储引擎就是用B+Tree实现其索引结构。</p>
<p>从上一节中的B-Tree结构图中可以看到每个节点中不仅包含数据的key值，还有data值。而每一个页的存储空间是有限的，如果data数据较大时将会导致每个节点（即一个页）能存储的key的数量很小，当存储的数据量很大时同样会导致B-Tree的深度较大，增大查询时的磁盘I&#x2F;O次数，进而影响查询效率。在B+Tree中，所有数据记录节点都是按照键值大小顺序存放在同一层的叶子节点上，而非叶子节点上只存储key值信息，这样可以大大加大每个节点存储的key值数量，降低B+Tree的高度。</p>
<p>B+Tree相对于B-Tree有几点不同：</p>
<ol>
<li>非叶子节点只存储键值信息。</li>
<li>所有叶子节点之间都有一个链指针。</li>
<li>数据记录都存放在叶子节点中。</li>
</ol>
<ul>
<li>InnoDB存储引擎中页的大小为16KB，一般表的主键类型为INT（占用4个字节）或BIGINT（占用8个字节），指针类型也一般为4或8个字节，也就是说一个页（B+Tree中的一个节点）中大概存储16KB&#x2F;(8B+8B)&#x3D;1K个键值（因为是估值，为方便计算，这里的K取值为〖10〗3）。也就是说一个深度为3的B+Tree索引可以维护103 * 10^3 * 10^3 &#x3D; 10亿 条记录。</li>
<li>实际情况中每个节点可能不能填充满，因此在数据库中，B+Tree的高度一般都在24层。<a target="_blank" rel="noopener" href="http://lib.csdn.net/base/mysql">mysql</a>的InnoDB存储引擎在设计时是将根节点常驻内存的，也就是说查找某一键值的行记录时最多只需要1-3次磁盘I&#x2F;O操作。顶层页常驻内存。</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 8.聚簇索引和非聚簇索引</span></span><br><span class="line"><span class="bullet">-</span> 聚簇索引： 将数据存储与索引放到了一块，索引结构的叶子节点保存了行数据 主键索引就是聚簇索引的一种</span><br><span class="line"><span class="bullet">-</span> 非聚簇索引：将数据与索引分开存储，索引结构的叶子节点指向了数据对应的位置</span><br></pre></td></tr></table></figure>

<p><code>注意</code>:<strong>在innodb中，在聚簇索引之上创建的索引称之为辅助索引，非聚簇索引都是辅助索引，像复合索引、前缀索引、唯一索引。辅助索引叶子节点存储的不再是行的物理位置，而是主键值，辅助索引访问数据总是需要二次查找</strong>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysql%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/image-20240518172853519.png" alt="image-20240518172853519"></p>
<ol>
<li>InnoDB中</li>
</ol>
<ul>
<li>InnoDB使用的是聚簇索引，将主键组织到一棵B+树中，而行数据就储存在叶子节点上，若使用”where id &#x3D; 14”这样的条件查找主键，则按照B+树的检索算法即可查找到对应的叶节点，之后获得行数据。</li>
<li>若对Name列进行条件搜索，则需要两个步骤：第一步在辅助索引B+树中检索Name，到达其叶子节点获取对应的主键。第二步使用主键在主索引B+树种再执行一次B+树检索操作，最终到达叶子节点即可获取整行数据。（重点在于通过其他键需要建立辅助索引）</li>
<li><strong>聚簇索引默认是主键</strong>，如果表中没有定义主键，InnoDB 会选择一个<strong>唯一且非空的索引</strong>代替。如果没有这样的索引，InnoDB 会<strong>隐式定义一个主键（类似oracle中的RowId）</strong>来作为聚簇索引。如果已经设置了主键为聚簇索引又希望再单独设置聚簇索引，必须先删除主键，然后添加我们想要的聚簇索引，最后恢复设置主键即可。</li>
</ul>
<ol start="2">
<li>MYISAM</li>
</ol>
<ul>
<li>MyISAM使用的是非聚簇索引，<strong>非聚簇索引的两棵B+树看上去没什么不同</strong>，节点的结构完全一致只是存储的内容不同而已，主键索引B+树的节点存储了主键，辅助键索引B+树存储了辅助键。表数据存储在独立的地方，这两颗B+树的叶子节点都使用一个地址指向真正的表数据，对于表数据来说，这两个键没有任何差别。由于<strong>索引树是独立的，通过辅助键检索无需访问主键的索引树</strong>。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysql%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/image-20240518174148221.png" alt="image-20240518174148221"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 9.使用聚簇索引的优势</span></span><br><span class="line"><span class="bullet">-</span> 问题: 每次使用辅助索引检索都要经过两次B+树查找，看上去聚簇索引的效率明显要低于非聚簇索引，这不是多此一举吗？聚簇索引的优势在哪？</span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">- 1.由于行数据和聚簇索引的叶子节点存储在一起，同一页中会有多条行数据，访问同一数据页不同行记录时，已经把页加载到了Buffer中（缓存器），再次访问时，会在内存中完成访问，不必访问磁盘。这样主键和行数据是一起被载入内存的，找到叶子节点就可以立刻将行数据返回了，如果按照主键Id来组织数据，获得数据更快。</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="bullet">-</span> 2.辅助索引的叶子节点，存储主键值，而不是数据的存放地址。好处是当行数据放生变化时，索引树的节点也需要分裂变化；或者是我们需要查找的数据，在上一次IO读写的缓存中没有，需要发生一次新的IO操作时，可以避免对辅助索引的维护工作，只需要维护聚簇索引树就好了。另一个好处是，因为辅助索引存放的是主键值，减少了辅助索引占用的存储空间大小。</span><br><span class="line"><span class="section"># 10.聚簇索引需要注意什么?</span></span><br><span class="line"><span class="bullet">-</span> 当使用主键为聚簇索引时，主键最好不要使用uuid，因为uuid的值太过离散，不适合排序且可能出线新增加记录的uuid，会插入在索引树中间的位置，导致索引树调整复杂度变大，消耗更多的时间和资源。</span><br><span class="line"><span class="bullet">-</span> 建议使用int类型的自增，方便排序并且默认会在索引树的末尾增加主键值，对索引树的结构影响最小。而且，主键值占用的存储空间越大，辅助索引中保存的主键值也会跟着变大，占用存储空间，也会影响到IO操作读取到的数据量。</span><br><span class="line"></span><br><span class="line"><span class="section"># 11. 为什么主键通常建议使用自增id</span></span><br><span class="line"><span class="bullet">-</span> 聚簇索引的数据的物理存放顺序与索引顺序是一致的，即：只要索引是相邻的，那么对应的数据一定也是相邻地存放在磁盘上的。如果主键不是自增id，那么可以想象，它会干些什么，不断地调整数据的物理地址、分页，当然也有其他一些措施来减少这些操作，但却无法彻底避免。但，如果是自增的，那就简单了，它只需要一页一页地写，索引结构相对紧凑，磁盘碎片少，效率也高。</span><br><span class="line"><span class="section"># 12. 什么情况下无法利用索引呢?</span></span><br><span class="line"><span class="bullet">-</span> 1. 查询语句中使用LIKE关键字</span><br><span class="line">在查询语句中使用 LIKE 关键字进行查询时，如果匹配字符串的第一个字符为“%”，索引不会被使用。如果“%”不是在第一个位置，索引就会被使用。</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 2.查询语句中使用多列索引</span><br><span class="line">多列索引是在表的多个字段上创建一个索引，只有查询条件中使用了这些字段中的第一个字段，索引才会被使用。最左原则</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 3.查询语句中使用OR关键字</span><br><span class="line">查询语句只有OR关键字时，如果OR前后的两个条件的列都是索引，那么查询中将使用索引。如果OR前后有一个条件的列不是索引，那么查询中将不使用索引。</span><br></pre></td></tr></table></figure>

<h2 id="mysql优化"><a href="#mysql优化" class="headerlink" title="mysql优化"></a>mysql优化</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># mysql优化过程</span></span><br><span class="line">1.单机---&gt;单点压力、单点故障 ----&gt;加节点</span><br><span class="line">2.数据集群部署</span><br><span class="line"><span class="code">    无限节点----&gt;成本问题----&gt;集群优化</span></span><br><span class="line"><span class="code">3.集群下优化</span></span><br><span class="line"><span class="code">    主从复制---&gt;读写分离架构----&gt;-----&gt;水平拆分----&gt;库表散列 均匀</span></span><br></pre></td></tr></table></figure>

<h3 id="主从复制架构"><a href="#主从复制架构" class="headerlink" title="主从复制架构"></a>主从复制架构</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/centos7Pictures/20201021132213288.jpg" alt="在这里插入图片描述"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 0.架构规划</span></span><br><span class="line"><span class="code">	192.168.202.201    master  主节点</span></span><br><span class="line"><span class="code">	192.168.202.202    slave   从节点</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="section"># 1.修改mysql的配置文件</span></span><br><span class="line"><span class="code">	[root@localhost mysql]# vim /etc/my.cnf</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="section"># 2.分别在配置文件中加入如下配置</span></span><br><span class="line"></span><br><span class="line"><span class="code">	mysql(master):</span></span><br><span class="line"><span class="code">		server-id=1</span></span><br><span class="line"><span class="code">		log-bin=mysql-bin</span></span><br><span class="line"><span class="code">		log-slave-updates</span></span><br><span class="line"><span class="code">		slave-skip-errors=all</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	msyql(slave):</span></span><br><span class="line"><span class="code">		server-id=2</span></span><br><span class="line"><span class="code">		log-bin=mysql-bin</span></span><br><span class="line"><span class="code">		log-slave-updates</span></span><br><span class="line"><span class="code">		slave-skip-errors=all</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="code">		注意:两个机器的server-id不能一致</span></span><br><span class="line"><span class="code">12345678910111213141516171819202122</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/centos7Pictures/20201020214037303.png" alt="在这里插入图片描述"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 3.重启mysql服务</span></span><br><span class="line"><span class="code">	systemctl restart mysqld</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="section"># 4.登录mysql执行如下命令检测配置是否生效</span></span><br><span class="line"><span class="code">	SHOW VARIABLES like &#x27;server_id&#x27;;</span></span><br><span class="line"><span class="code">12345</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/centos7Pictures/20201020214132662.png" alt="在这里插入图片描述"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 5.登录master节点执行如下命令</span></span><br><span class="line"><span class="code">		show master status;</span></span><br><span class="line"><span class="code">12</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/centos7Pictures/20201020214156378.png" alt="在这里插入图片描述"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 6.登录从节点执行如下命令:</span></span><br><span class="line"><span class="code">		change master to </span></span><br><span class="line"><span class="code">		master_host=&#x27;10.15.0.9&#x27;,</span></span><br><span class="line"><span class="code">		master_user=&#x27;root&#x27;,</span></span><br><span class="line"><span class="code">		master_password=&#x27;root&#x27;,</span></span><br><span class="line"><span class="code">		master_log_file=&#x27;mysql-bin.000001&#x27;,</span></span><br><span class="line"><span class="code">		master_log_pos=120;</span></span><br><span class="line"><span class="code">1234567</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/centos7Pictures/20201020214231928.png" alt="在这里插入图片描述"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 7.开启从节点</span></span><br><span class="line"><span class="code">		start slave; </span></span><br><span class="line"><span class="code">		stop  slave;</span></span><br><span class="line"><span class="code">123</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/centos7Pictures/20201020214251191.png" alt="在这里插入图片描述"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 8.查看从节点状态</span></span><br><span class="line"><span class="code">		show slave status\G;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">		************************** 1. row ***************************</span></span><br><span class="line"><span class="code">               Slave_IO_State: Waiting for master to send event</span></span><br><span class="line"><span class="code">                  Master_Host: 10.15.0.9</span></span><br><span class="line"><span class="code">                  Master_User: root</span></span><br><span class="line"><span class="code">                  Master_Port: 3306</span></span><br><span class="line"><span class="code">                Connect_Retry: 60</span></span><br><span class="line"><span class="code">              Master_Log_File: mysql-bin.000001</span></span><br><span class="line"><span class="code">          Read_Master_Log_Pos: 120</span></span><br><span class="line"><span class="code">               Relay_Log_File: mysqld-relay-bin.000002</span></span><br><span class="line"><span class="code">                Relay_Log_Pos: 283</span></span><br><span class="line"><span class="code">        Relay_Master_Log_File: mysql-bin.000001</span></span><br><span class="line"><span class="code">             Slave_IO_Running: Yes</span></span><br><span class="line"><span class="code">            Slave_SQL_Running: Yes</span></span><br><span class="line"><span class="code">   	</span></span><br><span class="line"><span class="code">    注意:</span></span><br><span class="line"><span class="code">    		1.出现 Slave_IO_Running: Yes 和 Slave_SQL_Running: Yes 说名成功,</span></span><br><span class="line"><span class="code">    		2.如果在搭建过程出现错误,可以查看查看错误日志文件 cat /var/log/mysqld.log</span></span><br><span class="line"><span class="code"> </span></span><br><span class="line"><span class="code"># 9.通过客户端工具进行测试</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code"># 10.关闭主从复制(在从节点执行)</span></span><br><span class="line"><span class="code">	stop slave;</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">注意:如果出现Slave I/O: Fatal error: The slave I/O thread stops because master</span></span><br><span class="line"><span class="code">and slave have equal MySQL server UUIDs; these UUIDs must be different for</span></span><br><span class="line"><span class="code">replication to work. Error_code: 1593错误,请执行如下命令,rm -rf </span></span><br><span class="line"><span class="code">/var/lib/mysql/auto.cnf删除这个文件,之所以出现会出现这样的问题，是因为我的</span></span><br><span class="line"><span class="code">从库主机是克隆的主库所在的主机，所以auto.cnf文件中保存的UUID会出现重复.</span></span><br></pre></td></tr></table></figure>

<h3 id="读写分离架构"><a href="#读写分离架构" class="headerlink" title="读写分离架构"></a>读写分离架构</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/centos7Pictures/2020102113240375.jpg" alt="在这里插入图片描述"></p>
<h4 id="9-1-MyCat引言"><a href="#9-1-MyCat引言" class="headerlink" title="9.1 MyCat引言"></a>9.1 MyCat引言</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">基于阿里开源的Cobar产品而研发，Cobar的稳定性、可靠性、优秀的架构和性能以及众多成熟的使用案例使得MYCAT一开</span><br><span class="line">始就拥有一个很好的起点，站在巨人的肩膀上，我们能看到更远。业界优秀的开源项目和创新思路被广泛融入到MYCAT</span><br><span class="line">的基因中，使得MYCAT在很多方面都领先于目前其他一些同类的开源项目，甚至超越某些商业产品。MYCAT背后有一支强大的技术团队，其参与者都是5年以上资深软件工程师、架构师、DBA等，优秀的技术团队保证了MYCAT的产品质量。MYCAT并不依托于任何一个商业公司，因此不像某些开源项目，将一些重要的特性封闭在其商业产品中，使得开源项目成了一个摆设。</span><br></pre></td></tr></table></figure>

<h4 id="9-2-安装Mycat"><a href="#9-2-安装Mycat" class="headerlink" title="9.2 安装Mycat"></a>9.2 安装Mycat</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 1.下载mycat</span></span><br><span class="line"><span class="code">	http://dl.mycat.io/1.6-RELEASE/Mycat-server-1.6-RELEASE-20161028204710-linux.tar.gz</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="section"># 2.解压mycat</span></span><br><span class="line"><span class="code">	tar -zxvf Mycat-server-1.6-RELEASE-20161028204710-linux.tar.gz</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/centos7Pictures/20201020214344840.png" alt="在这里插入图片描述"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 3.查看解压之后目录]</span></span><br><span class="line"><span class="code">	[root@localhost mycat]# ls</span></span><br><span class="line"><span class="code">	总用量 12</span></span><br><span class="line"><span class="code">	drwxr-xr-x. 2 root root  190 10月 14 22:58 bin</span></span><br><span class="line"><span class="code">	drwxrwxrwx. 2 root root    6 3月   1 2016 catlet</span></span><br><span class="line"><span class="code">	drwxrwxrwx. 4 root root 4096 10月 14 22:58 conf</span></span><br><span class="line"><span class="code">	drwxr-xr-x. 2 root root 4096 10月 14 22:58 lib</span></span><br><span class="line"><span class="code">	drwxrwxrwx. 2 root root    6 10月 28 2016 logs</span></span><br><span class="line"><span class="code">	-rwxrwxrwx. 1 root root  217 10月 28 2016 version.txt</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/centos7Pictures/20201020214404104.png" alt="在这里插入图片描述"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 4.移动到/usr目录</span></span><br><span class="line"><span class="code">	mv mycat/ /usr/</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="section"># 5.配置mycat中conf下的配置schema.xml</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/centos7Pictures/20201021132625406.jpg" alt="在这里插入图片描述"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">&lt;!-- 定义MyCat的逻辑库  --&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">schema</span> <span class="attr">name</span>=<span class="string">&quot;test_schema&quot;</span> <span class="attr">checkSQLschema</span>=<span class="string">&quot;false&quot;</span> <span class="attr">sqlMaxLimit</span>=<span class="string">&quot;100&quot;</span> <span class="attr">dataNode</span>=<span class="string">&quot;testNode&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">schema</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 定义MyCat的数据节点 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dataNode</span> <span class="attr">name</span>=<span class="string">&quot;testNode&quot;</span> <span class="attr">dataHost</span>=<span class="string">&quot;dtHost&quot;</span> <span class="attr">database</span>=<span class="string">&quot;test&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dataHost</span> <span class="attr">name</span>=<span class="string">&quot;dtHost&quot;</span> <span class="attr">maxCon</span>=<span class="string">&quot;1000&quot;</span> <span class="attr">minCon</span>=<span class="string">&quot;10&quot;</span> <span class="attr">balance</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">writeType</span>=<span class="string">&quot;0&quot;</span> <span class="attr">dbType</span>=<span class="string">&quot;mysql&quot;</span> <span class="attr">dbDriver</span>=<span class="string">&quot;native&quot;</span> <span class="attr">switchType</span>=<span class="string">&quot;-1&quot;</span>  <span class="attr">slaveThreshold</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">heartbeat</span>&gt;</span>select user()<span class="tag">&lt;/<span class="name">heartbeat</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--写节点--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">writeHost</span> <span class="attr">host</span>=<span class="string">&quot;hostM1&quot;</span> <span class="attr">url</span>=<span class="string">&quot;192.168.28.128:3306&quot;</span> <span class="attr">user</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">                  		<span class="comment">&lt;!--从节点--&gt;</span></span><br><span class="line">                			<span class="tag">&lt;<span class="name">readHost</span> <span class="attr">host</span>=<span class="string">&quot;hostS1&quot;</span> <span class="attr">url</span>=<span class="string">&quot;192.168.28.129:3306&quot;</span> <span class="attr">user</span>=<span class="string">&quot;root&quot;</span> <span class="attr">password</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">writeHost</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dataHost</span>&gt;</span></span><br><span class="line"></span><br><span class="line"># 6.配置登陆mycat的权限server.xml</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/centos7Pictures/20201021132646754.jpg" alt="在这里插入图片描述"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">system</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 这里配置的都是一些系统属性，可以自己查看mycat文--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultSqlParser&quot;</span>&gt;</span>druidparser<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;charset&quot;</span>&gt;</span>utf8mb4<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">system</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">user</span> <span class="attr">name</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;schemas&quot;</span>&gt;</span>test_schema<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br><span class="line"></span><br><span class="line"># 7.启动mycat</span><br><span class="line">	 ./mycat console</span><br><span class="line"></span><br><span class="line"># 8.查看日志</span><br><span class="line">	tail -f ../logs/mycat.log</span><br><span class="line"></span><br><span class="line"># 9.数据库连接配置,测试</span><br></pre></td></tr></table></figure>

<h2 id="mysql锁"><a href="#mysql锁" class="headerlink" title="mysql锁"></a>mysql锁</h2><blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6931752749545553933">https://juejin.cn/post/6931752749545553933</a></p>
</blockquote>
<p>锁是计算机协调多个进程或线程并发访问某一资源的机制。</p>
<p>在数据库中，除传统的计算资源（如CPU、RAM、I&#x2F;O等）的争用以外，数据也是一种供许多用户共享的资源。如何保证数据并发访问的一致性、有效性是所有数据库必须解决的一个问题，锁冲突也是影响数据库并发访问性能的一个重要因素。从这个角度来说，锁对数据库而言显得尤其重要，也更加复杂。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://chabai000.github.io">茶白</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://chabai000.github.io/posts/13153/">https://chabai000.github.io/posts/13153/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://chabai000.github.io" target="_blank">茶白的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/mysql/">mysql</a></div><div class="post_share"><div class="social-share" data-image="/UpPictures/UpCover/mysql.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/%E8%B5%9E%E8%B5%8F%E7%A0%81.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/%E8%B5%9E%E8%B5%8F%E7%A0%81.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/48414/" title="javaweb开发演变"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/javaweb.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">javaweb开发演变</div></div></a></div><div class="next-post pull-right"><a href="/posts/37899/" title="mybatis-plus"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/mysql-plus.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">mybatis-plus</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/57545/" title="mysql详细版"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/mysql.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-04</div><div class="title">mysql详细版</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">茶白</div><div class="author-info__description">不论你在什么时候开始，重要的是开始之后就不要停止；不论你在什么时候结束，重要的是结束之后就不要悔恨</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/chabai000"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/chabai000" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1693522579@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">mysql基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85"><span class="toc-number">1.1.</span> <span class="toc-text">下载安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.</span> <span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.</span> <span class="toc-text">基础语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">1.3.1.</span> <span class="toc-text">数据库的基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">1.3.2.</span> <span class="toc-text">数据库表的基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.3.3.</span> <span class="toc-text">数据表的约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.4.</span> <span class="toc-text">数据表插入数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.5.</span> <span class="toc-text">数据表更新数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.6.</span> <span class="toc-text">数据表删除数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.3.7.</span> <span class="toc-text">数据表简单查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.8.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.3.9.</span> <span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%AB%E5%90%8D%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.3.10.</span> <span class="toc-text">别名设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB"><span class="toc-number">1.3.11.</span> <span class="toc-text">关联关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.3.12.</span> <span class="toc-text">多表连接查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.3.13.</span> <span class="toc-text">子查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql%E9%AB%98%E7%BA%A7"><span class="toc-number">2.</span> <span class="toc-text">mysql高级</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84"><span class="toc-number">2.1.</span> <span class="toc-text">mysql逻辑架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql%E7%B4%A2%E5%BC%95"><span class="toc-number">2.2.</span> <span class="toc-text">mysql索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql%E4%BC%98%E5%8C%96"><span class="toc-number">2.3.</span> <span class="toc-text">mysql优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E6%9E%B6%E6%9E%84"><span class="toc-number">2.3.1.</span> <span class="toc-text">主从复制架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E6%9E%B6%E6%9E%84"><span class="toc-number">2.3.2.</span> <span class="toc-text">读写分离架构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-MyCat%E5%BC%95%E8%A8%80"><span class="toc-number">2.3.2.1.</span> <span class="toc-text">9.1 MyCat引言</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-%E5%AE%89%E8%A3%85Mycat"><span class="toc-number">2.3.2.2.</span> <span class="toc-text">9.2 安装Mycat</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql%E9%94%81"><span class="toc-number">2.4.</span> <span class="toc-text">mysql锁</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/7648/" title="java八股文-高级篇"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.dujin.org/bing/1366.php" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java八股文-高级篇"/></a><div class="content"><a class="title" href="/posts/7648/" title="java八股文-高级篇">java八股文-高级篇</a><time datetime="2023-06-11T14:12:54.000Z" title="发表于 2023-06-11 22:12:54">2023-06-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/43771/" title="shell脚本快速入门"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.dujin.org/bing/1366.php" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="shell脚本快速入门"/></a><div class="content"><a class="title" href="/posts/43771/" title="shell脚本快速入门">shell脚本快速入门</a><time datetime="2022-06-24T12:55:57.000Z" title="发表于 2022-06-24 20:55:57">2022-06-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/55491/" title="java常用知识集"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/java.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java常用知识集"/></a><div class="content"><a class="title" href="/posts/55491/" title="java常用知识集">java常用知识集</a><time datetime="2022-05-19T12:32:28.000Z" title="发表于 2022-05-19 20:32:28">2022-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/37319/" title="jvm"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/java.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jvm"/></a><div class="content"><a class="title" href="/posts/37319/" title="jvm">jvm</a><time datetime="2022-05-19T04:13:32.000Z" title="发表于 2022-05-19 12:13:32">2022-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/12796/" title="centos7"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/centos.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="centos7"/></a><div class="content"><a class="title" href="/posts/12796/" title="centos7">centos7</a><time datetime="2022-05-18T07:14:53.000Z" title="发表于 2022-05-18 15:14:53">2022-05-18</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 茶白</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const disqus_config = function () {
    this.page.url = 'https://chabai000.github.io/posts/13153/'
    this.page.identifier = '/posts/13153/'
    this.page.title = 'mysql快速入门'
  }

  const disqusReset = () => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  btf.addGlobalFn('themeChange', disqusReset, 'disqus')

  const loadDisqus = () =>{
    if (window.DISQUS) disqusReset()
    else {
      const script = document.createElement('script')
      script.src = 'https://lchabai.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=lchabai&api_key=&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if ('Disqus' === 'Disqus' || !true) {
    if (true) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<code>.*?<\/code>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    fetch('https://disqus.com/api/3.0/forums/listPosts.json?forum=lchabai&related=thread&limit=6&api_key=')
      .then(response => response.json())
      .then(data => {
        const disqusArray = data.response.map(item => {
          return {
            'avatar': item.author.avatar.cache,
            'content': changeContent(item.message),
            'nick': item.author.name,
            'url': item.url,
            'date': item.createdAt
          }
        })

        saveToLocal.set('disqus-newest-comments', JSON.stringify(disqusArray), 10/(60*24))
        generateHtml(disqusArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (false) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick}</span><time> / ${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('disqus-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="9310458102" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false" data-lrcType="0"> </div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>