<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>shell脚本快速入门 | 茶白的博客</title><meta name="author" content="茶白"><meta name="copyright" content="茶白"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="shell快速入门（csdn）一、什么是shell？shell是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。 Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。 为什么要学习和使用shell？Shell属于内置的脚本，程序开发的效率非常高，依赖于功能强大的命令可以迅速地完成开发任务">
<meta property="og:type" content="article">
<meta property="og:title" content="shell脚本快速入门">
<meta property="og:url" content="https://chabai000.github.io/posts/43771/index.html">
<meta property="og:site_name" content="茶白的博客">
<meta property="og:description" content="shell快速入门（csdn）一、什么是shell？shell是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。 Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。 为什么要学习和使用shell？Shell属于内置的脚本，程序开发的效率非常高，依赖于功能强大的命令可以迅速地完成开发任务">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://api.dujin.org/bing/1366.php">
<meta property="article:published_time" content="2022-06-24T12:55:57.000Z">
<meta property="article:modified_time" content="2024-09-05T13:42:54.455Z">
<meta property="article:author" content="茶白">
<meta property="article:tag" content="shell">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://api.dujin.org/bing/1366.php"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://chabai000.github.io/posts/43771/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 茶白","link":"链接: ","source":"来源: 茶白的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'shell脚本快速入门',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-05 21:42:54'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><style type="text/css">.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><meta name="generator" content="Hexo 7.1.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-comments"></i><span> 说说</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://api.dujin.org/bing/1366.php')"><nav id="nav"><span id="blog-info"><a href="/" title="茶白的博客"><span class="site-name">茶白的博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-comments"></i><span> 说说</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">shell脚本快速入门</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-24T12:55:57.000Z" title="发表于 2022-06-24 20:55:57">2022-06-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-05T13:42:54.455Z" title="更新于 2024-09-05 21:42:54">2024-09-05</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">24.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>89分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="shell脚本快速入门"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="shell快速入门（csdn）"><a href="#shell快速入门（csdn）" class="headerlink" title="shell快速入门（csdn）"></a>shell快速入门（csdn）</h1><h3 id="一、什么是shell？"><a href="#一、什么是shell？" class="headerlink" title="一、什么是shell？"></a>一、什么是shell？</h3><p>shell是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。</p>
<p>Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。</p>
<h4 id="为什么要学习和使用shell？"><a href="#为什么要学习和使用shell？" class="headerlink" title="为什么要学习和使用shell？"></a>为什么要学习和使用shell？</h4><p>Shell属于内置的脚本，程序开发的效率非常高，依赖于功能强大的命令可以迅速地完成开发任务（批处理）语法简单，代码写起来比较轻松，简单易学</p>
<hr>
<h3 id="二、shell的分类"><a href="#二、shell的分类" class="headerlink" title="二、shell的分类"></a>二、shell的分类</h3><p><strong>cat &#x2F;etc&#x2F;shells</strong><br>在linux中有很多类型的shell，不同的shell具备不同的功能，shell还决定了脚本中函数的语法，Linux中默认的shell是 &#x2F;bash &#x2F;bash（ 重 点） ，流行的shell有ash、bash、ksh、csh、zsh等，不同的shell都有自己的特点以及用途。</p>
<p><strong>编写规范：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash				[指定告知系统当前这个脚本要使用的shell解释器]</span></span><br><span class="line">Shell相关指令</span><br><span class="line">12</span><br></pre></td></tr></table></figure>

<p><strong>文件命名规范：</strong></p>
<p>文件名.sh   <strong>.sh</strong>是linux下bash shell 的默认后缀</p>
<h4 id="Bash-常用快捷键"><a href="#Bash-常用快捷键" class="headerlink" title="Bash 常用快捷键"></a>Bash 常用快捷键</h4><table>
<thead>
<tr>
<th>快捷键</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>ctrl+A</td>
<td>把光标移动到命令行开头。如果我们输入的命令过长，想要把光标移动到命令行开头时使用。</td>
</tr>
<tr>
<td>ctrl+E</td>
<td>把光标移动到命令行结尾。</td>
</tr>
<tr>
<td>ctrl+C</td>
<td>强制终止当前的命令。</td>
</tr>
<tr>
<td>ctrl+L</td>
<td>清屏，相当于clear命令。</td>
</tr>
<tr>
<td>ctrl+U</td>
<td>删除或剪切光标之前的命令。我输入了一行很长的命令，不用使用退格键一个一个字符的删除，使用这个快捷键会更加方便</td>
</tr>
<tr>
<td>ctrl+K</td>
<td>删除或剪切光标之后的内容。</td>
</tr>
<tr>
<td>ctrl+Y</td>
<td>粘贴ctrl+U或ctul+K剪切的内容。</td>
</tr>
<tr>
<td>ctrl+R</td>
<td>在历史命令中搜索，按下ctrl+R之后，就会出现搜索界面，只要输入搜索内容，就会从历史命令中搜索。</td>
</tr>
<tr>
<td>ctrl+D</td>
<td>退出当前终端。</td>
</tr>
<tr>
<td>ctrl+Z</td>
<td>暂停，并放入后台。这个快捷键牵扯工作管理的内容，我们在系统管理章节详细介绍。</td>
</tr>
<tr>
<td>ctrl+S</td>
<td>暂停屏幕输出。</td>
</tr>
<tr>
<td>ctrl+Q</td>
<td>恢复屏幕输出。</td>
</tr>
</tbody></table>
<h4 id="输入输出重定向"><a href="#输入输出重定向" class="headerlink" title="输入输出重定向"></a>输入输出重定向</h4><h5 id="linux-的标准输入与输出"><a href="#linux-的标准输入与输出" class="headerlink" title="linux 的标准输入与输出"></a>linux 的标准输入与输出</h5><table>
<thead>
<tr>
<th>设备</th>
<th>设备名</th>
<th>文件描述符</th>
<th>类型</th>
</tr>
</thead>
<tbody><tr>
<td>键盘</td>
<td>&#x2F;dev&#x2F;stdin</td>
<td>0</td>
<td>标准输入</td>
</tr>
<tr>
<td>显示器</td>
<td>&#x2F;dev&#x2F;stdout</td>
<td>1</td>
<td>标准输出</td>
</tr>
<tr>
<td>显示器</td>
<td>&#x2F;dev&#x2F;stderr</td>
<td>2</td>
<td>标准错误输出</td>
</tr>
</tbody></table>
<h5 id="输入重定向"><a href="#输入重定向" class="headerlink" title="输入重定向"></a>输入重定向</h5><p><strong>输入重定向</strong>：是指不使用系统提供的标准输入端口，而进行重新的指定。换言之，输入重定向就是不使用标准输入端口输入文件，而是使用指定的文件作为标准输入设备。（重定向简单理解就是使用 “&lt;”符来修改标准输入设备）</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>符号（语法）</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>标准输入</td>
<td>命令&lt;文件1</td>
<td>命令把文件1的内容作为标准输入设备</td>
</tr>
<tr>
<td>标识符限定输入</td>
<td>命令&lt;&lt;标识符</td>
<td>命令把标准输入中读入内容，直到遇到“标识符”分解符为止</td>
</tr>
<tr>
<td>输入输出重定向（同时使用）</td>
<td>命令&lt; 文件1 &gt;文件2</td>
<td>命令把文件1的内容作为标准输入，把文件2作为标准输出。</td>
</tr>
</tbody></table>
<h5 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h5><p><strong>输出重定向</strong>：（通俗的讲，重定向输出就是把要输出的文件信息写入到一个文件中去，而不是将要输出的文件信息输出到控制台（显示屏），在linux中，默认的标准输出设备是控制台（或称为显示器）,用户输出的信息默认情况下都会显示到控制台</p>
<p><strong>&amp;表示全部文件，文件不管对错，1表示标准输出文件，2表示标准错误输出。</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>标住输出重定向</td>
<td>命令 &gt; 文件</td>
<td>以覆盖方式，把命令的正确输出内容输出到指定的文件或设备当中</td>
</tr>
<tr>
<td>标住输出重定向</td>
<td>命令 &gt;&gt; 文件</td>
<td>以追加方式，把命令的正确输出内容输出到指定的文件或设备当中</td>
</tr>
<tr>
<td>标准错误输出重定向</td>
<td>错误命令2 &gt; 文件</td>
<td>以覆盖方式，把命令的错误输出输出到指定的文件或设备当中</td>
</tr>
<tr>
<td>标准错误输出重定向</td>
<td>错误命令2 &gt;&gt; 文件</td>
<td>以追加方式，把命令的错误输出输出到指定的文件或设备当中</td>
</tr>
<tr>
<td>正确输出和错误输出同时保存</td>
<td>命令 &gt; 文件 2&gt;&amp;1</td>
<td>以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中。</td>
</tr>
<tr>
<td>正确输出和错误输出同时保存</td>
<td>命令 &gt;&gt; 文件 2&gt;&amp;1</td>
<td>以追加的方式，把正确输出和错误输出都保存到同一个文件当中。</td>
</tr>
<tr>
<td>正确输出和错误输出同时保存</td>
<td>命令 &amp;&gt; 文件</td>
<td>以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中。</td>
</tr>
<tr>
<td>正确输出和错误输出同时保存</td>
<td>命令 &amp;&gt;&gt; 文件</td>
<td>以追加的方式，把正确输出和错误输出都保存到同一个文件当中。</td>
</tr>
<tr>
<td>正确输出和错误输出同时保存</td>
<td>命令 &gt;&gt; 文件1 2&gt;&gt;文件2</td>
<td>把正确的输出追加到文件1中，把错误的输出追加到文件2中。</td>
</tr>
</tbody></table>
<h6 id="dev-null-文件"><a href="#dev-null-文件" class="headerlink" title="&#x2F;dev&#x2F;null 文件"></a>&#x2F;dev&#x2F;null 文件</h6><p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到**&#x2F;dev&#x2F;null**中</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span>  command &gt; dev/null</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h5 id="多命令顺序执行"><a href="#多命令顺序执行" class="headerlink" title="多命令顺序执行"></a>多命令顺序执行</h5><table>
<thead>
<tr>
<th>多命令执行符</th>
<th>作用</th>
<th>格式</th>
</tr>
</thead>
<tbody><tr>
<td>；</td>
<td>命令1 ；命令2</td>
<td>多个命令顺序执行，命令之间没有任何逻辑联系</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>命令1 &amp;&amp; 命令2</td>
<td>当命令1正确执行（? &#x3D; 0 ） ， 则 命 令 2 才 会 执 行 当 命 令 1 执 行 不 正 确 （ ?&#x3D;0），则命令2才会执行 当命令1执行不正确（?&#x3D;0），则命令2才会执行当命令1执行不正确（?≠0），则命令2不会执行</td>
</tr>
<tr>
<td>ll</td>
<td>命令1 || 命令2</td>
<td>当命令1执行不正确（? ≠ 0 ） ， 则 命 令 2 才 会 执 行 当 命 令 1 正 确 执 行 （ ?≠0），则命令2才会执行当命令1正确执行（?\&#x3D;0），则命令2才会执行当命令1正确执行（?&#x3D;0），则命令2不会执行</td>
</tr>
</tbody></table>
<h4 id="shell脚本的执行"><a href="#shell脚本的执行" class="headerlink" title="shell脚本的执行"></a>shell脚本的执行</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]$ vim test.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">echo “hello world”</span><br><span class="line">123</span><br></pre></td></tr></table></figure>

<p><strong>两种方式执行shell脚本</strong></p>
<p>第一种：给文件增加执行权限</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> chmod u+x test.sh</span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> ./test.sh  <span class="comment">#绝对路径或相对路径执行</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>第二种（了解）：通过Bash调用执行脚本</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> bash test.sh</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>



<hr>
<h3 id="三、shell变量"><a href="#三、shell变量" class="headerlink" title="三、shell变量"></a>三、shell变量</h3><p><strong>什么是变量？</strong><br>在一个脚本周期内,其值可以发生改变的量就是变量。</p>
<h4 id="1-变量的命名规则："><a href="#1-变量的命名规则：" class="headerlink" title="1. 变量的命名规则："></a>1. 变量的命名规则：</h4><p>在定义变量时，有一些规则需要遵守:</p>
<ol>
<li>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</li>
<li>等号左右两侧不能有空格，可以使用下划线“_”，变量的值如果有空格，需要使用单引号或双引号包括。如:“test&#x3D;“hello world!””。其中双引号括起来的内容“$”，“(”和反引号都拥有特殊含义，而单引号括起来的内容都是普通字符。</li>
<li>不能使用标点符号，不能使用bash里的关键字（可用help命令查看保留关键字）。</li>
<li>环境变量建议大写，便于区分</li>
<li>如果需要增加变量的值，那么可以进行变量值的叠加。不过变量需要用双引号包含”$变量名”或用${变量名}包含变量名。</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> test=<span class="number">123</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> test=<span class="string">&quot;<span class="variable">$test</span>&quot;</span><span class="number">456</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> <span class="variable">$test</span></span><br><span class="line"><span class="number">123456</span></span><br><span class="line"><span class="comment">#叠加变量test，变量值变成了123456</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> test=<span class="variable">$</span>&#123;test&#125;<span class="number">789</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> <span class="variable">$test</span></span><br><span class="line"><span class="number">123456789</span></span><br><span class="line"><span class="comment">#再叠加变量test，变量值编程了123456789</span></span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>

<p><strong>关于单双引号的问题：<br>双引号能够识别变量，双引号能够实现转义（类似于“*”）<br>单引号是不能识别变量，只会原样输出，单引号是不能转义的</strong></p>
<h5 id="shell中特殊符号"><a href="#shell中特殊符号" class="headerlink" title="shell中特殊符号"></a>shell中特殊符号</h5><table>
<thead>
<tr>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>’ ’</td>
<td>单引号。在单引号中所有的特殊符号，如“$”和”(反引号)都没有特殊含义。单引号括起来的都是普通字符，会原样输出</td>
</tr>
<tr>
<td>“ ”</td>
<td>双引号。在双引号中特殊符号都没有特殊含义，但是“$”，“&#96;”（esc键下面）和“\”是例外，拥有“调用变量的值”、“引用命令”和“转义符”的特殊含义。</td>
</tr>
<tr>
<td>· ·</td>
<td>反引号。反引号括起来的内容是系统命令，在Bash中会先执行它。和( ) 作 用 一 样 ， 不 过 推 荐 使 用 ()作用一样，不过推荐使用()作用一样，不过推荐使用()，因为反引号非常容易看错。</td>
</tr>
<tr>
<td>$()</td>
<td>和反引号作用一样，用来引用系统命令。(推荐使用)</td>
</tr>
<tr>
<td>()</td>
<td>用于一串命令执行时，()中的命令会在子Shell中运行</td>
</tr>
<tr>
<td>{}</td>
<td>用于一串命令执行时，{ }中的命令会在当前Shell中执行。也可以用于变量变形与替换。</td>
</tr>
<tr>
<td>[ ]</td>
<td>用于变量的测试。</td>
</tr>
<tr>
<td>#</td>
<td>在Shell脚本中，#开头的行代表注释。</td>
</tr>
<tr>
<td>$</td>
<td>用于调用变量的值，如需要调用变量name的值时，需要用$name的方式得到变量的值。</td>
</tr>
<tr>
<td>\</td>
<td>转义符，跟在\之后的特殊符号将失去特殊含义，变为普通字符。如$将输出“$”符号，而不当做是变量引用。</td>
</tr>
</tbody></table>
<hr>
<p><strong>单引号和双引号</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> name=<span class="built_in">sc</span></span><br><span class="line"><span class="comment">#定义变量name 的值是sc（就是最正直的人，超哥我了!）</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> <span class="string">&#x27;$name&#x27;</span></span><br><span class="line"><span class="variable">$name</span></span><br><span class="line"><span class="comment">#如果输出时使用单引号，则$name原封不动的输出</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$name</span>&quot;</span></span><br><span class="line"><span class="built_in">sc</span></span><br><span class="line"><span class="comment">#如果输出时使用双引号，则会输出变量name的值 sc</span></span><br><span class="line"></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> `date`</span><br><span class="line"><span class="number">2018</span>年<span class="number">10</span>月<span class="number">21</span>日星期一<span class="number">18</span>:<span class="number">16</span>:<span class="number">33</span> CST</span><br><span class="line"><span class="comment">#反引号括起来的命令会正常执行</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> <span class="string">&#x27;`date`&#x27;</span></span><br><span class="line">`date`</span><br><span class="line"><span class="comment">#但是如果反引号命令被单引号括起来，那么这个命令不会执行，―date`会被当成普通字符输出</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> <span class="string">&quot;`date&#x27;&quot;</span></span><br><span class="line"><span class="number">2018</span>年<span class="number">10</span>月<span class="number">21</span>日星期一<span class="number">18</span>:<span class="number">14</span>:<span class="number">21</span> CST</span><br><span class="line"><span class="comment">#如果是双引号括起来，那么这个命令又会正常执行</span></span><br><span class="line"><span class="number">123456789101112131415161718</span></span><br></pre></td></tr></table></figure>

<p><strong>反引号</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line"><span class="comment">#如果命令不用反引号包含，命令不会执行，而是直接输出</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> `ls`</span><br><span class="line">anaconda<span class="literal">-ks</span>.cfginstall.loginstall.log.syslog sh test testfile</span><br><span class="line"><span class="comment">#只有用反引号包括命令，这个命令才会执行</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> <span class="variable">$</span>(date)</span><br><span class="line"><span class="number">2018</span>年<span class="number">10</span>月<span class="number">21</span>日星期一<span class="number">18</span>:<span class="number">25</span>:<span class="number">09</span> CST</span><br><span class="line"><span class="comment">#使用$(命令)的方式也是可以的</span></span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>



<h4 id="2-变量的分类："><a href="#2-变量的分类：" class="headerlink" title="2. 变量的分类："></a>2. 变量的分类：</h4><ol>
<li><strong>用户自定义变量:</strong> 这种变量是最常见的变量，由用户自由定义变量名和变量的值。</li>
<li><strong>环境变量:</strong> 这种变量中主要保存的是和系统操作环境相关的数据，比如当前登录用户，用户的家目录，命令的提示符等。不是太好理解吧，那么大家还记得在Windows中，同一台电脑可以有多个用户登录，而且每个用户都可以定义自己的桌面样式和分辨率，这些其实就是Windows的操作环境，可以当做是Windows的环境变量来理解。环境变量的变量名可以自由定义，但是一般对系统起作用的环境变量的变量名是系统预先设定好的。</li>
<li><strong>位置参数变量:</strong> 这种变量主要是用来向脚本当中传递参数或数据的，变量名不能自定义，变量作用是固定的。</li>
<li><strong>预定义变量:</strong> 是Bash中已经定义好的变量，变量名不能自定义，变量作用也是固定的。</li>
</ol>
<table>
<thead>
<tr>
<th>变量分类</th>
<th>名称</th>
<th>作用</th>
<th>内容</th>
</tr>
</thead>
<tbody><tr>
<td>用户自定义变量</td>
<td>自定义</td>
<td>自定义</td>
<td>自定义</td>
</tr>
<tr>
<td>用户自定义环境变量</td>
<td>自定义</td>
<td>自定义</td>
<td>自定义</td>
</tr>
<tr>
<td>系统自带环境变量(&#x2F;etc&#x2F;profile)</td>
<td>确定</td>
<td>确定</td>
<td>自定义</td>
</tr>
<tr>
<td>位置参数变量</td>
<td>确定</td>
<td>自定义</td>
<td>自定义</td>
</tr>
<tr>
<td>预定义变量</td>
<td>确定</td>
<td>自定义</td>
<td>自定义</td>
</tr>
</tbody></table>
<h5 id="2-1-用户自定义变量："><a href="#2-1-用户自定义变量：" class="headerlink" title="2.1 用户自定义变量："></a>2.1 用户自定义变量：</h5><h6 id="2-1-1-变量定义"><a href="#2-1-1-变量定义" class="headerlink" title="2.1.1 变量定义"></a>2.1.1 变量定义</h6><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="number">2</span>name=<span class="string">&quot;shen chao&quot;</span></span><br><span class="line"><span class="literal">-bash</span>: <span class="number">2</span>name=shen chao: command not found</span><br><span class="line"><span class="comment">#变量名不能用数字开头</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> name = <span class="string">&quot;shenchao&quot;</span></span><br><span class="line"><span class="literal">-bash</span>: name: command not found</span><br><span class="line"><span class="comment">#等号左右两侧不能有空格</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> name=shen chao</span><br><span class="line"><span class="literal">-bash</span>: chao: command not found</span><br><span class="line"><span class="comment">#变量的值如果有空格，必须用引号包含</span></span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>

<h6 id="2-1-2-变量调用"><a href="#2-1-2-变量调用" class="headerlink" title="2.1.2 变量调用"></a>2.1.2 变量调用</h6><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> name=<span class="string">&quot;shen chao&quot;</span></span><br><span class="line"><span class="comment">#定义变量name</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> <span class="variable">$name</span> <span class="comment">#调用变量使用  $变量名</span></span><br><span class="line">shen chao</span><br><span class="line"><span class="comment">#输出变量name的值</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>

<h6 id="2-1-3-变量查看"><a href="#2-1-3-变量查看" class="headerlink" title="2.1.3 变量查看"></a>2.1.3 变量查看</h6><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">set</span> [选项]</span><br><span class="line">选项:</span><br><span class="line"><span class="literal">-u</span>:如果设定此选项，调用未声明变量时会报错（默认无任何提示）</span><br><span class="line"><span class="literal">-x</span>:如果设定此选项，在命令执行之前，会把命令先输出一次</span><br><span class="line">+&lt;参数&gt; :取消某个<span class="built_in">set</span>曾启动的参数。</span><br><span class="line"></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">set</span></span><br><span class="line">BASH=/bin/bash</span><br><span class="line">…省略部分输出…</span><br><span class="line">name=<span class="string">&#x27;shen chao&#x27;</span></span><br><span class="line"><span class="comment">#直接使用set 命令，会查询系统中所有的变量，包含用户自定义变量和环境变量</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">set</span> <span class="literal">-u</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> <span class="variable">$file</span></span><br><span class="line"><span class="literal">-bash</span>: file: unbound variable</span><br><span class="line"><span class="comment">#当设置了-u选项后，如果调用没有设定的变量会有报错。默认是没有任何输出的。</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">set</span> <span class="literal">-x</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line">+<span class="built_in">ls</span> <span class="literal">--color</span>=auto</span><br><span class="line">anaconda<span class="literal">-ks</span>.cfginstall.loginstall.log.syslog sh tdir testtestfile</span><br><span class="line"><span class="comment">#如果设定了-x选项，会在每个命令执行之前，先把命令输出一次</span></span><br><span class="line"></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">set</span> +x</span><br><span class="line"><span class="comment">#取消启动的x参数</span></span><br><span class="line"></span><br><span class="line"><span class="number">123456789101112131415161718192021222324</span></span><br></pre></td></tr></table></figure>

<h6 id="2-1-4-变量删除"><a href="#2-1-4-变量删除" class="headerlink" title="2.1.4 变量删除"></a>2.1.4 变量删除</h6><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> unset 变量名</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>



<h5 id="2-2-环境变量："><a href="#2-2-环境变量：" class="headerlink" title="2.2 环境变量："></a>2.2 环境变量：</h5><h6 id="2-2-1-环境变量设置"><a href="#2-2-1-环境变量设置" class="headerlink" title="2.2.1 环境变量设置"></a>2.2.1 环境变量设置</h6><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span>  export age=<span class="string">&quot;18&quot;</span></span><br><span class="line"><span class="comment">#使用export声明的变量即是环境变量</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<h6 id="2-2-2-环境变量查询和删除"><a href="#2-2-2-环境变量查询和删除" class="headerlink" title="2.2.2 环境变量查询和删除"></a>2.2.2 环境变量查询和删除</h6><p><strong>env命令和set命令的区别：</strong><br><strong>set命令可以查看所有变量，而env命令只能查看环境变量。</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> unset gender   <span class="comment">#删除环境变量gender</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> env | grep gender</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<h6 id="2-2-3-系统默认环境变量"><a href="#2-2-3-系统默认环境变量" class="headerlink" title="2.2.3 系统默认环境变量"></a>2.2.3 系统默认环境变量</h6><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> env</span><br><span class="line">HOSTNAME=localhost.localdomain      <span class="comment">#主机名</span></span><br><span class="line">SHELL=/bin/bash                     <span class="comment">#当前的shell</span></span><br><span class="line">TERM=linux                          <span class="comment">#终端环境</span></span><br><span class="line">HISTSIZE=<span class="number">1000</span>                       <span class="comment">#历史命令条数</span></span><br><span class="line">SSH_CLIENT=<span class="number">192.168</span>.<span class="number">4.1594824</span> <span class="number">22</span>     <span class="comment">#当前操作环境是用ssh连接的，这里记录客户端ip</span></span><br><span class="line">SSH_TTY=/dev/pts/<span class="number">1</span>                  <span class="comment">#ssh连接的终端时pts/1</span></span><br><span class="line">USER=root                           <span class="comment">#当前登录的用户</span></span><br><span class="line">..........更多参数可以使用<span class="built_in">set</span>和env命令查看.............</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>



<h5 id="2-3-位置参数变量："><a href="#2-3-位置参数变量：" class="headerlink" title="2.3 位置参数变量："></a>2.3 位置参数变量：</h5><table>
<thead>
<tr>
<th>位置参数变量</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>$n</td>
<td>n为数字，$0表示当前 Shell 脚本程序的名称，$1-9 代 表 第 一 到 第 九 个 参 数 , 十 以 上 的 参 数 需 要 用 大 括 号 包 含 ， 如 9代表第一到第九个参数,十以上的参数需要用大括号包含，如9代表第一到第九个参数,十以上的参数需要用大括号包含，如{10}</td>
</tr>
<tr>
<td>$*</td>
<td>这个变量代表命令行中所有的参数，$把所有的参数看成一个整体</td>
</tr>
<tr>
<td>$@</td>
<td>这个变量也代表命令行中所有的参数，不过$@把每个参数区分对待</td>
</tr>
<tr>
<td>$#</td>
<td>这个变量代表命令行中所有参数的个数</td>
</tr>
</tbody></table>
<p><strong>$1 是你给你写的shell脚本传的第一个参数，$2 是你给你写的shell脚本传的第二个参数…</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> <span class="type">sh</span>]<span class="variable">$</span> vim test.sh</span><br><span class="line"><span class="comment">#!/bin/sh</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;shell脚本本身的名字: <span class="variable">$0</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;传给shell的第一个参数: <span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;传给shell的第二个参数: <span class="variable">$2</span>&quot;</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>

<p>保存退出后，你在Test.sh所在的目录下输入 <code>bash Test.sh 1 2</code></p>
<p>结果输出：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shell脚本本身的名字: Test.sh</span><br><span class="line">传给shell的第一个参数: <span class="number">1</span></span><br><span class="line">传给shell的第二个参数: <span class="number">2</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

<p><strong>$*会把接收的所有参数当成一个整体对待，而$@则会区分对待接收到的所有参数。举个例子:</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> <span class="type">sh</span>]<span class="variable">$</span> vi parameter2.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span><span class="string">&quot;<span class="variable">$</span>*&quot;</span></span><br><span class="line"><span class="comment">#定义for循环，in后面有几个值，for会循环多少次，注意“$*”要用双引号括起来</span></span><br><span class="line"><span class="comment">#每次循环会把in后面的值赋予变量i</span></span><br><span class="line"><span class="comment">#Shell把$*中的所有参数看成是一个整体，所以这个for循环只会循环一次</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;The parameters is: <span class="variable">$i</span>&quot;</span></span><br><span class="line">		<span class="comment">#打印变量$i的值</span></span><br><span class="line">	done</span><br><span class="line">x=<span class="number">1</span></span><br><span class="line"><span class="comment">#定义变量x的值为1</span></span><br><span class="line"><span class="keyword">for</span> y <span class="keyword">in</span><span class="string">&quot;<span class="variable">$</span>@&quot;</span></span><br><span class="line"><span class="comment">#同样in后面的有几个值，for循环几次，每次都把值赋予变量y</span></span><br><span class="line"><span class="comment">#可是Shel1中把“$@”中的每个参数都看成是独立的，所以“$@”中有几个参数，就会循环几次</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;The parameter<span class="variable">$x</span> is: <span class="variable">$y</span>&quot;</span></span><br><span class="line">		<span class="comment">#输出变量y的值</span></span><br><span class="line">		x=<span class="variable">$</span>(( <span class="variable">$x</span> +<span class="number">1</span> ))</span><br><span class="line">		<span class="comment">#然变量x每次循环都加1，为了输出时看的更清楚</span></span><br><span class="line">	done</span><br><span class="line"><span class="number">123456789101112131415161718192021</span></span><br></pre></td></tr></table></figure>



<h5 id="2-4-预定义变量："><a href="#2-4-预定义变量：" class="headerlink" title="2.4 预定义变量："></a>2.4 预定义变量：</h5><table>
<thead>
<tr>
<th>预定义变量</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>$?</td>
<td>最后一次执行的命令的返回状态。如果这个变量的值为0，证明上一个命令正确执行;如果这个变量的值为非О(具体是哪个数，由命令自己来决定），则证明上一个命令执行不正确了。</td>
</tr>
<tr>
<td>$$</td>
<td>当前进程的进程号（PID)</td>
</tr>
<tr>
<td>$!</td>
<td>后台运行的最后一个进程的进程号(PID)</td>
</tr>
</tbody></table>
<p><strong>先来看看”$?”这个变量，举个例子说明</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> <span class="type">sh</span>]<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line">count.sh hello.sh parameter2.sh parameter.sh</span><br><span class="line"><span class="comment">#ls命令正确执行</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> <span class="type">sh</span>]<span class="variable">$</span> <span class="built_in">echo</span> <span class="variable">$</span>?</span><br><span class="line"><span class="comment">#预定义变量“$?”的值是0，证明上一个命令执行正确</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> <span class="type">sh</span>]<span class="variable">$</span> <span class="built_in">ls</span> install.log</span><br><span class="line"><span class="built_in">ls</span>:无法访问install.log:没有那个文件或目录</span><br><span class="line"><span class="comment">#当前目录中没有install.log文件，所以ls命令报错了</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> <span class="type">sh</span>]<span class="variable">$</span> <span class="built_in">echo</span> <span class="variable">$</span>?</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="comment">#变量“$?”返回一个非О的值，证明上一个命令没有正确执行</span></span><br><span class="line"><span class="comment">#至于错误的返回值到底是多少，是在编写ls命令时定义好的，如果碰到文件不存在就返回数值2</span></span><br><span class="line"><span class="number">123456789101112</span></span><br></pre></td></tr></table></figure>

<p><strong>再来说明下”$$”和”$!”这两个预定义变量</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> <span class="type">sh</span>]<span class="variable">$</span> vi variable.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The current process is <span class="variable">$</span><span class="variable">$</span>&quot;</span></span><br><span class="line"><span class="comment">#输出当前进程的PID.</span></span><br><span class="line"><span class="comment">#这个PID就是variable.sh这个脚本执行时，生成的进程的PID</span></span><br><span class="line">find /root <span class="literal">-name</span> hello.sh &amp;</span><br><span class="line"><span class="comment">#使用find命令在root目录下查找hello.sh文件</span></span><br><span class="line"><span class="comment">#符号&amp;的意思是把命令放入后台执行，工作管理我们在系统管理章节会详细介绍</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The last one Daemon process is <span class="variable">$</span>!&quot;</span></span><br><span class="line"><span class="comment">#输出这个后台执行命令的进程的PID，也就是输出find命令的PID号</span></span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>

<h5 id="3-只读变量："><a href="#3-只读变量：" class="headerlink" title="3. 只读变量："></a>3. 只读变量：</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> <span class="type">sh</span>]<span class="variable">$</span> vi readonly.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">a=<span class="number">10</span></span><br><span class="line"><span class="comment">#语法：readonly 变量名</span></span><br><span class="line">readonly a</span><br><span class="line">a=<span class="number">20</span>   <span class="comment">#会报错readonly variable</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>

<h5 id="4-接受键盘输入："><a href="#4-接受键盘输入：" class="headerlink" title="4. 接受键盘输入："></a>4. 接受键盘输入：</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> read [选项][变量名]</span><br><span class="line">选项:</span><br><span class="line">	<span class="literal">-a</span> 后跟一个变量，该变量会被认为是个数组，然后给其赋值，默认是以空格为分割符。</span><br><span class="line">	<span class="literal">-p</span>： “提示信息”：在等待read输入时，输出提示信息</span><br><span class="line">	<span class="literal">-t</span>： 秒数：read命令会一直等待用户输入，使用此选项可以指定等待时间</span><br><span class="line">	<span class="literal">-n</span>： 数字：read命令只接受指定的字符数，就会执行</span><br><span class="line">	<span class="literal">-s</span>： 隐藏输入的数据，适用于机密信息的输入</span><br><span class="line">    <span class="literal">-d</span>： 后面跟一个标志符，其实只有其后的第一个字符有用，作为结束的标志。</span><br><span class="line">    <span class="literal">-e</span>： 在输入的时候可以使用命令补全功能。</span><br><span class="line">变量名:</span><br><span class="line">变量名可以自定义，如果不指定变量名，会把输入保存入默认变量REPLY.</span><br><span class="line">如果只提供了一个变量名，则整个输入行赋予该变量.</span><br><span class="line">如果提供了一个以上的变量名，则输入行分为若干字，一个接一个地赋予各个变量，而命令行上的最后一个变量取得剩余的所有字</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>

<p><strong>写个例子来解释下read命令：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> <span class="type">sh</span>]<span class="variable">$</span> vi read.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">read <span class="literal">-t</span> <span class="number">30</span> <span class="literal">-p</span> <span class="string">&quot;Please input your name: &quot;</span> name</span><br><span class="line"><span class="comment">#提示“请输入姓名”并等待30 秒，把用户的输入保存入变量name 中</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Name is <span class="variable">$name</span>&quot;</span></span><br><span class="line"><span class="comment">#看看变量“$name”中是否保存了你的输入</span></span><br><span class="line"></span><br><span class="line">read <span class="literal">-s</span> <span class="literal">-t</span> <span class="number">30</span> <span class="literal">-p</span> <span class="string">&quot;Please enter your age: &quot;</span> age</span><br><span class="line"><span class="comment">#提示“请输入年龄”并等待30秒，把用户的输入保存入变量age中</span></span><br><span class="line"><span class="comment">#年龄是隐私，所以我们用“-s”选项隐藏输入</span></span><br><span class="line"><span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;\n&quot;</span></span><br><span class="line"><span class="comment">#调整输出格式，如果不输出换行，一会的年龄输出不会换行</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Age is <span class="variable">$age</span>&quot;</span></span><br><span class="line"></span><br><span class="line">read <span class="literal">-n</span> <span class="number">1</span> <span class="literal">-t</span> <span class="number">30</span> <span class="literal">-p</span> <span class="string">&quot;Please select your gender[M/F]:&quot;</span> gender</span><br><span class="line"><span class="comment">#提示“请选择性别”并等待30秒，把用户的输入保存入变量gender</span></span><br><span class="line"><span class="comment">#使用“-n1”选项只接收一个输入字符就会执行（都不用输入回车）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;\n&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Sex is <span class="variable">$gender</span>&quot;</span></span><br><span class="line"><span class="number">1234567891011121314151617181920</span></span><br></pre></td></tr></table></figure>



<hr>
<h3 id="四、shell-运算符"><a href="#四、shell-运算符" class="headerlink" title="四、shell 运算符"></a>四、shell <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%BF%90%E7%AE%97%E7%AC%A6&spm=1001.2101.3001.7020">运算符</a></h3><p>在shell中，运算符和其他编程脚本语言一样，常见的有算数运算符、关系运算符、逻辑运算符、字符串运算符、文件测试运算符等</p>
<h4 id="1-算数运算符"><a href="#1-算数运算符" class="headerlink" title="1. 算数运算符"></a>1. 算数运算符</h4><p>原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 <strong>awk 和 expr，expr</strong> 最常用。<br><strong>expr 是一款表达式计算工具，使用它能完成表达式的求值操作</strong>。<br>例如，两个数相加(注意使用的是反引号 &#96; 而不是单引号 ‘)：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi computer.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">val=`expr <span class="number">2</span> + <span class="number">2</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;两数之和为 : <span class="variable">$val</span>&quot;</span></span><br><span class="line"><span class="comment">#注意</span></span><br><span class="line"><span class="comment">#表达式和运算符之间要有空格，例如 2+2 是不对的，必须写成 2 + 2，这与我们熟悉的大多数编程语言不一样。</span></span><br><span class="line"><span class="comment">#完整的表达式要被 ` ` 包含，注意这个字符不是常用的单引号，在 Esc 键下边。</span></span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>

<p><strong>下表列出了常用的算术运算符，假定变量 a 为 10，变量 b 为 20</strong></p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li><p>|加法 |<code>expr $a + $b</code> 结果为 30。</p>
</li>
<li><p>|减法 |<code>expr $a - $b</code> 结果为 -10。<br>*| 乘法 |<code>expr $a \* $b</code> 结果为 200。<br>&#x2F; |除法 |<code>expr $b / $a</code> 结果为 2。<br>% |取余| <code>expr $b % $a</code> 结果为 0。<br>&#x3D; |赋值| a&#x3D;$b 将把变量 b 的值赋给 a。<br>&#x3D;&#x3D;| 相等。用于比较两个数字，相同则返回 true（真）。| [ $a &#x3D;&#x3D; $b ] 返回 false（假）。<br>!&#x3D; |不相等。用于比较两个数字，不相同则返回 true。 |[ $a !&#x3D; $b ] 返回 true。</p>
</li>
</ul>
<p>注意：条件表达式要放在方括号之间，并且要有空格，必须写成 [ $a &#x3D;&#x3D; $b ]。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi computers.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">a=<span class="number">10</span></span><br><span class="line">b=<span class="number">20</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27; &#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;a+b= &#x27;</span> `expr <span class="variable">$a</span> + <span class="variable">$b</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;a-b= &#x27;</span> `expr <span class="variable">$a</span> - <span class="variable">$b</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;a*b= &#x27;</span> `expr <span class="variable">$a</span> \* <span class="variable">$b</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;a/b= &#x27;</span> `expr <span class="variable">$a</span> / <span class="variable">$b</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;a%b= &#x27;</span> `expr <span class="variable">$a</span> % <span class="variable">$b</span>`</span><br><span class="line"></span><br><span class="line"><span class="comment">#判断是否相等</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> == <span class="variable">$b</span> ]</span><br><span class="line">then</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&#x27;a等于b&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&#x27;a不等于b&#x27;</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="number">12345678910111213141516171819</span></span><br></pre></td></tr></table></figure>

<h4 id="2-关系运算符"><a href="#2-关系运算符" class="headerlink" title="2. 关系运算符"></a>2. 关系运算符</h4><p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。<br><strong>下表列出了常用的关系运算符，假定变量 a 为 10，变量 b 为 20：</strong></p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>单词</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>-eq</td>
<td>equal</td>
<td>检测两个数是否相等，相等返回 true。</td>
<td>[ $a -eq $b ] 返回 false。</td>
</tr>
<tr>
<td>-ne</td>
<td>not equal</td>
<td>检测两个数是否相等，不相等返回 true。</td>
<td>[ $a -ne $b ] 返回 true。</td>
</tr>
<tr>
<td>-gt</td>
<td>great than</td>
<td>检测左边的数是否大于右边的，如果是，则返回 true。</td>
<td>[ $a -gt $b ] 返回 false。</td>
</tr>
<tr>
<td>-lt</td>
<td>less than</td>
<td>检测左边的数是否小于右边的，如果是，则返回 true。</td>
<td>[ $a -lt $b ] 返回 true。</td>
</tr>
<tr>
<td>-ge</td>
<td>great than or equal</td>
<td>检测左边的数是否大于等于右边的，如果是，则返回 true。</td>
<td>[ $a -ge $b ] 返回 false。</td>
</tr>
<tr>
<td>-le</td>
<td>less than or equal</td>
<td>检测左边的数是否小于等于右边的，如果是，则返回 true。</td>
<td>[ $a -le $b ] 返回 true。</td>
</tr>
</tbody></table>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> [ <span class="number">10</span> -<span class="type">gt</span> <span class="number">10</span> ] </span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> <span class="variable">$</span>? </span><br><span class="line"> <span class="number">1</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> [ <span class="number">10</span> -<span class="type">eq</span> <span class="number">10</span> ] </span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">echo</span> <span class="variable">$</span>? </span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>

<p><strong>案例：判断当前输入的用户是否存在。如果存在则提示“用户存在”否则提示“用户不存在”。</strong></p>
<p><strong>如果要在shell脚本使用linux命令，可以使用<code>$()</code>包裹命令</strong><br>例如：<strong>disk_size&#x3D;$(df -h | awk ‘NR&#x3D;&#x3D;2 {print $5}’)</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vim demo.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#接受用户的输入</span></span><br><span class="line">read <span class="literal">-p</span> <span class="string">&#x27;请输入需要查询的用户名:&#x27;</span> username</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取指定用户名在passwd文件中出现的次数</span></span><br><span class="line">count=<span class="variable">$</span>(<span class="built_in">cat</span> /etc/passwd | grep <span class="variable">$username</span> | wc <span class="literal">-l</span>)</span><br><span class="line"><span class="comment">#count=`cat /etc/passwd | grep $username | wc -l`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#判断出现的次数，如果次数=0则用户不存在，反之存在</span></span><br><span class="line"><span class="keyword">if</span> [  <span class="variable">$count</span> == <span class="number">0</span> ]</span><br><span class="line">then </span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&#x27;用户不存在&#x27;</span></span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&#x27;用户存在&#x27;</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">123456789101112131415161718</span></span><br></pre></td></tr></table></figure>



<h4 id="3-逻辑运算符"><a href="#3-逻辑运算符" class="headerlink" title="3. 逻辑运算符"></a>3. 逻辑运算符</h4><p><strong>下表列出了常用的布尔运算符，假定变量 a 为 10，变量 b 为 20：</strong></p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>!</td>
<td>非运算，表达式为 true 则返回 false，否则返回 true。</td>
<td>[ ! false ] 返回 true。</td>
</tr>
<tr>
<td>-o</td>
<td>或（或者）运算，有一个表达式为 true 则返回 true。</td>
<td>[ $a -lt 20 -o $b -gt 100 ] 返回 true。</td>
</tr>
<tr>
<td>-a</td>
<td>与（并且）运算，两个表达式都为 true 才返回 true。</td>
<td>[ $a -lt 20 -a $b -gt 100 ] 返回 false。</td>
</tr>
</tbody></table>
<p><strong>或运算：一个为真即为真，全部为假才是假<br>与运算：一个为假即为假，全部为真才是真</strong></p>
<h4 id="4-字符串运算符"><a href="#4-字符串运算符" class="headerlink" title="4. 字符串运算符"></a>4. 字符串运算符</h4><p><strong>下表列出了常用的字符串运算符，假定变量 a 为 “abc”，变量 b 为 “efg”：</strong></p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>&#x3D;</td>
<td>检测两个字符串是否相等，相等返回 true。</td>
<td>[ $a &#x3D; $b ] 返回 false。</td>
</tr>
<tr>
<td>!&#x3D;</td>
<td>检测两个字符串是否相等，不相等返回 true。</td>
<td>[ $a !&#x3D; $b ] 返回 true。</td>
</tr>
<tr>
<td>-z</td>
<td>检测字符串长度是否为0，为0返回 true。</td>
<td>[ -z $a ] 返回 false。</td>
</tr>
<tr>
<td>-n</td>
<td>检测字符串长度是否为0，不为0返回 true。</td>
<td>[ -n $a ] 返回 true。</td>
</tr>
<tr>
<td>str</td>
<td>检测字符串是否为空，不为空返回 true。</td>
<td>[ $a ] 返回 true。</td>
</tr>
</tbody></table>
<h4 id="5-文件测试运算符（重点）"><a href="#5-文件测试运算符（重点）" class="headerlink" title="5. 文件测试运算符（重点）"></a>5. 文件测试运算符（重点）</h4><p><strong>文件测试运算符用于检测 Unix&#x2F;Linux 文件的各种属性。</strong></p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>-b file</td>
<td>检测文件是否是块设备文件，如果是，则返回 true。</td>
<td>[ -b $file ] 返回 false。</td>
</tr>
<tr>
<td>-c file</td>
<td>检测文件是否是字符设备文件，如果是，则返回 true。</td>
<td>[ -c $file ] 返回 false。</td>
</tr>
<tr>
<td>-d file</td>
<td>检测文件是否是目录，如果是，则返回 true。</td>
<td>[ -d $file ] 返回 false。</td>
</tr>
<tr>
<td>-f file</td>
<td>检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td>
<td>[ -f $file ] 返回 true。</td>
</tr>
<tr>
<td>-g file</td>
<td>检测文件是否设置了 SGID 位，如果是，则返回 true。</td>
<td>[ -g $file ] 返回 false。</td>
</tr>
<tr>
<td>-k file</td>
<td>检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td>
<td>[ -k $file ] 返回 false。</td>
</tr>
<tr>
<td>-p file</td>
<td>检测文件是否是有名管道，如果是，则返回 true。</td>
<td>[ -p $file ] 返回 false。</td>
</tr>
<tr>
<td>-u file</td>
<td>检测文件是否设置了 SUID 位，如果是，则返回 true。</td>
<td>[ -u $file ] 返回 false。</td>
</tr>
<tr>
<td>-r file</td>
<td>检测文件是否可读，如果是，则返回 true。</td>
<td>[ -r $file ] 返回 true。</td>
</tr>
<tr>
<td>-w file</td>
<td>检测文件是否可写，如果是，则返回 true。</td>
<td>[ -w $file ] 返回 true。</td>
</tr>
<tr>
<td>-x file</td>
<td>检测文件是否可执行，如果是，则返回 true。</td>
<td>[ -x $file ] 返回 true。</td>
</tr>
<tr>
<td>-s file</td>
<td>检测文件是否为空（文件大小是否大于0），不为空返回 true。</td>
<td>[ -s $file ] 返回 true。</td>
</tr>
<tr>
<td>-e file</td>
<td>检测文件（包括目录）是否存在，如果是，则返回 true。</td>
<td>[ -e $file ] 返回 true。</td>
</tr>
</tbody></table>
<p><strong>注意：权限几个判断，如果只有一个部分符合，则认为是有权限的。</strong></p>
<hr>
<h3 id="五、流程控制"><a href="#五、流程控制" class="headerlink" title="五、流程控制"></a>五、流程控制</h3><h4 id="1-if条件判断"><a href="#1-if条件判断" class="headerlink" title="1. if条件判断"></a>1. if条件判断</h4><h5 id="1-1-单分支if条件"><a href="#1-1-单分支if条件" class="headerlink" title="1.1 单分支if条件"></a>1.1 单分支if条件</h5><p><strong>语法：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ 条件判断式 ]</span><br><span class="line">	then</span><br><span class="line">		程序</span><br><span class="line">fi</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

<p><strong>案例：统计根分区使用率</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/if1.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#统计根分区使用率</span></span><br><span class="line">rate=<span class="variable">$</span>(df <span class="literal">-h</span> | grep <span class="string">&quot;/dev/sda2&quot;</span> | awk <span class="string">&#x27;&#123;print $5&#125;’| cut -d &quot;%&quot;-f1)</span></span><br><span class="line"><span class="string">#把根分区使用率作为变量值赋予变量rate</span></span><br><span class="line"><span class="string">if [ $rate -ge 80 ]</span></span><br><span class="line"><span class="string">#判断rate的值如果大于等于80，则执行then程序</span></span><br><span class="line"><span class="string">	then</span></span><br><span class="line"><span class="string">		echo &quot;Warning!/dev/sda3 is fu11!!&quot;</span></span><br><span class="line"><span class="string">	#打印警告信息。在实际工作中，也可以向管理员发送邮件。</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string">123456789101112</span></span><br></pre></td></tr></table></figure>

<p><strong>案例：创建目录</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/add_dir.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#创建目录，判断是否存在，存在就结束，反之创建</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;当前脚本名称为<span class="variable">$0</span>&quot;</span></span><br><span class="line"><span class="built_in">DIR</span>=<span class="string">&quot;/media/cdrom&quot;</span></span><br><span class="line"><span class="keyword">if</span> [ ! -<span class="type">e</span> <span class="variable">$DIR</span> ]</span><br><span class="line">then</span><br><span class="line">	mkdir <span class="literal">-p</span> <span class="variable">$DIR</span></span><br><span class="line">fi</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$DIR</span> 创建成功&quot;</span></span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>



<h5 id="1-2-双分支if条件语句"><a href="#1-2-双分支if条件语句" class="headerlink" title="1.2 双分支if条件语句"></a>1.2 双分支if条件语句</h5><p><strong>语法：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ 条件判断式 ]</span><br><span class="line">	then</span><br><span class="line">		条件成立时，执行的程序</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		条件不成立时，执行的另一个程序</span><br><span class="line">fi</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>

<p><strong>案例1：备份mysql数据库</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/bakmysql.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#备份mysql数据库。</span></span><br><span class="line"></span><br><span class="line">ntpdate asia.pool.ntp.org &amp;&gt;/dev/null</span><br><span class="line"><span class="comment">#同步系统时间</span></span><br><span class="line">date=<span class="variable">$</span>(date +%y%m%d)</span><br><span class="line"><span class="comment">#把当前系统时间按照“年月日”格式赋子变量date</span></span><br><span class="line">size=<span class="variable">$</span>(du <span class="literal">-sh</span>/var/lib/mysql)</span><br><span class="line"><span class="comment">#统计mysql数据库的大小，并把大小赋予size变量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -<span class="type">d</span> /<span class="type">tmp</span>/<span class="type">dbbak</span> ]</span><br><span class="line"><span class="comment">#判断备份目录是否存在，是否为目录</span></span><br><span class="line">	then</span><br><span class="line">	<span class="comment">#如果判断为真，执行以下脚本</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;Date : <span class="variable">$date</span>!&quot;</span> &gt; /tmp/dbbak/dbinfo.txt</span><br><span class="line">	<span class="comment">#把当前日期写入临时文件</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;Data size : <span class="variable">$size</span>&quot;</span> &gt;&gt; /tmp/dbbak/dbinfo.txt</span><br><span class="line">	<span class="comment">#把数据库大小写入临时文件</span></span><br><span class="line">	<span class="built_in">cd</span>/tmp/dbbak</span><br><span class="line">	</span><br><span class="line">	<span class="comment">#进入备份目录</span></span><br><span class="line">	tar <span class="literal">-zcf</span> mysql<span class="literal">-lib-</span><span class="variable">$date</span>.tar.gz /var/lib/mysql dbinfo.txt &amp;&gt; /dev/null</span><br><span class="line">	<span class="comment">#打包压缩数据库与临时文件，把所有输出丢入垃圾箱（不想看到任何输出）</span></span><br><span class="line">	<span class="built_in">rm</span> <span class="literal">-rf</span> /tmp/dbbak/dbinfo.txt</span><br><span class="line">	<span class="comment">#删除临时文件</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	mkdir /tmp/dbbak</span><br><span class="line">	<span class="comment">#如果判断为假，则建立备份目录</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;Date : <span class="variable">$date</span>!&quot;</span> &gt; /tmp/dbbak/dbinfo.txt</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;Data size : <span class="variable">$size</span>&quot;</span> &gt;&gt; /tmp/dbbak/dbinfo.txt</span><br><span class="line">	<span class="comment">#把日期和数据库大小保存如临时文件</span></span><br><span class="line">	<span class="built_in">cd</span> /tmp/dbbak</span><br><span class="line">	tar <span class="literal">-zcf</span> mysql<span class="literal">-lib-</span><span class="variable">$date</span>.tar. gz dbinfo.txt /var/lib/mysql &amp;&gt; /dev/null</span><br><span class="line">	<span class="comment">#压缩备份数据库与临时文件</span></span><br><span class="line">	<span class="built_in">rm</span> <span class="literal">-rf</span>/tmp/dbbak/dbinfo.txt</span><br><span class="line">	<span class="comment">#删除临时文件</span></span><br><span class="line">fi</span><br><span class="line"><span class="number">1234567891011121314151617181920212223242526272829303132333435363738</span></span><br></pre></td></tr></table></figure>

<p><strong>案例2：判断apache是否启动，如果没有启动则自动启动</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/autostart.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#判断apache是否启动，如果没有启动则自动启动</span></span><br><span class="line"></span><br><span class="line">port=<span class="variable">$</span>(nmap <span class="literal">-sT</span> <span class="number">192.168</span>.<span class="number">4.210</span> | grep tcp | grep http | awk <span class="string">&#x27;&#123;print $2&#125;’)</span></span><br><span class="line"><span class="string">#使用nmap命令扫描服务器，并截取 apache服务的状态，赋予变量port</span></span><br><span class="line"><span class="string">#只要状态是open，就证明正常启动</span></span><br><span class="line"><span class="string">if [ &quot;$port&quot; == &quot;open&quot;]</span></span><br><span class="line"><span class="string">#如果变量port的值是“open”</span></span><br><span class="line"><span class="string">	then</span></span><br><span class="line"><span class="string">	echo &quot;$(date) httpd is ok!” &gt;&gt; /tmp/autostart-acc.log</span></span><br><span class="line"><span class="string">	#则证明apache 正常启动，在正常日志中写入一句话即可</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">	/etc/rc.d/init.d/httpd start &amp;&gt;/dev/null</span></span><br><span class="line"><span class="string">	#否则证明apache没有启动，自动启动apache</span></span><br><span class="line"><span class="string">	echo &quot;$(date) restart httpd !!&quot; &gt;&gt; /tmp/autostart-err.log</span></span><br><span class="line"><span class="string">	#并在错误日志中记录自动启动apche 的时间</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string">123456789101112131415161718</span></span><br></pre></td></tr></table></figure>

<p><strong>nmap端口扫描命令，格式如下：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> nmap <span class="literal">-sT</span> 域名或IP</span><br><span class="line">选项:</span><br><span class="line"><span class="literal">-s</span>      扫描</span><br><span class="line"><span class="literal">-T</span>      扫描所有开启的TCP端口</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#知道了nmap命令的用法，我们在脚本中使用的命令就是为了截取http的状态，只要状态是“or.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#就证明apache启动正常，否则证明apache启动错误。来看看脚本中命令的结果:</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> nmap <span class="literal">-sT</span> <span class="number">192.168</span>.<span class="number">4.210</span> | grep tcp | grep http | awk <span class="string">&#x27; fprint $2&#125;’</span></span><br><span class="line"><span class="string">#扫描指定计算机，提取包含tcp 的行，在提取包含httpd 的行，截取第二列open</span></span><br><span class="line"><span class="string">#把截取的值赋予变量port</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">12345678910111213</span></span><br></pre></td></tr></table></figure>



<h5 id="1-3-多分支if条件语句"><a href="#1-3-多分支if条件语句" class="headerlink" title="1.3 多分支if条件语句"></a>1.3 多分支if条件语句</h5><p><strong>语法：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ 条件判断式<span class="number">1</span> ]</span><br><span class="line">	then</span><br><span class="line">		当条件判断式<span class="number">1</span>成立时，执行程序<span class="number">1</span></span><br><span class="line">elif [ 条件判断式<span class="number">2</span> ]</span><br><span class="line">	then</span><br><span class="line">		当条件判断式<span class="number">2</span>成立时，执行程序<span class="number">2</span></span><br><span class="line">…省略更多条件…</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	当所有条件都不成立时，最后执行此程序</span><br><span class="line">fi</span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>

<p><strong>案例：判断用户输入的是什么文件</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/<span class="keyword">if</span><span class="literal">-elif</span>.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#判断用户输入的是什么文件</span></span><br><span class="line"></span><br><span class="line">read <span class="literal">-p</span> <span class="string">&quot;Please input a filename: &quot;</span> file</span><br><span class="line"><span class="comment">#接收键盘的输入，并赋予变量file</span></span><br><span class="line"><span class="keyword">if</span> [ -<span class="type">z</span> <span class="string">&quot;<span class="variable">$file</span>” ]</span></span><br><span class="line"><span class="string">#判断file变量是否为空</span></span><br><span class="line"><span class="string">	then</span></span><br><span class="line"><span class="string">		echo &quot;</span><span class="type">Error</span>, <span class="type">please</span> <span class="type">input</span> <span class="type">a</span> <span class="type">filename</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">		#如果为空，执行程序1，也就是输出报错信息</span></span><br><span class="line"><span class="string">		exit 1</span></span><br><span class="line"><span class="string">		#退出程序，并返回值为Ⅰ(把返回值赋予变量<span class="variable">$P</span>）</span></span><br><span class="line"><span class="string">elif [ ! -e &quot;</span><span class="variable">$file</span>” ]</span><br><span class="line">		<span class="comment">#判断file的值是否存在</span></span><br><span class="line">		then</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;Your input is not a file!&quot;</span></span><br><span class="line">		<span class="comment">#如1果不存在，则执行程序2</span></span><br><span class="line">		<span class="keyword">exit</span> <span class="number">2</span></span><br><span class="line">		<span class="comment">#退出程序，把并定义返回值为2</span></span><br><span class="line">elif [ -<span class="type">f</span> <span class="string">&quot;<span class="variable">$file</span>” ]</span></span><br><span class="line"><span class="string">		#判断file的值是否为普通文件</span></span><br><span class="line"><span class="string">		then</span></span><br><span class="line"><span class="string">		echo &quot;</span><span class="variable">$file</span> <span class="type">is</span> <span class="type">a</span> <span class="type">regulare</span> <span class="type">file</span>!”</span><br><span class="line">		<span class="comment">#如果是普通文件，则执行程序3</span></span><br><span class="line"><span class="type">elif</span> [ -<span class="type">d</span> <span class="string">&quot;<span class="variable">$file</span>” ]</span></span><br><span class="line"><span class="string">		#到断file的值是否为目录文件</span></span><br><span class="line"><span class="string">		then</span></span><br><span class="line"><span class="string">		echo &quot;</span><span class="variable">$file</span> <span class="type">is</span> <span class="type">a</span> <span class="type">directory</span>!<span class="string">&quot;</span></span><br><span class="line"><span class="string">		#如果是目录文件，网执行程序4</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">	echo &quot;</span><span class="variable">$file</span> <span class="type">is</span> <span class="type">an</span> <span class="type">other</span> <span class="type">file</span>!”</span><br><span class="line">	<span class="comment">#如果以上判断都不是，则执行程序5</span></span><br><span class="line"><span class="type">fi</span></span><br><span class="line"><span class="number">12345678910111213141516171819202122232425262728293031323334</span></span><br></pre></td></tr></table></figure>



<h4 id="2-多分支case条件语句"><a href="#2-多分支case条件语句" class="headerlink" title="2. 多分支case条件语句"></a>2. 多分支case条件语句</h4><p>case语句和if…elif…else语句一样都是多分支条件语句,不过和if多分支条件语句不同的是，<strong>case语句只能判断一种条件关系</strong>，而if语句可以判断多种条件关系。</p>
<p><strong>case语句语法如下:</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">case <span class="variable">$</span>变量名 <span class="keyword">in</span></span><br><span class="line">	<span class="string">&quot;值1&quot;</span>)</span><br><span class="line">	如果变量的值等于值<span class="number">1</span>，则执行程序<span class="number">1</span></span><br><span class="line">	;;</span><br><span class="line">	<span class="string">&quot;值2&quot;</span>)</span><br><span class="line">	如果变量的值等于值<span class="number">2</span>，则执行程序<span class="number">2</span></span><br><span class="line">	::</span><br><span class="line">	…省略其他分支…</span><br><span class="line">	*)</span><br><span class="line">	如果变量的值都不是以上的值，则执行此程序</span><br><span class="line">	;;</span><br><span class="line">esac</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>

<p>这个语句需要注意以下内容:</p>
<ul>
<li>case语句，会取出变量中的值，然后与语句体中的值逐一比较。如果数值符合，则执行对应的程序，如果数值不符，则依次比较下一个值。如果所有的值都不符合，则执行 “*)” (*代表所有其他值）中的程序。</li>
<li>case语句以“case”开头，以“esac”结尾。</li>
</ul>
<p>每一个分支程序之后要通过“;;”双分号结尾，代表该程序段结束(千万不要忘记，每次写case语句，都不要忘记双分号）。</p>
<p><strong>案例：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/<span class="keyword">if</span><span class="literal">-case</span>.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">read <span class="literal">-p</span> <span class="string">&quot;请输入一个字符，并按Enter确认：&quot;</span> KEY</span><br><span class="line">case <span class="string">&quot;<span class="variable">$KEY</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">	[<span class="type">a</span>-<span class="type">z</span>]|[<span class="type">A</span>-<span class="type">Z</span>])</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;您输入的是字母&quot;</span></span><br><span class="line">	;;</span><br><span class="line">	</span><br><span class="line">	[<span class="number">0</span>-<span class="number">9</span>])</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;您输入的是数字&quot;</span></span><br><span class="line">	;;</span><br><span class="line">	</span><br><span class="line">	*)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;您输入的是其他字符&quot;</span></span><br><span class="line">	;;</span><br><span class="line">esac</span><br><span class="line"><span class="number">12345678910111213141516</span></span><br></pre></td></tr></table></figure>



<h4 id="3-for循环"><a href="#3-for循环" class="headerlink" title="3. for循环"></a>3. for循环</h4><p>for循环是固定循环，也就是在循环时已经知道需要进行几次的循环，有时也把for循环称为计数循环。for的语法有如下两种:</p>
<p><strong>语法一:</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> 值<span class="number">1</span> 值<span class="number">2</span> 值<span class="number">3</span> …(可以是一个文件等)</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		程序</span><br><span class="line">	done</span><br><span class="line">	</span><br><span class="line">	这种语法中<span class="keyword">for</span>循环的次数，取决于<span class="keyword">in</span>后面值的个数（空格分隔），有几个值就循环几次，并且每次循环都把值赋予变量。</span><br><span class="line">	也就是说，假设<span class="keyword">in</span>后面有三个值，<span class="keyword">for</span>会循环三次，第一次循环会把值<span class="number">1</span>赋予变量，第二次循环会把值<span class="number">2</span>赋予变量，以此类推。</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>

<p><strong>语法二:</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (( 初始值;循环控制条件;变量变化 ))</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		程序</span><br><span class="line">	done</span><br><span class="line">	</span><br><span class="line">语法二中需要注意:</span><br><span class="line">初始值:在循环开始时，需要给某个变量赋予初始值，如i=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">循环控制条件:用于指定变量循环的次数，如i&lt;=<span class="number">100</span>，则只要i的值小于等于<span class="number">100</span>，循环就会继续;</span><br><span class="line"></span><br><span class="line">变量变化:每次循环之后，变量该如何变化，如i=i+<span class="number">1</span>。代表每次循环之后，变量i的值都加<span class="number">1</span>。</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure>

<p><strong>语法一举例：打印时间</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/for.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#打印时间</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> time <span class="keyword">in</span> morning noon afternoon evening</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;This time is <span class="variable">$time</span>!&quot;</span></span><br><span class="line">	done</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>

<p><strong>语法一举例：批量解压缩脚本</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/auto<span class="literal">-tar</span>. sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#批量解压缩脚本</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span>/lamp</span><br><span class="line"><span class="comment">#进入压缩包目录</span></span><br><span class="line"><span class="built_in">ls</span> *.tar.gz &gt; ls.log</span><br><span class="line"><span class="comment">#把所有.tar.gz结尾的文件的文件覆盖到ls.log 临时文件中</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$</span>(<span class="built_in">cat</span> ls.log) `</span><br><span class="line"><span class="comment">#或者这样写for i in `cat ls.log`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#读取ls.log文件的内容，文件中有多少个值，就会循环多少次，每次循环把文件名赋予变量i</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		tar <span class="literal">-zxf</span> <span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">		<span class="comment">#加压缩，并把所有输出都丢弃</span></span><br><span class="line">	done</span><br><span class="line"><span class="built_in">rm</span> <span class="literal">-rf</span> /lamp/ls.log</span><br><span class="line"><span class="comment">#删除临时文件ls.log</span></span><br><span class="line"><span class="number">123456789101112131415161718</span></span><br></pre></td></tr></table></figure>

<p><strong>语法二举例：从1加到100</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/add. sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#从1加到100</span></span><br><span class="line"></span><br><span class="line">s=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> (( i=<span class="number">1</span>;i&lt;=<span class="number">100</span>;i=i+<span class="number">1</span> ))</span><br><span class="line"><span class="comment">#定义循环100 次</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	s=<span class="variable">$</span>(( <span class="variable">$s</span>+<span class="variable">$i</span> ))</span><br><span class="line">	<span class="comment">#每次循环给变量s赋值</span></span><br><span class="line">	done</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The sum of 1+2+...+100 is : <span class="variable">$s</span>&quot;</span></span><br><span class="line"><span class="comment">#输出1加到100的和</span></span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>

<p><strong>语法二举例：批量添加指定数量的用户</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi useradd.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#批量添加指定数量的用户</span></span><br><span class="line"></span><br><span class="line">read <span class="literal">-p</span> <span class="string">&quot;Please input user name: &quot;</span> <span class="literal">-t</span> <span class="number">30</span> name</span><br><span class="line"><span class="comment">#让用户输入用户名，把输入保存入变量name</span></span><br><span class="line"></span><br><span class="line">read <span class="literal">-p</span> <span class="string">&quot;Please input the number of users: &quot;</span> <span class="literal">-t</span> <span class="number">30</span> num</span><br><span class="line"><span class="comment">#让用户输入添加用户的数量，把输入保存入变量num</span></span><br><span class="line"></span><br><span class="line">read <span class="literal">-p</span> <span class="string">&quot;Please input the password of users: &quot;</span> <span class="literal">-t</span> <span class="number">30</span> pass</span><br><span class="line"><span class="comment">#让用户输入初始密码，把输入保存如变量pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -<span class="type">z</span> <span class="string">&quot;<span class="variable">$name</span>&quot;</span> -<span class="type">a</span> ! -<span class="type">z</span> <span class="string">&quot;<span class="variable">$num</span>&quot;</span>-<span class="type">a</span> ! -<span class="type">z</span> <span class="string">&quot;<span class="variable">$pass</span>&quot;</span>]</span><br><span class="line"><span class="comment">#判断三个变量不为空</span></span><br><span class="line">then</span><br><span class="line">y=<span class="variable">$</span>(<span class="built_in">echo</span> <span class="variable">$num</span> | sed <span class="string">&#x27;s/[0-9]//g&#x27;</span>)</span><br><span class="line"><span class="comment">#定义变量的值为后续命令的结果</span></span><br><span class="line"><span class="comment">#后续命令作用是，把变量num 的值替换为空。如果能替换为空，证明num 的值为数字</span></span><br><span class="line"><span class="comment">#如果不能替换为空，证明num的值为非数字。我们使用这种方法判断变量num 的值为数字</span></span><br><span class="line">	<span class="keyword">if</span> [ -<span class="type">z</span> <span class="string">&quot;<span class="variable">$y</span>&quot;</span>]</span><br><span class="line">	<span class="comment">#如果变量y的值为空，证明num变量是数字</span></span><br><span class="line">		then</span><br><span class="line">		<span class="keyword">for</span> (( i=<span class="number">1</span> ; i&lt;=<span class="variable">$num</span>; i=i+<span class="number">1</span> ))</span><br><span class="line">		<span class="comment">#循环num变量指定的次数</span></span><br><span class="line">			<span class="keyword">do</span></span><br><span class="line">			/usr/sbin/useradd <span class="variable">$name</span><span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">			<span class="comment">#添加用户，用户名为变量name 的值加变量i的数字</span></span><br><span class="line">			<span class="built_in">echo</span> <span class="variable">$pass</span> | /usr/bin/passwd <span class="literal">--stdin</span> <span class="variable">$name</span><span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">			<span class="comment">#给用户设定初始密码为变量pass 的值</span></span><br><span class="line">			done</span><br><span class="line">	fi</span><br><span class="line">fi</span><br><span class="line"><span class="number">123456789101112131415161718192021222324252627282930313233</span></span><br></pre></td></tr></table></figure>

<p><strong>语法二举例：批量删除用户</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/userdel.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#批量删除用户</span></span><br><span class="line"></span><br><span class="line">user=<span class="variable">$</span>(<span class="built_in">cat</span> /etc/passwd | grep <span class="string">&quot; /bin/bash&quot;</span>|grep <span class="literal">-v</span> <span class="string">&quot;root&quot;</span>Icut <span class="literal">-d</span> <span class="string">&quot;:&quot;</span> <span class="operator">-f</span> <span class="number">1</span>)</span><br><span class="line"><span class="comment">#读取用户信息文件，提取可以登录用户，取消root用户，截取第一列用户名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$user</span></span><br><span class="line"><span class="comment">#循环，有多少个普通用户，循环多少次</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		userdel <span class="literal">-r</span> <span class="variable">$i</span></span><br><span class="line">		<span class="comment">#每次循环，删除指定普通用户</span></span><br><span class="line">	done</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>



<h4 id="4-while循环"><a href="#4-while循环" class="headerlink" title="4. while循环"></a>4. while循环</h4><p>对while循环来讲，只要条件判断式成立，循环就会一直继续，直到条件判断式不成立，循环才会停止。</p>
<p><strong>语法：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [ 条件判断式 ]</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		程序</span><br><span class="line">	done</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

<p><strong>案例：1加到100</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/addnum.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#从1加到100</span></span><br><span class="line"></span><br><span class="line">i=<span class="number">1</span></span><br><span class="line">s=<span class="number">0</span></span><br><span class="line"><span class="comment">#给变量i和变量s赋值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -<span class="type">le</span> <span class="number">100</span> ]</span><br><span class="line"><span class="comment">#如果变量i的值小于等于100，则执行循环</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		s=<span class="variable">$</span>(( <span class="variable">$s</span>+<span class="variable">$i</span> ))</span><br><span class="line">		i=<span class="variable">$</span>(( <span class="variable">$i</span>+<span class="number">1</span> ))</span><br><span class="line">	done</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The sum is: <span class="variable">$s</span>&quot;</span></span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>

<p><strong>案例：输入的数值进行比较判断</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/addnum.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">PRICE=<span class="variable">$</span>(expr <span class="variable">$RANDOM</span> % <span class="number">1000</span>)</span><br><span class="line">TIMES=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;商品的价格为0-999之间，猜猜看是多少？&quot;</span></span><br><span class="line"><span class="keyword">while</span> true</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  read <span class="literal">-p</span> <span class="string">&quot;请输入您猜的价格：&quot;</span> INT</span><br><span class="line">let TIMES++</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> [ <span class="variable">$INT</span> -<span class="type">eq</span> <span class="variable">$PRICE</span> ] ; then</span><br><span class="line">	  <span class="built_in">echo</span> <span class="string">&quot;恭喜您猜对了，实际价格是 <span class="variable">$PRICE</span>&quot;</span></span><br><span class="line">	  <span class="built_in">echo</span> <span class="string">&quot;您总共猜了 <span class="variable">$TIMES</span> 次&quot;</span></span><br><span class="line">	<span class="keyword">exit</span> <span class="number">0</span></span><br><span class="line">	elif [ <span class="variable">$INT</span> -<span class="type">gt</span> <span class="variable">$PRICE</span> ] ; then</span><br><span class="line">	  <span class="built_in">echo</span> <span class="string">&quot;太高了&quot;</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	  <span class="built_in">echo</span> <span class="string">&quot;太低了&quot;</span></span><br><span class="line">	fi</span><br><span class="line">done</span><br><span class="line"><span class="number">123456789101112131415161718192021</span></span><br></pre></td></tr></table></figure>



<h4 id="5-until循环"><a href="#5-until循环" class="headerlink" title="5. until循环"></a>5. until循环</h4><p>和while循环相反，until循环时只要条件判断式不成立则进行循环，并执行循环程序。一旦循环条件成立，则终止循环。</p>
<p><strong>语法:</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">until</span> [ 条件判断式 ]</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		程序</span><br><span class="line">	done</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

<p><strong>案例一：1加到100</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/until.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#从1加到100</span></span><br><span class="line"></span><br><span class="line">i=<span class="number">1</span></span><br><span class="line">s=<span class="number">0</span></span><br><span class="line"><span class="comment">#t给变量i和变量s赋值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">until</span> [ <span class="variable">$i</span> -<span class="type">gt</span> <span class="number">100</span> ]</span><br><span class="line"><span class="comment">#循环直到变量i的值大于100，就停止循环</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		s=<span class="variable">$</span>(( <span class="variable">$s</span>+<span class="variable">$i</span> ))</span><br><span class="line">		i=<span class="variable">$</span>(( <span class="variable">$i</span>+<span class="number">1</span> ))</span><br><span class="line">	done</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The sum is: <span class="variable">$s</span>&quot;</span></span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>



<h4 id="6-函数"><a href="#6-函数" class="headerlink" title="6. 函数"></a>6. 函数</h4><p><strong>语法：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名 <span class="params">()</span></span> &#123;</span><br><span class="line">	程序</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

<p><strong>案例：接收用户输入的数字，然后从1加到这个数字</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/function.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#接收用户输入的数字，然后从1加到这个数字</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span> <span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">#定义函数sum</span></span><br><span class="line">	s=<span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> (( i=<span class="number">0</span>; i&lt;=<span class="variable">$num</span>;i=i+<span class="number">1</span> ))</span><br><span class="line">		<span class="comment">#循环直到i大于$1为止。$1是函数sum 的第一个参数</span></span><br><span class="line">		<span class="comment">#在函数中也可以使用位置参数变量，不过这里的$1指的是函数的第一个参数</span></span><br><span class="line">		<span class="keyword">do</span></span><br><span class="line">			s=<span class="variable">$</span>(( <span class="variable">$i</span>+<span class="variable">$s</span> ))</span><br><span class="line">		done</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;The sum of 1+2+3...+<span class="variable">$1</span> is :<span class="variable">$s</span>&quot;</span></span><br><span class="line">	<span class="comment">#输出1加到$1的和</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">read <span class="literal">-p</span> <span class="string">&quot;Please input a number: &quot;</span> <span class="literal">-t</span> <span class="number">30</span> num</span><br><span class="line"><span class="comment">#接收用户输入的数字，并把值赋予变量num</span></span><br><span class="line">y=<span class="variable">$</span>(<span class="built_in">echo</span> <span class="variable">$num</span> | sed <span class="string">&#x27;s/[0-9]//g&#x27;</span>)</span><br><span class="line"><span class="comment">#把变量num的值替换为空，并赋予变量y</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -<span class="type">z</span> <span class="string">&quot;<span class="variable">$y</span>&quot;</span>]</span><br><span class="line"><span class="comment">#判断变量y是否为空，以确定变量num中是否为数字</span></span><br><span class="line">	then</span><br><span class="line">		sum <span class="variable">$num</span></span><br><span class="line">		<span class="comment">#调用sum函数，并把变量num的值作为第一个参数传递给sum函数</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;Error!! Please input a number!&quot;</span></span><br><span class="line">		<span class="comment">#如果变量num 的值不是数字，则输出报错信息</span></span><br><span class="line">fi</span><br><span class="line"><span class="number">12345678910111213141516171819202122232425262728293031</span></span><br></pre></td></tr></table></figure>



<h4 id="7-特殊流程控制语句"><a href="#7-特殊流程控制语句" class="headerlink" title="7. 特殊流程控制语句"></a>7. 特殊流程控制语句</h4><h5 id="7-1-exit语句"><a href="#7-1-exit语句" class="headerlink" title="7.1 exit语句"></a>7.1 exit语句</h5><p>系统是有exit命令的，用于退出当前用户的登录状态。可是在Shell脚本中，exit语句是用来退出当前脚本的。也就是说，<strong>在Shell脚本中，只要碰到了exit语句，后续的程序就不再执行，而直接退出脚本</strong>。</p>
<p><strong>exit的语法如下:</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">exit</span> [返回值]</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>



<p>如果<strong>exit命令之后定义了返回值，那么这个脚本执行之后的返回值就是我们自己定义的返回值。可以通过查询$?这个变量，来查看返回值</strong>。如果exit之后没有定义返回值，脚本执行之后的返回值是执行exit 语句之前，最后执行的一条命令的返回值。写一个exit 的例子:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/exit.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#演示exit的作用</span></span><br><span class="line"></span><br><span class="line">read <span class="literal">-p</span> <span class="string">&quot;Please input a number: &quot;</span> <span class="literal">-t</span> <span class="number">30</span> num</span><br><span class="line"><span class="comment">#接收用户的输入，并把输入赋予变量num</span></span><br><span class="line">y=<span class="variable">$</span> (<span class="built_in">echo</span> <span class="variable">$num</span> | sed <span class="string">&#x27;s/[0-9]//g&#x27;</span>)</span><br><span class="line"><span class="comment">#如果变量num 的值是数字，则把num的值替换为空，否则不替换</span></span><br><span class="line"><span class="comment">#把替换之后的值赋予变量y</span></span><br><span class="line">[ -<span class="type">n</span> <span class="string">&quot;<span class="variable">$y</span>&quot;</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Error! Please input a number!&quot;</span> &amp;&amp; <span class="keyword">exit</span> <span class="number">18</span></span><br><span class="line"><span class="comment">#判断变量y的值如果不为空，输出报错信息，退出脚本，退出返回值为18</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The number is: <span class="variable">$num</span>&quot;</span></span><br><span class="line"><span class="comment">#如果没有退出加班，则打印变量num中的数字</span></span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>

<h5 id="7-2-break语句"><a href="#7-2-break语句" class="headerlink" title="7.2 break语句"></a>7.2 break语句</h5><p>当程序执行到break语句时，会结束整个当前循环。而continue 语句也是结束循环的语句，不过continue 语句单次当前循环，而下次循环会继续。</p>
<p><strong>案例：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/break.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#演示break 跳出循环</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (( i=<span class="number">1</span>;i&lt;=<span class="number">10</span>; i=i+<span class="number">1</span> ))</span><br><span class="line"><span class="comment">#循环十次</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="keyword">if</span> [<span class="string">&quot;<span class="variable">$i</span>&quot;</span> -<span class="type">eq</span> <span class="number">4</span> ]</span><br><span class="line">		<span class="comment">#如果变量i的值等于4</span></span><br><span class="line">			then</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">			<span class="comment">#退出整个循环</span></span><br><span class="line">		fi</span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">	<span class="comment">#输出变量i的值</span></span><br><span class="line">	done</span><br><span class="line"><span class="number">12345678910111213141516</span></span><br></pre></td></tr></table></figure>

<p>执行下这个脚本，因为一旦变量i的值等于4，整个循环都会跳出，所以应该只能循环三次:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> chmod <span class="number">755</span> sh/break.sh</span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment">#sh/break.sh</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>

<h5 id="7-3-continue语句"><a href="#7-3-continue语句" class="headerlink" title="7.3 continue语句"></a>7.3 continue语句</h5><p>continue也是结束流程控制的语句。如果在循环中，continue语句只会结束单次当前循环。</p>
<p><strong>案例：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi sh/break.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#演示continue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (( i=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i=i+<span class="number">1</span> ))</span><br><span class="line"><span class="comment">#循环十次</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="keyword">if</span> [<span class="string">&quot;<span class="variable">$i</span>&quot;</span> -<span class="type">eq</span> <span class="number">4</span> ]</span><br><span class="line">		<span class="comment">#如果变量i的值等于4</span></span><br><span class="line">			then</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">			<span class="comment">#退出换成continue</span></span><br><span class="line">		fi</span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">	<span class="comment">#输出变量i的值</span></span><br><span class="line">	done</span><br><span class="line"><span class="number">12345678910111213141516</span></span><br></pre></td></tr></table></figure>

<p>执行下这个脚本:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> chmod <span class="number">755</span> sh/continue.sh</span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment">#sh/break.sh</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="comment">#少了4这个输出</span></span><br><span class="line"><span class="number">123456789101112</span></span><br></pre></td></tr></table></figure>



<hr>
<h3 id="六、字符截取、替换和处理命令"><a href="#六、字符截取、替换和处理命令" class="headerlink" title="六、字符截取、替换和处理命令"></a>六、字符截取、替换和处理命令</h3><h4 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h4><table>
<thead>
<tr>
<th>元字符</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>\</td>
<td>转义符，将特殊字符进行转义，忽略其特殊意义</td>
<td>a.b匹配a.b，但不能匹配ajb，.被转义为特殊意义</td>
</tr>
<tr>
<td>^</td>
<td>匹配行首，awk中，^则是匹配字符串的开始</td>
<td>^tux匹配以tux开头的行</td>
</tr>
<tr>
<td>$</td>
<td>匹配行尾，awk中，$则是匹配字符串的结尾</td>
<td>tux$匹配以tux结尾的行</td>
</tr>
<tr>
<td>.</td>
<td>匹配除换行符\n之外的任意单个字符</td>
<td>ab.匹配abc或abd，不可匹配abcd或abde，只能匹配单字符</td>
</tr>
<tr>
<td>[ ]</td>
<td>匹配包含在[字符]之中的任意一个字符</td>
<td>coo[kl]可以匹配cook或cool</td>
</tr>
<tr>
<td>[^]</td>
<td>匹配[^字符]之外的任意一个字符</td>
<td>123[^45]不可以匹配1234或1235，1236、1237都可以</td>
</tr>
<tr>
<td>[-]</td>
<td>匹配[]中指定范围内的任意一个字符，要写成递增</td>
<td>[0-9]可以匹配1、2或3等其中任意一个数字</td>
</tr>
<tr>
<td>?</td>
<td>匹配之前的项1次或者0次</td>
<td>colou?r可以匹配color或者colour，不能匹配colouur</td>
</tr>
</tbody></table>
<ul>
<li><p>| 匹配之前的项1次或者多次 | sa-6+匹配sa-6、sa-666，不能匹配sa-</p>
</li>
<li><p>| 匹配之前的项0次或者多次| co*l匹配cl、col、cool、coool等<br>() | 匹配表达式，创建一个用于匹配的子串 | ma(tri)?匹配max或maxtrix<br>{n} | 匹配之前的项n次，n是可以为0的正整数 |[0-9]{3}匹配任意一个三位数，可以扩展为[0-9][0-9][0-9]<br>{n,}| 之前的项至少需要匹配n次 | [0-9]{2,}匹配任意一个两位数或更多位数不支持{n,}{n,}{n,}<br>{n,m}| 指定之前的项至少匹配n次，最多匹配m次，n&lt;&#x3D;m | [0-9]{2,5}匹配从两位数到五位数之间的任意一个数字<br>|| 交替匹配|两边的任意一项 | ab(c|d)匹配abc或abd</p>
</li>
</ul>
<h4 id="1-字符截取、替换命令"><a href="#1-字符截取、替换命令" class="headerlink" title="1 字符截取、替换命令"></a>1 字符截取、替换命令</h4><h5 id="1-1-cut-列提取命令"><a href="#1-1-cut-列提取命令" class="headerlink" title="1.1 cut 列提取命令"></a>1.1 cut 列提取命令</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> cut [选项] 文件名</span><br><span class="line">选项:</span><br><span class="line"><span class="operator">-f</span> 列号: 提取第几列</span><br><span class="line"><span class="literal">-d</span> 分隔符: 按照指定分隔符分割列</span><br><span class="line"><span class="literal">-n</span>	取消分割多字节字符</span><br><span class="line"><span class="literal">-c</span> 字符范围: 不依赖分隔符来区分列，而是通过字符范围（行首为<span class="number">0</span>）来进行字段提取。“n-”表示从第n个字符到行尾;“n<span class="literal">-m</span>”从第n个字符到第m个字符;“一m”表示从第<span class="number">1</span>个字符到第m个字符。</span><br><span class="line"><span class="literal">--complement</span>	补足被选择的字节、字符或字段</span><br><span class="line"><span class="literal">--out-delimiter</span>	指定输出内容是的字段分割符</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>

<p>cut命令的默认分隔符是制表符，也就是“tab”键，不过对空格符可是支持的不怎么好啊。我们先建立一个测试文件，然后看看cut命令的作用吧:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi student.txt</span><br><span class="line">id	name	gender	mark</span><br><span class="line"><span class="number">1</span>	liming	m		<span class="number">86</span></span><br><span class="line"><span class="number">2</span>	<span class="built_in">sc</span>		m		<span class="number">67</span></span><br><span class="line"><span class="number">3</span>	tg		n		<span class="number">90</span></span><br><span class="line"><span class="number">12345</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> cut <span class="operator">-f</span> <span class="number">2</span> student.txt</span><br><span class="line"><span class="comment">#提取第二列内容</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>那如果想要提取多列呢?只要列号直接用“，”分开，命令如下:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> cut <span class="operator">-f</span> <span class="number">2</span>,<span class="number">3</span> student.txt</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>cut可以按照字符进行提取，需要注意“8-”代表的是提取所有行的第十个字符开始到行尾，而“10-20”代表提取所有行的第十个字符到第二十个字符，而“-8”代表提取所有行从行首到第八个字符:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> cut <span class="literal">-c</span> <span class="number">8</span>- student.txt</span><br><span class="line"><span class="comment">#提取第八个字符开始到行尾，好像很乱啊，那是因为每行的字符个数不相等啊</span></span><br><span class="line"><span class="number">12</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> cut <span class="literal">-d</span> <span class="string">&quot;:&quot;</span> <span class="operator">-f</span> <span class="number">1</span>,<span class="number">3</span> /etc/passwd</span><br><span class="line"><span class="comment">#以“:”作为分隔符，提取/etc/passwd_文件的第一列和第三列</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>如果我想用cut命令截取df命令的第一列和第三列，就会出现这样的情况:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span>~]<span class="variable">$</span> df <span class="literal">-h</span> | cut <span class="literal">-d</span> <span class="string">&quot; &quot;</span> <span class="operator">-f</span> <span class="number">1</span>,<span class="number">3</span></span><br><span class="line">Filesystem </span><br><span class="line">/dev/sda2 </span><br><span class="line">tmpfs </span><br><span class="line">/dev/sda1</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>



<h5 id="1-2-awk-编程"><a href="#1-2-awk-编程" class="headerlink" title="1.2 awk 编程"></a>1.2 awk 编程</h5><h6 id="1-2-1-awk-概述"><a href="#1-2-1-awk-概述" class="headerlink" title="1.2.1 awk 概述"></a>1.2.1 awk 概述</h6><p>AWK 是一种处理文本文件的语言，是一个强大的文本分析工具。</p>
<h6 id="1-2-2-printf-格式化输出"><a href="#1-2-2-printf-格式化输出" class="headerlink" title="1.2.2 printf 格式化输出"></a>1.2.2 printf 格式化输出</h6><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> printf ‘输出类型输出格式’ 输出内容</span><br><span class="line"></span><br><span class="line">输出类型:</span><br><span class="line">%c:     ASCII字符.显示相对应参数的第一个字符</span><br><span class="line">%<span class="literal">-ns</span>:   输出字符串，减号“-”表示左对齐(默认右对齐)，n是数字指代输出几个字符,几个参数就写几个%<span class="literal">-ns</span></span><br><span class="line">%<span class="literal">-ni</span>:   输出整数，n是数字指代输出几个数字</span><br><span class="line">%f：    输出小数点右边的位数</span><br><span class="line">%m.nf:  输出浮点数，m和n是数字，指代输出的整数位数和小数位数。如%<span class="number">8.2</span>f代表共输出<span class="number">8</span>位数，其中<span class="number">2</span>位是小数，<span class="number">6</span>位是整数。</span><br><span class="line"></span><br><span class="line">输出格式:</span><br><span class="line">\a: 输出警告声音</span><br><span class="line">\b: 输出退格键，也就是Backspace键</span><br><span class="line">\f: 清除屏幕</span><br><span class="line">\n: 换行</span><br><span class="line">\r: 回车，也就是Enter键</span><br><span class="line">\t: 水平输出退格键，也就是Tab 键</span><br><span class="line">\v: 垂直输出退格键，也就是Tab 键</span><br><span class="line"><span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure>

<p>为了演示printf命令，我们需要修改下刚刚cut命令使用的student.txt文件，文件内容如下:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi student.txt</span><br><span class="line">ID      Name    php  	 Linux  	MySQL 	  Average</span><br><span class="line"><span class="number">1</span>       AAA      <span class="number">66</span>         <span class="number">66</span>       <span class="number">66</span>           <span class="number">66</span></span><br><span class="line"><span class="number">2</span>       BBB      <span class="number">77</span>         <span class="number">77</span>       <span class="number">77</span>           <span class="number">77</span></span><br><span class="line"><span class="number">3</span>       CCC      <span class="number">88</span>         <span class="number">88</span>       <span class="number">88</span>           <span class="number">88</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#printf格式输出文件</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> printf <span class="string">&#x27;%s\t %s\t %s\t %s\t %s\t %s\t \n’ $(cat student.txt)</span></span><br><span class="line"><span class="string">#%s分别对应后面的参数,6列就写6个</span></span><br><span class="line"><span class="string">ID      Name    php   Linux  MySQL   Average</span></span><br><span class="line"><span class="string">1       AAA      66         66       66           66</span></span><br><span class="line"><span class="string">2       BBB      77         77       77           77</span></span><br><span class="line"><span class="string">3       CCC      88         88       88           88</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">123456789101112131415</span></span><br></pre></td></tr></table></figure>

<p>如果不想把成绩当成字符串输出，而是按照整型和浮点型输出，则要这样:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> printf <span class="string">&#x27;%i\t %s\t %i\t %i\t %i\t %8.2f\t \n’ \ $(cat student.txt | grep -v Name)</span></span><br><span class="line"><span class="string">1</span></span><br></pre></td></tr></table></figure>

<h6 id="1-2-3-awk-基本使用"><a href="#1-2-3-awk-基本使用" class="headerlink" title="1.2.3 awk 基本使用"></a>1.2.3 awk 基本使用</h6><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> awk‘条件<span class="number">1</span>&#123;动作<span class="number">1</span>&#125; 条件<span class="number">2</span>&#123;动作<span class="number">2</span>&#125;…’ 文件名</span><br><span class="line">条件（Pattern）:</span><br><span class="line">	一般使用关系表达式作为条件。这些关系表达式非常多，例如:</span><br><span class="line">	x &gt; <span class="number">10</span>  判断变量x是否大于<span class="number">10</span></span><br><span class="line">	x == y  判断变量x是否等于变量y</span><br><span class="line">	A ~ B   判断字符串A中是否包含能匹配B表达式的子字符串</span><br><span class="line">	A !~ B  判断字符串A中是否不包含能匹配B表达式的子字符串</span><br><span class="line">	</span><br><span class="line">动作（Action） :</span><br><span class="line">	格式化输出</span><br><span class="line">	流程控制语句</span><br><span class="line"></span><br><span class="line">常用参数：</span><br><span class="line"></span><br><span class="line">   <span class="operator">-F</span>	指定输入时用到的字段分隔符</span><br><span class="line">   <span class="literal">-v</span>	自定义变量</span><br><span class="line">   <span class="operator">-f</span>	从脚本中读取awk命令</span><br><span class="line">   <span class="literal">-m</span>	对val值设置内在限制</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1234567891011121314151617181920</span></span><br></pre></td></tr></table></figure>

<p>我们这里先来学习awk基本用法，也就是只看看格式化输出动作是干什么的。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> awk <span class="string">&#x27;&#123;printf $2 &quot;\t&quot; $6 &quot;\n&quot;&#125;’ student.txt</span></span><br><span class="line"><span class="string">#输出第二列和第六列</span></span><br><span class="line"><span class="string">12</span></span><br></pre></td></tr></table></figure>

<p>比如刚刚截取df命令的结果时，cut命令已经力不从心了，我们来看看awk命令:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> df <span class="literal">-h</span> | awk <span class="string">&#x27;&#123;print $1 &quot;\t&quot; $3&#125;&#x27;</span></span><br><span class="line"><span class="comment">#截取df命令的第一列和第三列</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<h6 id="1-2-4-awk-的条件"><a href="#1-2-4-awk-的条件" class="headerlink" title="1.2.4 awk 的条件"></a>1.2.4 awk 的条件</h6><table>
<thead>
<tr>
<th>条件的类型</th>
<th>条件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>awk保留字</td>
<td>BEGIN</td>
<td>在awk程序一开始时，尚未读取任何数据之前执行。BEGIN后的动作只在程序开始时执行一次</td>
</tr>
<tr>
<td>awk保留字</td>
<td>END</td>
<td>在awk程序处理完所有数据，即将结束时执行。END后的动作只在程序结束时执行一次</td>
</tr>
<tr>
<td>关系运算符</td>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>关系运算符</td>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>关系运算符</td>
<td>&gt;&#x3D;</td>
<td>大于等于</td>
</tr>
<tr>
<td>关系运算符</td>
<td>&lt;&#x3D;</td>
<td>小于等于</td>
</tr>
<tr>
<td>关系运算符</td>
<td>&#x3D;&#x3D;</td>
<td>等于。用于判断两个值是否相等，如果是给变量赋值，请使用“”号</td>
</tr>
<tr>
<td>关系运算符</td>
<td>!&#x3D;</td>
<td>不等于</td>
</tr>
<tr>
<td>关系运算符</td>
<td>A~B</td>
<td>判断字符串A中是否包含能匹配B表达式的子字符串</td>
</tr>
<tr>
<td>关系运算符</td>
<td>A!~B</td>
<td>判断字符串A中是否不包含能匹配B表达式的子字符串</td>
</tr>
<tr>
<td>正则表达式</td>
<td>&#x2F;正则&#x2F;</td>
<td>如果在”&#x2F;&#x2F;“中可以写入字符，也可以支持正则表达式</td>
</tr>
</tbody></table>
<h6 id="BEGIN"><a href="#BEGIN" class="headerlink" title="BEGIN"></a>BEGIN</h6><p>BEGIN是awk的保留字，是一种特殊的条件类型。BEGIN的执行时机是“在 awk程序一开始时，尚未读取任何数据之前执行”。一旦BEGIN后的动作执行一次，当awk开始从文件中读入数据，BEGIN的条件就不再成立，所以BEGIN定义的动作只能被执行一次。<br>例如:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> awk <span class="string">&#x27;BEGIN&#123;printf &quot;This is a transcript \n&quot; &#125; &#123;printf $2 &quot;\t&quot; $6 &quot;\n&quot;&#125;’ student.txt</span></span><br><span class="line"><span class="string">#awk命令只要检测不到完整的单引号不会执行，所以这个命令的换行不用加入“|”,就是一行命令</span></span><br><span class="line"><span class="string">#这里定义了两个动作</span></span><br><span class="line"><span class="string">#第一个动作使用BEGIN条件，所以会在读入文件数据前打印“这是一张成绩单”(只会执行一次)</span></span><br><span class="line"><span class="string">#第二个动作会打印文件的第二字段和第六字段</span></span><br><span class="line"><span class="string">12345</span></span><br></pre></td></tr></table></figure>

<h6 id="END"><a href="#END" class="headerlink" title="END"></a>END</h6><p>END也是awk保留字，不过刚好和BEGIN相反。END是在awk程序处理完所有数据，即将结束时执行。END后的动作只在程序结束时执行一次。例如:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> awk <span class="string">&#x27;END&#123;printf &quot;The End \n&quot;&#125; &#123;printf $2 &quot;\t&quot; $6 &quot;\n&quot;&#125;’ student.txt</span></span><br><span class="line"><span class="string">#在输出结尾输入“The End”，这并不是文档本身的内容，而且只会执行一次</span></span><br><span class="line"><span class="string">12</span></span><br></pre></td></tr></table></figure>

<h6 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h6><p>举几个例子看看关系运算符。假设我想看看平均成绩大于等于87分的学员是谁，就可以这样输入命令:<br><strong>例子1:</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">cat</span> student.txt | grep <span class="literal">-v</span> Name | awk <span class="string">&#x27;$6 &gt;= 87 &#123;printf $2 &quot;\n&quot;&#125;&#x27;</span></span><br><span class="line"><span class="comment">#使用cat输出文件内容，用grep取反包含“Name”的行</span></span><br><span class="line"><span class="comment">#判断第六字段（平均成绩）大于等于87分的行，如果判断式成立，则打第六列（学员名$2）</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

<p>加入了条件之后，只有条件成立动作才会执行，如果条件不满足，则动作则不运行。通过这个实验，大家可以发现，虽然awk是列提取命令，但是也要按行来读入的。这个<strong>命令的执行过程</strong>是这样的:</p>
<p><strong>1）如果有BEGIN条件，则先执行BEGIN定义的动作。<br>2）如果没有BEGIN条件，则读入第一行，把第一行的数据依次赋予$0、$1、$2等变量。其中$0代表此行的整体数据，$1代表第一字段，$2代表第二字段。<br>3）依据条件类型判断动作是否执行。如果条件符合，则执行动作，否则读入下一行数据。如果没有条件，则每行都执行动作。<br>4）读入下一行数据，重复执行以上步骤。</strong></p>
<p>再举个例子，如果我想看看Sc用户的平均成绩呢:</p>
<p><strong>例子2:</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> awk <span class="string">&#x27;$2 ~ /AAA/ &#123;printf $6 &quot;\n&quot;&#125;&#x27;</span> student.txt</span><br><span class="line"><span class="comment">#如果第二字段中输入包含有“Sc”字符，则打印第六字段数据</span></span><br><span class="line"><span class="number">85.66</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

<p>这里要注意在awk中，使用“&#x2F;&#x2F;”包含的字符串，awk命令才会查找。也就是说字符串必须用“&#x2F;&#x2F;”包含，awk命令才能正确识别。</p>
<h6 id="正则表达式-1"><a href="#正则表达式-1" class="headerlink" title="正则表达式"></a>正则表达式</h6><p>如果要想让awk 识别字符串，必须使用“&#x2F;&#x2F;”包含，例如:<br><strong>例子1:</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> awk <span class="string">&#x27;/Liming/ &#123;print&#125;’student.txt</span></span><br><span class="line"><span class="string">#打印Liming的成绩</span></span><br><span class="line"><span class="string">12</span></span><br></pre></td></tr></table></figure>

<p>当使用df命令查看分区使用情况是，如果我只想查看真正的系统分区的使用状况，而不想查看光盘和临时分区的使用状况，则可以:</p>
<p><strong>例子2:</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> df <span class="literal">-h</span> | awk <span class="string">&#x27;/sda[O-9]/ &#123;printf $1 &quot;\t&quot; $5 &quot;\n&quot;&#125;’</span></span><br><span class="line"><span class="string">#查询包含有sda数字的行，并打印第一字段和第五字段</span></span><br><span class="line"><span class="string">12</span></span><br></pre></td></tr></table></figure>

<h6 id="1-2-5-awk-内置变量"><a href="#1-2-5-awk-内置变量" class="headerlink" title="1.2.5 awk 内置变量"></a>1.2.5 awk 内置变量</h6><table>
<thead>
<tr>
<th>awk内置变量</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>$0</td>
<td>代表目前awk所读入的整行数据。我们已知awk是一行一行读入数据的，$0就代表当前读入行的整行数据。</td>
</tr>
<tr>
<td>$n</td>
<td>代表目前读入行的第n个字段。比如，$1表示第1个字段(列)，$2表示第2个字段(列)，如此类推</td>
</tr>
<tr>
<td>NF</td>
<td>当前行拥有的字段（列）总数。</td>
</tr>
<tr>
<td>NR</td>
<td>当前awk所处理的行，是总数据的第几行。</td>
</tr>
<tr>
<td>FS</td>
<td>用户定义分隔符。awk的默认分隔符是任何空格，如果想要使用其他分隔符（如“:”），就需要FS变量定义。</td>
</tr>
<tr>
<td>ARGC</td>
<td>命令行参数个数。</td>
</tr>
<tr>
<td>ARGV</td>
<td>命令行参数数组。</td>
</tr>
<tr>
<td>FNR</td>
<td>当前文件中的当前记录数（对输入文件起始为1）。</td>
</tr>
<tr>
<td>OFMT</td>
<td>数值的输出格式（默认为%.6g）。</td>
</tr>
<tr>
<td>OFS</td>
<td>输出字段的分隔符（默认为空格）。</td>
</tr>
<tr>
<td>ORS</td>
<td>输出记录分隔符（默认为换行符）。</td>
</tr>
<tr>
<td>RS</td>
<td>输入记录分隔符（默认为换行符）。</td>
</tr>
</tbody></table>
<h6 id="awk常用统计实例"><a href="#awk常用统计实例" class="headerlink" title="awk常用统计实例"></a>awk常用统计实例</h6><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、打印文件的第一列(域) ：</span><br><span class="line"> awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> filename</span><br><span class="line"> </span><br><span class="line"><span class="number">2</span>、打印文件的前两列(域) ：</span><br><span class="line"> awk <span class="string">&#x27;&#123;print $1,$2&#125;&#x27;</span> filename</span><br><span class="line"> </span><br><span class="line"><span class="number">3</span>、打印完第一列，然后打印第二列 ： </span><br><span class="line">awk <span class="string">&#x27;&#123;print $1 $2&#125;&#x27;</span> filename</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、打印文本文件的总行数 ： </span><br><span class="line">awk <span class="string">&#x27;END&#123;print NR&#125;&#x27;</span> filename</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>、打印文本第一行 ：</span><br><span class="line">awk <span class="string">&#x27;NR==1&#123;print&#125;&#x27;</span> filename</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>、打印文本第二行第一列 ：</span><br><span class="line">sed <span class="literal">-n</span> <span class="string">&quot;2, 1p&quot;</span> filename | awk <span class="string">&#x27;print $1&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 获取第一列</span><br><span class="line"><span class="built_in">ps</span> <span class="literal">-aux</span> | grep watchdog | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. 获取第一列，第二列，第三列</span><br><span class="line"><span class="built_in">ps</span> <span class="literal">-aux</span> | grep watchdog | awk <span class="string">&#x27;&#123;print $1, $2, $3&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 获取第一行的第一列，第二列，第三列</span><br><span class="line"><span class="built_in">ps</span> <span class="literal">-aux</span> | grep watchdog | awk <span class="string">&#x27;NR==1&#123;print $1, $2, $3&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>. 获取行数NR</span><br><span class="line">df <span class="literal">-h</span> | awk <span class="string">&#x27;END&#123;print NR&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="number">5</span>. 获取列数NF（这里是获取最后一行的列数，注意每行的列数可能是不同的）</span><br><span class="line"><span class="built_in">ps</span> <span class="literal">-aux</span> | grep watchdog | awk <span class="string">&#x27;END&#123;print NF&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="number">6</span>. 获取最后一列</span><br><span class="line"><span class="built_in">ps</span> <span class="literal">-aux</span> | grep watchdog | awk <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="number">7</span>. 对文件进行操作</span><br><span class="line">awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> fileName</span><br><span class="line"></span><br><span class="line"><span class="number">8</span>. 指定分隔符（这里以:分割）</span><br><span class="line"><span class="built_in">ps</span> <span class="literal">-aux</span> | grep watchdog |awk  <span class="operator">-F</span><span class="string">&#x27;:&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="number">9</span>. 超出范围不报错</span><br><span class="line"><span class="built_in">ps</span> <span class="literal">-aux</span> | grep watchdog | awk <span class="string">&#x27;&#123;print $100&#125;&#x27;</span></span><br><span class="line"><span class="number">12345678910111213141516171819202122232425262728293031323334353637383940414243444546</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">cat</span> /etc/passwd | grep <span class="string">&quot;/bin/bash&quot;</span> | awk <span class="string">&#x27;&#123;FS=&quot;:&quot;&#125; &#123;printf $1 &quot;\t&quot; $3 &quot;\n&quot;&#125;’</span></span><br><span class="line"><span class="string">#查询可以登录的用户的用户名和UID</span></span><br><span class="line"><span class="string">12</span></span><br></pre></td></tr></table></figure>

<p>这里“:”分隔符生效了，可是第一行却没有起作用，原来我们忘记了“BEGIN”条件，那么再来试试;</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">cat</span> /etc/passwd | grep <span class="string">&quot;/bin/bash&quot;</span> | awk <span class="string">&#x27;BEGIN &#123;FS=&quot;:&quot;&#125; &#123;printf $1 &quot;\t&quot; $3 &quot;\n&quot;&#125;’</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">[root@localhost ~]$ cat /etc/passwd | grep &quot;/bin/bash&quot; | awk &#x27;</span><span class="keyword">BEGIN</span> &#123;FS=<span class="string">&quot;:&quot;</span>&#125; &#123;printf <span class="variable">$1</span> <span class="string">&quot;\t&quot;</span> <span class="variable">$3</span> <span class="string">&quot;\t 行号:” NR &quot;</span>\t 字段数:<span class="string">&quot; NF &quot;</span>\n<span class="string">&quot;&#125;’</span></span><br><span class="line"><span class="string">#解释下awk命令</span></span><br><span class="line"><span class="string">#开始执行&#123;分隔符是“:”&#125;&#123;输出第一字段和第三字段输出行号(NR值）字段数(NF值）&#125;</span></span><br><span class="line"><span class="string">root     0      行号:1       字段数:7</span></span><br><span class="line"><span class="string">user1   501     行号:2       字段数:7</span></span><br><span class="line"><span class="string">12345</span></span><br></pre></td></tr></table></figure>

<p>如果我只想看看sshd这个伪用户的相关信息，则可以这样使用:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">cat</span> /etc/passwd | awk <span class="string">&#x27;BEGIN &#123;FS=&quot;:&quot;&#125; $1==&quot;sshd&quot; &#123;printf $1 &quot;\t&quot; $3 &quot;\t 行号:&quot; NR &quot;\t 字段数:&quot; NF &quot;\n&quot;&#125;’</span></span><br><span class="line"><span class="string">#可以看到sshd 伪用户的UID是74，是/etc/passwd_文件的第28行，此行有7个字段</span></span><br><span class="line"><span class="string">12</span></span><br></pre></td></tr></table></figure>

<h6 id="1-2-6-awk-流程控制"><a href="#1-2-6-awk-流程控制" class="headerlink" title="1.2.6 awk 流程控制"></a>1.2.6 awk 流程控制</h6><p>我们再来利用下student.txt文件做个练习，后面的使用比较复杂，我们再看看这个文件的内容:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">cat</span> student.txt</span><br><span class="line">ID      Name    php   Linux  MySQL   Average</span><br><span class="line"><span class="number">1</span>       AAA      <span class="number">66</span>         <span class="number">66</span>       <span class="number">66</span>           <span class="number">66</span></span><br><span class="line"><span class="number">2</span>       BBB      <span class="number">77</span>         <span class="number">77</span>       <span class="number">77</span>           <span class="number">77</span></span><br><span class="line"><span class="number">3</span>       CCC      <span class="number">88</span>         <span class="number">88</span>       <span class="number">88</span>           <span class="number">88</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>

<p>我们先来看看该如何在awk中定义变量与调用变量的值。假设我想统计PHP成绩的总分，那么就应该这样:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> awk <span class="string">&#x27;NR==2 &#123;php1=$3&#125;</span></span><br><span class="line"><span class="string">NR==3 &#123;php2=$3&#125;</span></span><br><span class="line"><span class="string">NR==4 &#123;php3=$3;totle=phpl+php2+php3;print &quot;totle php is &quot; totle&#125;’ student.txt</span></span><br><span class="line"><span class="string">#统计PHIP成绩的总分</span></span><br><span class="line"><span class="string">1234</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>我们解释下这个命令。“NR&#x3D;&#x3D;2 {iphp1&#x3D;$3}” (条件是NR&#x3D;&#x3D;2，动作是php1&#x3D;$3） 这句话是指如果输入数据是第二行（第一行是标题行），就把第二行的第三字段的值赋予变量“php1”。<br>“NR&#x3D;&#x3D;3 {php2&#x3D;$3}” 这句话是指如果输入数据是第三行,就把第三行的第三字段的值赋予变量“php2”。“NR&#x3D;&#x3D;4 {php3&#x3D;$3;totle&#x3D;phpl+php2+php3;print “totle php is “ totle}”（“NR&#x3D;&#x3D;4”是条件，后面(中的都是动作)这句话是指如果输入数据是第四行﹐就把第四行的第三字段的值赋予变量”php3”;然后定义变量totle的值是“php1+php2+php3”;然后输出“totle php is”关键字，后面加变量totle的值。</p>
</blockquote>
<p>在awk编程中，因为命令语句非常长，在输入格式时需要注意以下内容:</p>
<blockquote>
<p>多个条件 {动作} 可以用空格分割，也可以用回车分割。</p>
</blockquote>
<blockquote>
<p>在一个动作中，如果需要执行多个命令，需要用 “;” 分割，或用回车分割。</p>
</blockquote>
<blockquote>
<p>在awk中，变量的赋值与调用都不需要加入“$”符。</p>
</blockquote>
<blockquote>
<p>条件中判断两个值是否相同，请使用 “&#x3D;&#x3D;”，以便和变量赋值进行区分。</p>
</blockquote>
<p>在看看该如何实现流程控制，假设如果Linux成绩大于90，就是一个好男人(学PHP的表示压力很大!) :</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> awk <span class="string">&#x27;&#123;if (NR&gt;=2) &#123;if ($4&gt;60) printf $2 &quot;is a good man!\n&quot;&#125;&#125;’ student.txt</span></span><br><span class="line"><span class="string">#程序中有两个if判断，第一个判断行号大于2，第二个判断Linux成绩大于90分</span></span><br><span class="line"><span class="string">Liming is a good man !</span></span><br><span class="line"><span class="string">Sc is a good man !</span></span><br><span class="line"><span class="string">1234</span></span><br></pre></td></tr></table></figure>

<p>其实在 awk中 if判断语句，完全可以直接利用awk自带的条件来取代，刚刚的脚本可以改写成这样:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span>  awk ’NR&gt;=<span class="number">2</span> &#123;test=<span class="variable">$4</span>&#125;</span><br><span class="line">test&gt;<span class="number">90</span> &#123;printf <span class="variable">$2</span> <span class="string">&quot;is a good man! \n&quot;</span>&#125;’ student.txt</span><br><span class="line"><span class="comment">#先判断行号如果大于2，就把第四字段赋予变量test</span></span><br><span class="line"><span class="comment">#在判断如果test的值大于90分，就打印好男人</span></span><br><span class="line">Liming is a good <span class="built_in">man</span>!</span><br><span class="line"><span class="built_in">Sc</span> is a good <span class="built_in">man</span>!</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>

<h6 id="1-2-7-awk-函数"><a href="#1-2-7-awk-函数" class="headerlink" title="1.2.7 awk 函数"></a>1.2.7 awk 函数</h6><p>awk编程也允许在编程时使用函数，我们讲讲awk的自定义函数。awk函数的定义方法如下:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名（参数列表）</span>&#123;</span><br><span class="line">	函数体</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

<p>我们定义一个简单的函数，使用函数来打印student.txt的学员姓名和平均成绩，应该这样来写函数：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> awk <span class="string">&#x27;function test(a,b) &#123; printf a &quot;\t&quot; b &quot;\n&quot;&#125;</span></span><br><span class="line"><span class="string">#定义函数test，包含两个参数，函数体的内容是输出这两个参数的值</span></span><br><span class="line"><span class="string">&#123; test($2,$6) &#125; &#x27;</span> student.txt</span><br><span class="line"><span class="comment">#调用函数test，并向两个参数传递值。</span></span><br><span class="line">Name    Average</span><br><span class="line">AAA      <span class="number">87.66</span></span><br><span class="line">BBB      <span class="number">85.66</span></span><br><span class="line">CCC      <span class="number">91.66</span></span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>

<h6 id="1-2-8-awk-中调用脚本"><a href="#1-2-8-awk-中调用脚本" class="headerlink" title="1.2.8 awk 中调用脚本"></a>1.2.8 awk 中调用脚本</h6><p>对于小的单行程序来说，将脚本作为命令行自变量传递给awk是非常简单的，而对于多行程序就比较难处理。当程序是多行的时候，使用外部脚本是很适合的。首先在外部文件中写好脚本，然后可以使用awk的-f选项，使其读入脚本并且执行。<br>例如，我们可以先编写一个awk脚本:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> vi pass.awk</span><br><span class="line"><span class="keyword">BEGIN</span> &#123;FS=<span class="string">&quot;:&quot;</span>&#125;</span><br><span class="line">&#123; print <span class="variable">$1</span> <span class="string">&quot;\t&quot;</span>  <span class="variable">$3</span>&#125;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

<p>然后可以使用“一f”选项来调用这个脚本:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> awk <span class="operator">-f</span> pass.awk /etc/passwd</span><br><span class="line">rooto</span><br><span class="line">bin1</span><br><span class="line">daemon2</span><br><span class="line">…省略部分输出…</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>



<h5 id="1-3-sed-文本选取、替换、删除、新增的命令"><a href="#1-3-sed-文本选取、替换、删除、新增的命令" class="headerlink" title="1.3 sed 文本选取、替换、删除、新增的命令"></a>1.3 sed 文本选取、替换、删除、新增的命令</h5><p>sed主要是用来将数据进行选取、替换、删除、新增的命令。</p>
<p><strong>语法:</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed [选项] ‘[动作]’ 文件名</span><br><span class="line"></span><br><span class="line">选项:</span><br><span class="line"><span class="literal">-n</span>:  一般sed命令会把所有数据都输出到屏幕，如果加入此选择，则只会把经过sed命令处理的行输出到屏幕。</span><br><span class="line"><span class="literal">-e</span>:  允许对输入数据应用多条sed命令编辑。</span><br><span class="line"><span class="operator">-f</span> 脚本文件名: 从sed脚本中读入sed操作。和awk命令的<span class="operator">-f</span>非常类似。</span><br><span class="line"><span class="literal">-r</span>:  在sed中支持扩展正则表达式。</span><br><span class="line"><span class="literal">-i</span>:  用sed的修改结果直接修改读取数据的文件，而不是由屏幕输出</span><br><span class="line"></span><br><span class="line">动作:</span><br><span class="line">num a \: 追加，在当前行后添加一行或多行。添加多行时，除最后一行外，每行末尾需要用“\”代表数据未完结。num表示第几行</span><br><span class="line">c \: 行替换，用c后面的字符串替换原数据行，替换多行时，除最后一行外，每行末尾需用“”代表数据未完结。</span><br><span class="line">num i \: 插入，在当期行前插入一行或多行。插入多行时，除最后一行外，每行末尾需要用“”代表数据未完结。num表示第几行</span><br><span class="line">d ; 删除，删除指定的行。</span><br><span class="line">p : 打印，输出指定的行。</span><br><span class="line">s : 字串替换，用一个字符串替换另外一个字符串。格式为“行范围s/<span class="string">&quot;旧字串/新字串/g”（和vim中的替换格式类似）。</span></span><br><span class="line"><span class="string">12345678910111213141516</span></span><br></pre></td></tr></table></figure>

<p>对sed命令大家要注意，sed所做的修改并不会直接改变文件的内容（如果是用管道符接收的命令的输出，这种情况连文件都没有），而是把修改结果只显示到屏幕上，除非使用“-i”选项才会直接修改文件。</p>
<h6 id="1-3-1-提取行数据"><a href="#1-3-1-提取行数据" class="headerlink" title="1.3.1 提取行数据"></a>1.3.1 提取行数据</h6><p>我们举几个例子来看看sed命令到底是干嘛的。假设我想查看下student.txt的第二行，那么就可以利用“p”动作了:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed  <span class="string">&#x27;2p&#x27;</span> student.txt</span><br><span class="line">ID      Name    php   Linux  MySQL   Average</span><br><span class="line"><span class="number">1</span>       AAA      <span class="number">66</span>         <span class="number">66</span>       <span class="number">66</span>           <span class="number">66</span></span><br><span class="line"><span class="number">2</span>       BBB      <span class="number">77</span>         <span class="number">77</span>       <span class="number">77</span>           <span class="number">77</span></span><br><span class="line"><span class="number">3</span>       CCC      <span class="number">88</span>         <span class="number">88</span>       <span class="number">88</span>           <span class="number">88</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>

<p>指定输出某行，使用-n选项</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed <span class="literal">-n</span>  <span class="string">&#x27;2p&#x27;</span> student.txt</span><br><span class="line"><span class="number">1</span>       AAA      <span class="number">66</span>         <span class="number">66</span>       <span class="number">66</span>           <span class="number">66</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<h6 id="1-3-2-删除行数据"><a href="#1-3-2-删除行数据" class="headerlink" title="1.3.2 删除行数据"></a>1.3.2 删除行数据</h6><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed  <span class="string">&#x27;2,4d&#x27;</span> student.txt</span><br><span class="line"><span class="comment">#删除第二行到第四行数据</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<h6 id="1-3-3-追加插入行数据"><a href="#1-3-3-追加插入行数据" class="headerlink" title="1.3.3 追加插入行数据"></a>1.3.3 追加插入行数据</h6><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed <span class="string">&#x27;2a hello&#x27;</span> student.txt</span><br><span class="line"><span class="comment">#在第二行后加入 hello</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>“a”会在指定行后面追加入数据，如果想要在指定行前面插入数据，则需要使用“i”动作:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed <span class="string">&#x27;2i hello world&#x27;</span> student.txt</span><br><span class="line"><span class="comment">#在第二行前插入两行数据</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>如果是想追加或插入多行数据，除最后一行外，每行的末尾都要加入“\”代表数据未完结。再来看看“-n”选项的作用:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed <span class="literal">-n</span> <span class="string">&#x27;2i hello world&#x27;</span> student.txt</span><br><span class="line"><span class="comment">#只查看sed命令操作的数据</span></span><br><span class="line"></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

<h6 id="1-3-4-替换行数据"><a href="#1-3-4-替换行数据" class="headerlink" title="1.3.4 替换行数据"></a>1.3.4 替换行数据</h6><p>“-n”只查看sed命令操作的数据，而不是查看所有数据。<br>再来看看如何实现行数据替换，假设AAA的成绩太好了，我实在是不想看到他的成绩刺激我，那就可以使用”c”动作:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">cat</span> student.txt | sed <span class="string">&#x27;2c No such person&#x27;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>sed命令默认情况是不会修改文件内容的，如果我确定需要让 sed命令直接处理文件的内容，可以使用“-i”选项。不过要小心啊，这样非常容易误操作，在操作系统文件时请小心谨慎。可以使用<br>这样的命令:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed <span class="literal">-i</span> <span class="string">&#x27;2c No such person&#x27;</span> student.txt</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h6 id="1-3-5-字符串替换"><a href="#1-3-5-字符串替换" class="headerlink" title="1.3.5 字符串替换"></a>1.3.5 字符串替换</h6><p>“c”动作是进行整行替换的，如果仅仅想替换行中的部分数据，就要使用“s”动作了。g 使得 sed 对文件中所有符合的字符串都被替换, 修改后内容会到标准输出，不会修改原文件。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed <span class="string">&#x27;s/旧字串/新字串/g&#x27;</span> 文件名</span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed <span class="string">&#x27;行范围s/旧字串/新字串/g&#x27;</span> 文件名</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>替换的格式和vim非常类似，假设我觉得我自己的PHP成绩太低了，想作弊给他改高点，就可以这样来做:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed <span class="string">&#x27;3s/74/99/g&#x27;</span> student.txt</span><br><span class="line"><span class="comment">#在第三行中，把74换成99</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>这样看起来就比较爽了吧。如果我想把AAA老师的成绩注释掉，让他不再生效。可以这样做:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed <span class="string">&#x27;2s/^/#/g&#x27;</span> student.txt</span><br><span class="line"><span class="comment">#这里使用正则表达式，“^”代表行首</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>在sed中只能指定行范围，所以很遗憾我在他们两个的中间，不能只把他们两个注释掉，那么我们可以这样:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed <span class="literal">-e</span> <span class="string">&#x27;s/AAA//g ; s/BBB//g&#x27;</span> student.txt</span><br><span class="line"><span class="comment">#同时把“Liming”和“Tg”替换为空</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>“-e”选项可以同时执行多个sed动作，当然如果只是执行一个动作也可以使用“-e”选项，但是这时没有什么意义。还要注意，多个动作之间要用“;”号或回车分割，例如上一个命令也可以这样写:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sed <span class="literal">-e</span> <span class="string">&#x27;s/Liming//g</span></span><br><span class="line"><span class="string">&gt;s/Tg//g&#x27;</span>’ student.txt</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>



<h4 id="2-字符处理命令"><a href="#2-字符处理命令" class="headerlink" title="2 字符处理命令"></a>2 字符处理命令</h4><h5 id="2-1-sort-排序命令"><a href="#2-1-sort-排序命令" class="headerlink" title="2.1 sort 排序命令"></a>2.1 sort 排序命令</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span>~]<span class="variable">$</span> <span class="built_in">sort</span> [选项] 文件名</span><br><span class="line">选项:</span><br><span class="line"></span><br><span class="line"><span class="operator">-f</span>: 忽略大小写</span><br><span class="line"><span class="literal">-b</span>: 忽略每行前面的空白部分</span><br><span class="line"><span class="literal">-n</span>: 以数值型进行排序，默认使用字符串型排序</span><br><span class="line"><span class="literal">-r</span>: 反向排序</span><br><span class="line"><span class="literal">-u</span>: 删除重复行。就是uniq命令</span><br><span class="line"><span class="literal">-t</span>: 指定分隔符，默认是分隔符是制表符</span><br><span class="line"><span class="literal">-k</span> n[,<span class="type">m</span>]: ―按照指定的字段范围排序。从第n字段开始，m字段结束（默认到行尾）</span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>sort命令默认是用每行开头第一个字符来进行排序的，比如:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span>~]<span class="variable">$</span> <span class="built_in">sort</span> /etc/passwd</span><br><span class="line"><span class="comment">#排序用户信息文件</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>如果想要反向排序，请使用“-r”选项:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span>~]<span class="variable">$</span> <span class="built_in">sort</span> <span class="literal">-r</span>/etc/passwd</span><br><span class="line"><span class="comment">#反向排序</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>如果想要指定排序的字段，需要使用“-t”选项指定分隔符，并使用“-k”选项指定字段号。加入我想要按照UID字段排序&#x2F;etc&#x2F;passwd文件:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span>~]<span class="variable">$</span> <span class="built_in">sort</span> <span class="literal">-t</span> <span class="string">&quot;:&quot;</span> <span class="literal">-k</span> <span class="number">3</span>,<span class="number">3</span> /etc/passwd</span><br><span class="line"><span class="comment">#指定分隔符是“:”，用第三字段开头，第三字段结尾排序，就是只用第三字段排序</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>因为sort默认是按照字符排序，前面用户的UID的第一个字符都是1，所以这么排序。要想按照数字排序，请使用“-n”选项:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span>~]<span class="variable">$</span> <span class="built_in">sort</span> <span class="literal">-n</span> <span class="literal">-t</span> <span class="string">&quot;:&quot;</span> <span class="literal">-k</span> <span class="number">3</span>,<span class="number">3</span> /etc/passwd</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>当然“-k”选项可以直接使用“-k 3”，代表从第三字段到行尾都排序（第一个字符先排序，如果一致，第二个字符再排序，知道行尾）。</p>
<h5 id="2-2-uniq-取消重复行"><a href="#2-2-uniq-取消重复行" class="headerlink" title="2.2 uniq 取消重复行"></a>2.2 uniq 取消重复行</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span>~]<span class="variable">$</span> uniq [选项] 文件名</span><br><span class="line">选项：</span><br><span class="line">	<span class="literal">-i</span>：忽略大小写</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

<h5 id="2-3-wc-统计命令"><a href="#2-3-wc-统计命令" class="headerlink" title="2.3 wc 统计命令"></a>2.3 wc 统计命令</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span>~]<span class="variable">$</span> wc [选项] 文件名</span><br><span class="line">选项：</span><br><span class="line">	<span class="literal">-l</span>：只统计行数</span><br><span class="line">	<span class="literal">-w</span>：只统计单词数</span><br><span class="line">	<span class="literal">-m</span>：只统计字符数</span><br></pre></td></tr></table></figure>

<h1 id="shell快速入门（ali）"><a href="#shell快速入门（ali）" class="headerlink" title="shell快速入门（ali）"></a>shell快速入门（ali）</h1><h2 id="1-Shell-概述"><a href="#1-Shell-概述" class="headerlink" title="1.Shell 概述"></a>1.Shell 概述</h2><p>Shell是一个<code>命令行解释器</code>，他接受应用程序&#x2F;用户命令，然后调用操作系统内核<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/5c193ae2e8914fb58765ecb7d197f6a7.png" alt="在这里插入图片描述"><br>Shell还是一个功能相当强大的编程语言，易编写、易调试、灵活性强</p>
<h2 id="1-1Linux-提供的-Shell-解析器有"><a href="#1-1Linux-提供的-Shell-解析器有" class="headerlink" title="1.1Linux 提供的 Shell 解析器有"></a>1.1Linux 提供的 Shell 解析器有</h2><p>[root@hadoop100 ~]# cat &#x2F;etc&#x2F;shells</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/3969023c07564983801d67d2e6ac8afe.png" alt="加粗样式"><br><strong>ubuntu使用的解析器是dash</strong></p>
<h2 id="1-2bash-和-sh-的关系"><a href="#1-2bash-和-sh-的关系" class="headerlink" title="1.2bash 和 sh 的关系"></a>1.2bash 和 sh 的关系</h2><ul>
<li>[root@hadoop100 ~]# ls -l &#x2F;bin&#x2F; | grep bash</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/7ae8685aa32f4649926210281a30ed1c.png" alt="在这里插入图片描述"></p>
<h2 id="1-3Centos-默认的解析器是-bash"><a href="#1-3Centos-默认的解析器是-bash" class="headerlink" title="1.3Centos 默认的解析器是 bash"></a>1.3Centos 默认的解析器是 bash</h2><p>[root@hadoop100 ~]# echo $SHELL<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/20b1abeca58840518aef74199cbfd269.png" alt="在这里插入图片描述"></p>
<h2 id="2-Shell-脚本入门"><a href="#2-Shell-脚本入门" class="headerlink" title="2.Shell 脚本入门"></a>2.Shell 脚本入门</h2><h2 id="2-1脚本格式"><a href="#2-1脚本格式" class="headerlink" title="2.1脚本格式"></a>2.1脚本格式</h2><p>脚本以<code>#!/bin/bash </code>开头（指定解析器）</p>
<h2 id="2-2第一个-Shell-脚本：helloworld-sh"><a href="#2-2第一个-Shell-脚本：helloworld-sh" class="headerlink" title="2.2第一个 Shell 脚本：helloworld.sh"></a>2.2第一个 Shell 脚本：helloworld.sh</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一般情况下加上.sh后缀，也可以不加.sh后缀</span><br></pre></td></tr></table></figure>

<h3 id="2-2-1需求"><a href="#2-2-1需求" class="headerlink" title="2.2.1需求"></a>2.2.1需求</h3><p>创建一个 Shell 脚本，输出 helloworld</p>
<h3 id="2-2-2实践"><a href="#2-2-2实践" class="headerlink" title="2.2.2实践"></a>2.2.2实践</h3><p>先创建一个目录scripts（可以不创建，我这里为了好管理，又重新创建了一个目录），然后进入该目录，在目录里创建一个hello.sh的文件，进行编辑<br>[root@hadoop100 ~]# mkdir scripts<br>[root@hadoop100 ~]# cd scripts&#x2F;<br>[root@hadoop100 scripts]# touch hello.sh<br>[root@hadoop100 scripts]# vim hello.sh<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/97cf3db6d15c4a8caeac192af76dbc73.png" alt="在这里插入图片描述"><br>在hello.sh中写如下代码</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello,world&quot;</span></span><br></pre></td></tr></table></figure>


<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/005f061c5b414d3f97ee446da62c99c8.png" alt="在这里插入图片描述"></p>
<h2 id="2-3脚本的常用执行方式"><a href="#2-3脚本的常用执行方式" class="headerlink" title="2.3脚本的常用执行方式"></a>2.3脚本的常用执行方式</h2><h3 id="2-3-1第一种：采用-bash-或-sh-脚本的相对路径或绝对路径（不用赋予脚本-x-权限）"><a href="#2-3-1第一种：采用-bash-或-sh-脚本的相对路径或绝对路径（不用赋予脚本-x-权限）" class="headerlink" title="2.3.1第一种：采用 bash 或 sh+脚本的相对路径或绝对路径（不用赋予脚本+x 权限）"></a>2.3.1第一种：采用 bash 或 sh+脚本的相对路径或绝对路径（不用赋予脚本+x 权限）</h3><h4 id="2-3-1-1sh-脚本的相对路径"><a href="#2-3-1-1sh-脚本的相对路径" class="headerlink" title="2.3.1.1sh+脚本的相对路径"></a>2.3.1.1sh+脚本的相对路径</h4><p>[root@hadoop100 scripts]# sh .&#x2F;hello.sh<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/cad738c5b0c44c8ea41e387072841817.png" alt="在这里插入图片描述"></p>
<h4 id="2-3-1-2sh-脚本的绝对路径"><a href="#2-3-1-2sh-脚本的绝对路径" class="headerlink" title="2.3.1.2sh+脚本的绝对路径"></a>2.3.1.2sh+脚本的绝对路径</h4><p>[root@hadoop100 scripts]# sh &#x2F;root&#x2F;scripts&#x2F;hello.sh</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/f7cf0a824b6544529cee763c54513da9.png" alt="在这里插入图片描述"></p>
<h4 id="2-3-1-3bash-脚本的相对路径"><a href="#2-3-1-3bash-脚本的相对路径" class="headerlink" title="2.3.1.3bash+脚本的相对路径"></a>2.3.1.3bash+脚本的相对路径</h4><p>[root@hadoop100 scripts]# bash .&#x2F;hello.sh<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/dea4a592504e4eafb859c9111cdeffc3.png" alt="在这里插入图片描述"></p>
<h4 id="2-3-1-4bash-脚本的绝对路径"><a href="#2-3-1-4bash-脚本的绝对路径" class="headerlink" title="2.3.1.4bash+脚本的绝对路径"></a>2.3.1.4bash+脚本的绝对路径</h4><p>[root@hadoop100 scripts]# bash &#x2F;root&#x2F;scripts&#x2F;hello.sh</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/d6723b990b9d4013a52f48bdb14f5e9a.png" alt="在这里插入图片描述"></p>
<h3 id="2-3-2第二种：采用输入脚本的绝对路径或相对路径执行脚本（必须具有可执行权限-x）"><a href="#2-3-2第二种：采用输入脚本的绝对路径或相对路径执行脚本（必须具有可执行权限-x）" class="headerlink" title="2.3.2第二种：采用输入脚本的绝对路径或相对路径执行脚本（必须具有可执行权限+x）"></a>2.3.2第二种：采用输入脚本的绝对路径或相对路径执行脚本（必须具有可执行权限+x）</h3><h4 id="2-3-2-1首先要赋予-helloworld-sh-脚本的-x-权限"><a href="#2-3-2-1首先要赋予-helloworld-sh-脚本的-x-权限" class="headerlink" title="2.3.2.1首先要赋予 helloworld.sh 脚本的+x 权限"></a>2.3.2.1首先要赋予 helloworld.sh 脚本的+x 权限</h4><p>[root@hadoop100 scripts]# chmod +x hello.sh</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/682ff8af078846f9bda971c350dfb671.png" alt="在这里插入图片描述"></p>
<h4 id="2-3-2-2执行脚本"><a href="#2-3-2-2执行脚本" class="headerlink" title="2.3.2.2执行脚本"></a>2.3.2.2执行脚本</h4><h5 id="2-3-2-2-1相对路径"><a href="#2-3-2-2-1相对路径" class="headerlink" title="2.3.2.2.1相对路径"></a>2.3.2.2.1相对路径</h5><p>[root@hadoop100 scripts]# .&#x2F;hello.sh</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/dcbc192c54b94cf69e62da207117386a.png" alt="在这里插入图片描述"><br>[root@hadoop100 scripts]# hello.sh<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/06fd0ba14b9d4c548e9bdbc81a86c562.png" alt="在这里插入图片描述"><br><code>如果直接这样敲的话就会被认为是一条命令去执行</code></p>
<h5 id="2-3-2-2-1绝对路径"><a href="#2-3-2-2-1绝对路径" class="headerlink" title="2.3.2.2.1绝对路径"></a>2.3.2.2.1绝对路径</h5><p>[root@hadoop100 scripts]# &#x2F;root&#x2F;scripts&#x2F;hello.sh</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/02b3b76fc4a14c7ca1169b7b2d102bda.png" alt="在这里插入图片描述"></p>
<h3 id="2-3-3注意"><a href="#2-3-3注意" class="headerlink" title="2.3.3注意"></a>2.3.3注意</h3><blockquote>
<p>第一种执行方法，本质是 bash 解析器帮你执行脚本，所以脚本本身不需要执行 权限。第二种执行方法，本质是脚本需要自己执行，所以需要执行权限。</p>
</blockquote>
<h3 id="2-3-4第三种：在脚本的路径前加上“-”或者-source（了解）"><a href="#2-3-4第三种：在脚本的路径前加上“-”或者-source（了解）" class="headerlink" title="2.3.4第三种：在脚本的路径前加上“.”或者 source（了解）"></a>2.3.4第三种：在脚本的路径前加上“.”或者 source（了解）</h3><h4 id="2-3-4-1-source命令绝对路径"><a href="#2-3-4-1-source命令绝对路径" class="headerlink" title="2.3.4.1 source命令绝对路径"></a>2.3.4.1 source命令绝对路径</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/bd06f0d0266c45259a74e10f2973ba50.png" alt="在这里插入图片描述"></p>
<h4 id="2-3-4-2source命令相对路径"><a href="#2-3-4-2source命令相对路径" class="headerlink" title="2.3.4.2source命令相对路径"></a>2.3.4.2source命令相对路径</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/233e13183911495589b8a9a0744a0447.png" alt="在这里插入图片描述"></p>
<h4 id="2-3-4-3-“-”命令绝对路径"><a href="#2-3-4-3-“-”命令绝对路径" class="headerlink" title="2.3.4.3 “.”命令绝对路径"></a>2.3.4.3 “.”命令绝对路径</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/c1bbcc7f1ec645e8ad7106abfd44bd0a.png" alt="在这里插入图片描述"></p>
<h4 id="2-3-4-4-“-”命令相对路径"><a href="#2-3-4-4-“-”命令相对路径" class="headerlink" title="2.3.4.4 “.”命令相对路径"></a>2.3.4.4 “.”命令相对路径</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/f2fb9f5713194d2fb75fbe6169848409.png" alt="在这里插入图片描述"></p>
<h4 id="2-3-4-5注意"><a href="#2-3-4-5注意" class="headerlink" title="2.3.4.5注意"></a>2.3.4.5注意<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0178556e577042e59d9dc388208ea829.png" alt="在这里插入图片描述"></h4><p>这两个的区别在于第一个“.”是命令，而下面那个表示的是相对路径，因为“.”第三种情况是使脚本内容在当前 shell 里执行，所以不用加&#x2F;来表示相对路径，而第一种和第二种是打开一个子 shell 来执行脚本内容，所以需要加.&#x2F;来表示相对路径</p>
<h3 id="2-3-7子shell"><a href="#2-3-7子shell" class="headerlink" title="2.3.7子shell"></a>2.3.7子shell</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/9ba432ccaebc49ee9fd1135a1b53aafb.png" alt="在这里插入图片描述"><br>相当于嵌套for循环，子shell的变量在父shell里面不能用，如果退出的话是先从最内层退出，然后再到最外层，相当于在在for循环里面写break，是一层一层的退出</p>
<h3 id="2-3-6一般使用第二种方式执行脚本语言"><a href="#2-3-6一般使用第二种方式执行脚本语言" class="headerlink" title="2.3.6一般使用第二种方式执行脚本语言"></a>2.3.6一般使用第二种方式执行脚本语言</h3><h4 id="2-3-6-1如果把要执行的脚本放到系统命令里（bin目录或者sbin目录）"><a href="#2-3-6-1如果把要执行的脚本放到系统命令里（bin目录或者sbin目录）" class="headerlink" title="2.3.6.1如果把要执行的脚本放到系统命令里（bin目录或者sbin目录）"></a>2.3.6.1如果把要执行的脚本放到系统命令里（bin目录或者sbin目录）</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/bddd44ed069e4051acd6c621fc3a251b.png" alt="在这里插入图片描述"><br>但是这种情况不靠谱，因为这个目录里面是系统的命令，因此不要轻易更改</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/e21a025149444cc0b22ba3557db3cd4f.png" alt="在这里插入图片描述"></p>
<h4 id="2-3-6-2更改环境变量"><a href="#2-3-6-2更改环境变量" class="headerlink" title="2.3.6.2更改环境变量"></a>2.3.6.2更改环境变量</h4><p>可以通过更改环境变量来直接执行脚本，可以将hello.sh放到&#x2F;root&#x2F;bin里面，或者直接将scripts目录放到环境变量里也可以<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/5d68442c7ef34e7b9315475797e81b3d.png" alt="在这里插入图片描述"></p>
<h3 id="2-3-7总结"><a href="#2-3-7总结" class="headerlink" title="2.3.7总结"></a>2.3.7总结</h3><p>原因： 前两种方式都是在当前 shell 中打开一个子 shell 来执行脚本内容，当脚本内容结束，则 子 shell 关闭，回到父 shell 中。<br>第三种，也就是使用在脚本路径前加“.”或者 source 的方式，<code>可以使脚本内容在当前 shell 里执行，而无需打开子 shell！</code>这也是为什么我们每次要修改完&#x2F;etc&#x2F;profile 文件以后，需 要 source 一下的原因。<br>开子 shell 与不开子 shell 的区别就在于，环境变量的继承关系，如在子 shell 中设置的 当前变量，父 shell 是不可见的。</p>
<p>比如 更改linux中的.profile配置文件，发现没有及时生效，然后直接source 改过的文件，所有更改的环境配置文件都生效了</p>
<h2 id="3-变量"><a href="#3-变量" class="headerlink" title="3.变量"></a>3.变量</h2><h2 id="3-1系统预定义变量"><a href="#3-1系统预定义变量" class="headerlink" title="3.1系统预定义变量"></a>3.1系统预定义变量</h2><h3 id="3-1-1常用系统变量"><a href="#3-1-1常用系统变量" class="headerlink" title="3.1.1常用系统变量"></a>3.1.1常用系统变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$HOME、$PWD、$SHELL、$USER 等</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/10691094fa294386bd217c9b7e597e0e.png" alt="在这里插入图片描述"></p>
<h3 id="3-1-2看所有的全局变量值"><a href="#3-1-2看所有的全局变量值" class="headerlink" title="3.1.2看所有的全局变量值"></a>3.1.2看所有的全局变量值</h3><p>[root@hadoop100 scripts]# env<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/d07714344baa4c56aafe9ea9eca6d67d.png" alt="在这里插入图片描述"><br>如果想看的方便可以加 | less</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/86dc0495431540bb94ad2eff63793f11.png" alt="在这里插入图片描述"><br>[root@hadoop100 scripts]# printenv<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/981c1b580f2f4ac7a39cd6d6a5dbbd37.png" alt="在这里插入图片描述"><br>[root@hadoop100 scripts]# printenv USER<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/9c00b4adceb14272b23ce1826ce9b2d5.png" alt="在这里插入图片描述"><br>这样输入的时候不用加$符号，他可打印全部或部分shell 环境</p>
<p>[root@hadoop100 scripts]# set</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/f87168be37694c6cb6de48db6cc2695b.png" alt="在这里插入图片描述"></p>
<p>看所有变量包括全局变量和自定义变量局部变量</p>
<h2 id="3-2自定义变量"><a href="#3-2自定义变量" class="headerlink" title="3.2自定义变量"></a>3.2自定义变量</h2><h3 id="3-2-1基本语法"><a href="#3-2-1基本语法" class="headerlink" title="3.2.1基本语法"></a>3.2.1基本语法</h3><p>1）定义变量：变量名&#x3D;变量值，注意，<code>=号前后不能有空格</code><br>2）撤销变量：unset 变量名<br>3）声明静态变量：readonly 变量，注意：<code>不能 unset</code></p>
<h3 id="3-2-2变量定义规则"><a href="#3-2-2变量定义规则" class="headerlink" title="3.2.2变量定义规则"></a>3.2.2变量定义规则</h3><p>1）变量名称可以由字母、数字和下划线组成，但是不能以数字开头，<code>环境变量名建议大写</code>。<br>2）等号两侧不能有空格<br>3）<code>在 bash 中，变量默认类型都是字符串类型，无法直接进行数值运算</code>。<br>4）变量的值如果有空格，需要使用双引号或单引号括起来。</p>
<h3 id="3-2-3案例"><a href="#3-2-3案例" class="headerlink" title="3.2.3案例"></a>3.2.3案例</h3><h4 id="3-2-3-1定义变量a"><a href="#3-2-3-1定义变量a" class="headerlink" title="3.2.3.1定义变量a"></a>3.2.3.1定义变量a</h4><p>[root@hadoop100 scripts]# a&#x3D;2</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/3bebaf03cf3449e981935bade72d2e31.png" alt="在这里插入图片描述"></p>
<h4 id="3-2-3-2查看没有定义的sssshell"><a href="#3-2-3-2查看没有定义的sssshell" class="headerlink" title="3.2.3.2查看没有定义的sssshell"></a>3.2.3.2查看没有定义的sssshell</h4><p>[root@hadoop100 scripts]# echo $sssshell<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/aab6b88dbda44940be4c34ce2f3fab60.png" alt="在这里插入图片描述"></p>
<h4 id="3-2-3-3“-”号前后有空格的情况"><a href="#3-2-3-3“-”号前后有空格的情况" class="headerlink" title="3.2.3.3“&#x3D;”号前后有空格的情况"></a>3.2.3.3“&#x3D;”号前后有空格的情况</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/58443fd94bf14ad898a57960f62473ea.png" alt="在这里插入图片描述"></p>
<h4 id="3-2-3-4更改变量的值"><a href="#3-2-3-4更改变量的值" class="headerlink" title="3.2.3.4更改变量的值"></a>3.2.3.4更改变量的值</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/10380bf8ca144c31831b64585f02d67d.png" alt="在这里插入图片描述"></p>
<h4 id="3-2-3-5当要赋值的内容有空格的时候需要加上单引号或者双引号"><a href="#3-2-3-5当要赋值的内容有空格的时候需要加上单引号或者双引号" class="headerlink" title="3.2.3.5当要赋值的内容有空格的时候需要加上单引号或者双引号"></a>3.2.3.5当要赋值的内容有空格的时候需要加上单引号或者双引号</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/c719f826ce3e4548a3ca1d52844a5b30.png" alt="在这里插入图片描述"></p>
<h4 id="3-2-3-6局部变量和全局变量"><a href="#3-2-3-6局部变量和全局变量" class="headerlink" title="3.2.3.6局部变量和全局变量"></a>3.2.3.6局部变量和全局变量</h4><p>env只能查系统所设置的全局变量，而set可以查看所有定义的变量，到这步还不能完全知道ssshell是局部变量还是全局变量继续往下走<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/ee51562597ac4b0eab748df9200e30cd.png" alt="在这里插入图片描述"><br>打开一个子shell<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/707c6c7292ca4c4090f6691523af8583.png" alt="在这里插入图片描述"><br>说明ssshell是局部变量</p>
<h4 id="3-2-3-7将ssshell定义成全局变量"><a href="#3-2-3-7将ssshell定义成全局变量" class="headerlink" title="3.2.3.7将ssshell定义成全局变量"></a>3.2.3.7将ssshell定义成全局变量</h4><p>当我们需要在子shell里使用ssshell变量时，我们需要将ssshell定义成全局变量，定义ssshell变成全局变量的时候需要在创建ssshell的父shell变，不能在其他子shell变<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/a64e03019ccc4ced84524cf30716071f.png" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/ced9b2318647498ba2dc16e3065d9259.png" alt="在这里插入图片描述"></p>
<h4 id="3-2-3-8在子shell中更改父shell全局变量只在子shell有效，回到父shell里不会改变"><a href="#3-2-3-8在子shell中更改父shell全局变量只在子shell有效，回到父shell里不会改变" class="headerlink" title="3.2.3.8在子shell中更改父shell全局变量只在子shell有效，回到父shell里不会改变"></a>3.2.3.8在子shell中更改父shell全局变量只在子shell有效，回到父shell里不会改变</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/1747243ed568405fb720d82948c07ce4.png" alt="在这里插入图片描述"></p>
<h4 id="3-2-3-9用vim输出全局变量和局部变量的区别"><a href="#3-2-3-9用vim输出全局变量和局部变量的区别" class="headerlink" title="3.2.3.9用vim输出全局变量和局部变量的区别"></a>3.2.3.9用vim输出全局变量和局部变量的区别</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/49391e87999f498cbdf94aef9735683c.png" alt="在这里插入图片描述"><br>在hello.sh中加上局部变量sssshell然后执行hello.sh的结果为<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/6a68bd0b193149609e691da82198c474.png" alt="在这里插入图片描述"></p>
<p>如果用绝对路径的话是没有hello，linux这条的，因为sssshell是局部变量</p>
<p>把sssshell变量变为全局变量结果为<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/6c632cd289954bd7b787574ecfe0c8cb.png" alt="在这里插入图片描述"><br>这两个都显示</p>
<h4 id="3-2-3-10在set中看自定义变量"><a href="#3-2-3-10在set中看自定义变量" class="headerlink" title="3.2.3.10在set中看自定义变量"></a>3.2.3.10在set中看自定义变量</h4><p>定义了a变量，在set里面可以找到</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/a3205b1739664cc6829046df4b3b71a0.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0fbb82578cee4d8c830e02593aeebd9f.png" alt="在这里插入图片描述"></p>
<h4 id="3-2-3-11声明静态变量"><a href="#3-2-3-11声明静态变量" class="headerlink" title="3.2.3.11声明静态变量"></a>3.2.3.11声明静态变量</h4><p>[root@hadoop100 ~]# readonly b&#x3D;2<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/ec739ed15a1e4a8b855c1485edd40c5c.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0db3e666060b40b69763219b0a885663.png" alt="在这里插入图片描述"><br>静态变量和局部变量都在set里面</p>
<h4 id="3-2-3-12撤销变量a"><a href="#3-2-3-12撤销变量a" class="headerlink" title="3.2.3.12撤销变量a"></a>3.2.3.12撤销变量a</h4><p>[root@hadoop100 ~]# unset a</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/b8d6b14911ff4fe9bed9113117924686.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/5960599d297041dab7efbfb754500dda.png" alt="在这里插入图片描述"><br>set里面没有a变量了</p>
<h4 id="3-2-3-13不能撤销静态变量"><a href="#3-2-3-13不能撤销静态变量" class="headerlink" title="3.2.3.13不能撤销静态变量"></a>3.2.3.13不能撤销静态变量</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/d55071d18a0743a0b5b4ae9f657165b3.png" alt="在这里插入图片描述"></p>
<h4 id="3-2-3-14在-bash-中，变量默认类型都是字符串类型，无法直接进行数值运算"><a href="#3-2-3-14在-bash-中，变量默认类型都是字符串类型，无法直接进行数值运算" class="headerlink" title="3.2.3.14在 bash 中，变量默认类型都是字符串类型，无法直接进行数值运算"></a>3.2.3.14在 bash 中，变量默认类型都是字符串类型，无法直接进行数值运算</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/e9b0897f8e9e499e96e7c844aa20d706.png" alt="在这里插入图片描述"></p>
<h4 id="3-2-3-15如果进行数值运算需要使用，需要使用shell中的运算符的表达"><a href="#3-2-3-15如果进行数值运算需要使用，需要使用shell中的运算符的表达" class="headerlink" title="3.2.3.15如果进行数值运算需要使用，需要使用shell中的运算符的表达"></a>3.2.3.15如果进行数值运算需要使用，需要使用shell中的运算符的表达</h4><p>[root@hadoop100 ~]# a&#x3D;$((1+4))</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/faff1c96493f4f8f8d6fc0dd2b85a798.png" alt="在这里插入图片描述"><br>[root@hadoop100 ~]# a&#x3D;$[5+2]</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/fa47a651738b4ca4862a725b547d6da0.png" alt="在这里插入图片描述"></p>
<h2 id="3-3特殊变量"><a href="#3-3特殊变量" class="headerlink" title="3.3特殊变量"></a>3.3特殊变量</h2><h3 id="3-3-1-n"><a href="#3-3-1-n" class="headerlink" title="3.3.1$n"></a>3.3.1$n</h3><h4 id="3-3-1-1基本语法"><a href="#3-3-1-1基本语法" class="headerlink" title="3.3.1.1基本语法"></a>3.3.1.1基本语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$n （功能描述：n 为数字，$0 代表该脚本名称，$1-$9 代表第一到第九个参数，</span><br><span class="line">十以上的参数，十以上的参数需要用大括号包含，如$&#123;10&#125;）</span><br></pre></td></tr></table></figure>

<h4 id="3-3-1-2案例实操"><a href="#3-3-1-2案例实操" class="headerlink" title="3.3.1.2案例实操"></a>3.3.1.2案例实操</h4><h5 id="3-3-1-2-1在vim里面””和’’的区别"><a href="#3-3-1-2-1在vim里面””和’’的区别" class="headerlink" title="3.3.1.2.1在vim里面””和’’的区别"></a>3.3.1.2.1在vim里面””和’’的区别</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用双引号扩住$n和用单引号扩住$n</span><br><span class="line">双引号扩住$n代码变量</span><br><span class="line">不管单引号扩住什么都原封不动的输出</span><br></pre></td></tr></table></figure>

<h5 id="3-3-1-2-2-n的使用"><a href="#3-3-1-2-2-n的使用" class="headerlink" title="3.3.1.2.2$n的使用"></a>3.3.1.2.2$n的使用</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/1f2b21257f62432fa9e7d5cca2394c4c.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/5d319b96447a472395430612696276c5.png" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0bcb83101ac749bda63c59316fab124d.png" alt="在这里插入图片描述"><br>用绝对路径的话需要给parameter.sh加上执行权限<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/936594f3bbf049378db91148f618e944.png" alt="在这里插入图片描述"></p>
<h3 id="3-3-2"><a href="#3-3-2" class="headerlink" title="3.3.2$"></a>3.3.2$</h3><h4 id="3-3-2-1基本语法"><a href="#3-3-2-1基本语法" class="headerlink" title="3.3.2.1基本语法"></a>3.3.2.1基本语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$# （功能描述：获取所有输入参数个数，</span><br><span class="line">常用于循环,判断参数的个数是否正确以及 加强脚本的健壮性）。</span><br></pre></td></tr></table></figure>

<h4 id="3-3-2-2"><a href="#3-3-2-2" class="headerlink" title="3.3.2.2$"></a>3.3.2.2$</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/b3e3ccf2f8e14e7e8ef8a720f48eae5d.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/fc76eb9cedb64baca73f34f8eb14352d.png" alt="在这里插入图片描述"></p>
<h3 id="3-3-3-、"><a href="#3-3-3-、" class="headerlink" title="3.3.3 $*、$@"></a>3.3.3 <code>$*、$@</code></h3><h4 id="3-3-3-1基本语法"><a href="#3-3-3-1基本语法" class="headerlink" title="3.3.3.1基本语法"></a>3.3.3.1基本语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$* （功能描述：这个变量代表命令行中所有的参数，$*把所有的参数看成一个整体） </span><br><span class="line">$@ （功能描述：这个变量也代表命令行中所有的参数，不过$@把每个参数区分对待）</span><br></pre></td></tr></table></figure>

<h4 id="3-3-3-2-的使用"><a href="#3-3-3-2-的使用" class="headerlink" title="3.3.3.2$*$@的使用"></a>3.3.3.2<code>$*$@</code>的使用</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/fd19dcf91bf14034b7380dccff58dcd4.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/6db8c0492b2241ff9ad9e82c5c6d1e18.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/85ceaad1afef4659a4bf729900ca35e9.png" alt="在这里插入图片描述"></p>
<h3 id="3-3-3-？"><a href="#3-3-3-？" class="headerlink" title="3.3.3$？"></a>3.3.3$？</h3><h4 id="3-3-3-1基本语法-1"><a href="#3-3-3-1基本语法-1" class="headerlink" title="3.3.3.1基本语法"></a>3.3.3.1基本语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$？ （功能描述：最后一次执行的命令的返回状态。如果这个变量的值为 0，证明上一 个命令正确执行；</span><br><span class="line">如果这个变量的值为非 0（具体是哪个数，由命令自己来决定），则证明 上一个命令执行不正确了。）</span><br></pre></td></tr></table></figure>

<h4 id="3-3-3-2判断-parameter-sh-脚本是否正确执行"><a href="#3-3-3-2判断-parameter-sh-脚本是否正确执行" class="headerlink" title="3.3.3.2判断 parameter.sh 脚本是否正确执行"></a>3.3.3.2判断 parameter.sh 脚本是否正确执行</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/a3e95679059b4c048d53b7180709210a.png" alt="在这里插入图片描述"></p>
<h2 id="4-运算符"><a href="#4-运算符" class="headerlink" title="4.运算符"></a>4.运算符</h2><h2 id="4-1基本语法"><a href="#4-1基本语法" class="headerlink" title="4.1基本语法"></a>4.1基本语法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">“$((运算式))” 或 “$[运算式]”</span><br></pre></td></tr></table></figure>

<h3 id="4-1-1expr方法"><a href="#4-1-1expr方法" class="headerlink" title="4.1.1expr方法"></a>4.1.1expr方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用expr输出+、-、*、%</span><br><span class="line">符号(+、-、*、%)两边需要空格隔开</span><br><span class="line">用*的时候需要用这个\，因为*的用处很多，所以需要区分</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/786d7ecd494e4ec898e9bdf4db8236f9.png" alt="在这里插入图片描述"></p>
<h3 id="4-1-2用expr给a赋值"><a href="#4-1-2用expr给a赋值" class="headerlink" title="4.1.2用expr给a赋值"></a>4.1.2用expr给a赋值</h3><p>需要使用命令替换</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a=$(运算式)或者用a=`运算式`</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/dd65658d85d14770be6febb2a35c2621.png" alt="在这里插入图片描述"></p>
<h3 id="4-1-3运算式或-运算式-或-运算式"><a href="#4-1-3运算式或-运算式-或-运算式" class="headerlink" title="4.1.3运算式或((运算式))或[运算式]"></a>4.1.3<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0028.png" alt="img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://yqfile.alicdn.com/mathjax/2.7.2/fonts/HTML-CSS/TeX/png/Main/Regular/400/0028.png?V=2.7.2" alt="img">运算式<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0029.png" alt="img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://yqfile.alicdn.com/mathjax/2.7.2/fonts/HTML-CSS/TeX/png/Main/Regular/400/0029.png?V=2.7.2" alt="img">或((运算式))或[运算式]</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/1374a4c554ce4faebc96915d28c246a4.png" alt="在这里插入图片描述"></p>
<h3 id="4-1-4用脚本计算两个数的和"><a href="#4-1-4用脚本计算两个数的和" class="headerlink" title="4.1.4用脚本计算两个数的和"></a>4.1.4用脚本计算两个数的和</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0cacdffbccce4da6983fab247b793305.png" alt="在这里插入图片描述"></p>
<p>在add.sh中写如下代码<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/20ce30e9d88c4eeb90da7281c5be2a72.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/f4ad4aa50cf84f86afbae0b369bb269d.png" alt="在这里插入图片描述"></p>
<h2 id="5-条件判断"><a href="#5-条件判断" class="headerlink" title="5.条件判断"></a>5.条件判断</h2><h2 id="5-1基本语法"><a href="#5-1基本语法" class="headerlink" title="5.1基本语法"></a>5.1基本语法</h2><p>1）test condition<br>2）[ condition ]（注意 condition 前后要有空格）<br>注意：条件非空即为 true，[ atguigu ]返回 true，[ ] 返回 false。</p>
<h2 id="5-2常用判断条件"><a href="#5-2常用判断条件" class="headerlink" title="5.2常用判断条件"></a>5.2常用判断条件</h2><h3 id="5-2-1两个整数之间比较"><a href="#5-2-1两个整数之间比较" class="headerlink" title="5.2.1两个整数之间比较"></a>5.2.1两个整数之间比较</h3><p>-eq 等于（equal） -ne 不等于（not equal）<br>-lt 小于（less than） -le 小于等于（less equal）<br>-gt 大于（greater than） -ge 大于等于（greater equal）<br>注：如果是字符串之间的比较 ，用等号“&#x3D;”判断相等；用“!&#x3D;”判断不等。</p>
<h3 id="5-2-2按照文件权限进行判断"><a href="#5-2-2按照文件权限进行判断" class="headerlink" title="5.2.2按照文件权限进行判断"></a>5.2.2按照文件权限进行判断</h3><p>-r 有读的权限（read）<br>-w 有写的权限（write）<br>-x 有执行的权限（execute）</p>
<h3 id="5-2-3按照文件类型进行判断"><a href="#5-2-3按照文件类型进行判断" class="headerlink" title="5.2.3按照文件类型进行判断"></a>5.2.3按照文件类型进行判断</h3><p>-e 文件存在（existence）<br>-f 文件存在并且是一个常规的文件（file）<br>-d 文件存在并且是一个目录（directory）</p>
<h3 id="5-2-4测试"><a href="#5-2-4测试" class="headerlink" title="5.2.4测试"></a>5.2.4测试</h3><h4 id="5-2-4-1test-condition"><a href="#5-2-4-1test-condition" class="headerlink" title="5.2.4.1test condition"></a>5.2.4.1test condition</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/b819cb86634242f2aa773784bf2e8228.png" alt="在这里插入图片描述"></p>
<p>测试他输出的是正确还是错误使用$?来判断，输出0则表达式为真，输出1表达式为假</p>
<h4 id="5-2-4-2-condition-（注意-condition-前后要有空格）"><a href="#5-2-4-2-condition-（注意-condition-前后要有空格）" class="headerlink" title="5.2.4.2[ condition ]（注意 condition 前后要有空格）"></a>5.2.4.2[ condition ]（注意 condition 前后要有空格）</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/8ddaed9e5af741ab838df259278bfe24.png" alt="在这里插入图片描述"><br>用[]的时候，里面的等于号两边一定要用空格空开，否则他会识别为一个整体条件非空即为 true</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/b0c1524d3e2844b6b1d609277fa950b9.png" alt="在这里插入图片描述"><br>当[]里面有东西事，则为真，只有空格时为假，如果前后不空格的话就未找到命令</p>
<h4 id="5-2-4-3在-里面使用-和！"><a href="#5-2-4-3在-里面使用-和！" class="headerlink" title="5.2.4.3在[]里面使用&#x3D;和！&#x3D;"></a>5.2.4.3在[]里面使用&#x3D;和！&#x3D;</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0345fd54cc80445f822eed55de8cfae3.png" alt="在这里插入图片描述"></p>
<h4 id="5-2-4-4-eq-等于（equal）-ne-不等于（not-equal）"><a href="#5-2-4-4-eq-等于（equal）-ne-不等于（not-equal）" class="headerlink" title="5.2.4.4-eq 等于（equal） -ne 不等于（not equal）"></a>5.2.4.4-eq 等于（equal） -ne 不等于（not equal）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果是字符串之间的比较 ，用等号“=”判断相等；用“!=”判断不等</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/f82c62fd9f7d48509e3e3e7a29c991dc.png" alt="在这里插入图片描述"></p>
<h4 id="5-2-4-5-lt-小于（less-than）-le-小于等于（less-equal）"><a href="#5-2-4-5-lt-小于（less-than）-le-小于等于（less-equal）" class="headerlink" title="5.2.4.5-lt 小于（less than） -le 小于等于（less equal）"></a>5.2.4.5-lt 小于（less than） -le 小于等于（less equal）</h4><p>不能用&lt; 和&lt;&#x3D;，因为在linux里表示输入重定向<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ucc.alicdn.com/images/user-upload-01/04819ef574b54f1b8bc0512f2f269ac1.png" alt="在这里插入图片描述"><br><code>在双小括号里可以使用（&gt; &lt; &gt;= &lt;=号）</code></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/cc2f7b4a6ae348b3acaa82b25cca1803.png" alt="在这里插入图片描述"></p>
<h4 id="5-2-4-6-gt-大于（greater-than）-ge-大于等于（greater-equal）"><a href="#5-2-4-6-gt-大于（greater-than）-ge-大于等于（greater-equal）" class="headerlink" title="5.2.4.6-gt 大于（greater than） -ge 大于等于（greater equal）"></a>5.2.4.6-gt 大于（greater than） -ge 大于等于（greater equal）</h4><p>不能用&gt;和&gt;&#x3D;，因为在linux里&gt;表示输出重定向<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/3ce0c5e5802544b296e240638aa0141c.png" alt="在这里插入图片描述"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在双小括号里可以使用（&gt; &lt; &gt;= &lt;=号）</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/e76b5946babe41f5b264cf41a0a4c5ef.png" alt="在这里插入图片描述"></p>
<h4 id="5-2-4-7判断文件权限、-r-有读的权限（read）、-w-有写的权限（write）-、-x-有执行的权限（execute）"><a href="#5-2-4-7判断文件权限、-r-有读的权限（read）、-w-有写的权限（write）-、-x-有执行的权限（execute）" class="headerlink" title="5.2.4.7判断文件权限、 -r 有读的权限（read）、 -w 有写的权限（write） 、 -x 有执行的权限（execute）"></a>5.2.4.7判断文件权限、 -r 有读的权限（read）、 -w 有写的权限（write） 、 -x 有执行的权限（execute）</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/daa7026e876e4a519b102683acbf2e93.png" alt="在这里插入图片描述"></p>
<h4 id="5-2-4-8判断文件类型、-e-文件存在（existence）、-f-文件存在并且是一个常规的文件（file）、-d-文件存在并且是一个目录（directory）"><a href="#5-2-4-8判断文件类型、-e-文件存在（existence）、-f-文件存在并且是一个常规的文件（file）、-d-文件存在并且是一个目录（directory）" class="headerlink" title="5.2.4.8判断文件类型、-e 文件存在（existence）、-f 文件存在并且是一个常规的文件（file）、-d 文件存在并且是一个目录（directory）"></a>5.2.4.8判断文件类型、-e 文件存在（existence）、-f 文件存在并且是一个常规的文件（file）、-d 文件存在并且是一个目录（directory）</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0be670645a224ff7b7971ab416e37222.png" alt="在这里插入图片描述"></p>
<h4 id="5-2-4-9多条件判断（-表示前一条命令执行成功时，才执行后一条命令，-表示上一-条命令执行失败后，才执行下一条命令）"><a href="#5-2-4-9多条件判断（-表示前一条命令执行成功时，才执行后一条命令，-表示上一-条命令执行失败后，才执行下一条命令）" class="headerlink" title="5.2.4.9多条件判断（&amp;&amp; 表示前一条命令执行成功时，才执行后一条命令，|| 表示上一 条命令执行失败后，才执行下一条命令）"></a>5.2.4.9多条件判断（&amp;&amp; 表示前一条命令执行成功时，才执行后一条命令，|| 表示上一 条命令执行失败后，才执行下一条命令）</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/2585a81813d44a11b35d25beb09d72b2.png" alt="在这里插入图片描述"></p>
<h2 id="6-流程控制（重点）"><a href="#6-流程控制（重点）" class="headerlink" title="6.流程控制（重点）"></a>6.流程控制（重点）</h2><h2 id="6-1if-判断"><a href="#6-1if-判断" class="headerlink" title="6.1if 判断"></a>6.1if 判断</h2><h3 id="6-1-1基本语法"><a href="#6-1-1基本语法" class="headerlink" title="6.1.1基本语法"></a>6.1.1基本语法</h3><p>注意事项：<br>①[ 条件判断式 ]，中括号和条件判断式之间必须有空格<br>②if 后要有空格</p>
<h4 id="6-1-1-1单分支"><a href="#6-1-1-1单分支" class="headerlink" title="6.1.1.1单分支"></a>6.1.1.1单分支</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if [ 条件判断式 ];then</span><br><span class="line"> 程序 </span><br><span class="line">fi</span><br><span class="line">或者 </span><br><span class="line">if [ 条件判断式 ] </span><br><span class="line">then</span><br><span class="line"> 程序 </span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h4 id="6-1-1-2多分支"><a href="#6-1-1-2多分支" class="headerlink" title="6.1.1.2多分支"></a>6.1.1.2多分支</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if [ 条件判断式 ] </span><br><span class="line">then</span><br><span class="line">    程序 </span><br><span class="line">elif [ 条件判断式 ] </span><br><span class="line">then</span><br><span class="line">    程序 </span><br><span class="line">else</span><br><span class="line">    程序 </span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h3 id="6-1-2案例"><a href="#6-1-2案例" class="headerlink" title="6.1.2案例"></a>6.1.2案例</h3><h4 id="6-1-2-1单分支"><a href="#6-1-2-1单分支" class="headerlink" title="6.1.2.1单分支"></a>6.1.2.1单分支</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0560ff684e5d4f8cbead9043077d4441.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/c2f85a2f21cc4c60aae8d36b944b678d.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/b1d20c3a82154386a521872acd114637.png" alt="在这里插入图片描述"><br>当这样写的时候，没有传入参数时，会报错的，所以要按照下面的做法做</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/4ff748be0ffe4bad9e6003e8f096877d.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/65c45e6ea6fb470bb4f92b277f0a0cc8.png" alt="在这里插入图片描述"><br>这样的话就不会报错了，因为要是不输入参数的时候两边也都不会为空</p>
<h4 id="6-1-2-2用逻辑与-逻辑或-连接（单分支）"><a href="#6-1-2-2用逻辑与-逻辑或-连接（单分支）" class="headerlink" title="6.1.2.2用逻辑与&amp;&amp;逻辑或||连接（单分支）"></a>6.1.2.2用逻辑与&amp;&amp;逻辑或||连接（单分支）</h4><h5 id="6-1-2-2-1逻辑与"><a href="#6-1-2-2-1逻辑与" class="headerlink" title="6.1.2.2.1逻辑与&amp;&amp;"></a>6.1.2.2.1逻辑与&amp;&amp;</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/c20159a74c624c2787ffaacc3072d87f.png" alt="在这里插入图片描述"></p>
<p>在中括号里面的话就不用&amp;&amp;而是用-a（-and）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0fc4202c4f0f416dbd076c66677fb8b5.png" alt="在这里插入图片描述"></p>
<h5 id="6-1-2-2-2逻辑或"><a href="#6-1-2-2-2逻辑或" class="headerlink" title="6.1.2.2.2逻辑或||"></a>6.1.2.2.2逻辑或||</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/ccf579f3a34d4e67ba372f40b99c0734.png" alt="在这里插入图片描述"></p>
<p>在中括号里面的话就不用||而是用-o（-or）<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/5a65cb903060436e83d4adc68562d251.png" alt="在这里插入图片描述"></p>
<h4 id="6-1-2-3多分支"><a href="#6-1-2-3多分支" class="headerlink" title="6.1.2.3多分支"></a>6.1.2.3多分支</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/1e497b31fa1a479b9022a08332cc57b0.png" alt="在这里插入图片描述"><br>..<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/a54ef226ee1847769517f6ad35d712ca.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/43197b81af19440a8b02fa8154fc438d.png" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/c2bf84696ea8475dbbca4b08b1b7f495.png" alt="在这里插入图片描述"></p>
<h2 id="6-2case-语句"><a href="#6-2case-语句" class="headerlink" title="6.2case 语句"></a>6.2case 语句</h2><h3 id="6-2-1基本语法"><a href="#6-2-1基本语法" class="headerlink" title="6.2.1基本语法"></a>6.2.1基本语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">case $变量名 in </span><br><span class="line">&quot;值 1&quot;）</span><br><span class="line">    如果变量的值等于值 1，则执行程序 1 </span><br><span class="line">;;</span><br><span class="line">&quot;值 2&quot;）</span><br><span class="line">    如果变量的值等于值 2，则执行程序 2 </span><br><span class="line">;; </span><br><span class="line">    …省略其他分支… </span><br><span class="line">*） </span><br><span class="line">    如果变量的值都不是以上的值，则执行此程序 </span><br><span class="line">;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<h3 id="6-2-2注意事项："><a href="#6-2-2注意事项：" class="headerlink" title="6.2.2注意事项："></a>6.2.2注意事项：</h3><p>（1）case 行尾必须为单词“in”，每一个模式匹配必须以右括号“）”结束。 （2）双分号“;;”表示命令序列结束，相当于 java 中的 break。<br>（3）最后的“*）”表示默认模式，相当于 java 中的 default。</p>
<h3 id="6-2-3案例cast-test-sh"><a href="#6-2-3案例cast-test-sh" class="headerlink" title="6.2.3案例cast_test.sh"></a>6.2.3案例cast_test.sh</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/f326f858396446f5ac371ef241007116.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/b23e7334c5414809870bcf1c5f0bf26a.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/a01b1325428245d4b2ff1f05aa08c449.png" alt="在这里插入图片描述"></p>
<h2 id="6-3for-循环"><a href="#6-3for-循环" class="headerlink" title="6.3for 循环"></a>6.3for 循环</h2><h3 id="6-3-1基本语法1"><a href="#6-3-1基本语法1" class="headerlink" title="6.3.1基本语法1"></a>6.3.1基本语法1</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for (( 初始值;循环控制条件;变量变化 )) </span><br><span class="line">do </span><br><span class="line">    程序 </span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="6-3-2基本语法-2"><a href="#6-3-2基本语法-2" class="headerlink" title="6.3.2基本语法 2"></a>6.3.2基本语法 2</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for 变量 in 值 1 值 2 值 3… </span><br><span class="line">do </span><br><span class="line">    程序 </span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="6-3-3案例"><a href="#6-3-3案例" class="headerlink" title="6.3.3案例"></a>6.3.3案例</h3><h4 id="6-3-3-1for-初始值-循环控制条件-变量变化"><a href="#6-3-3-1for-初始值-循环控制条件-变量变化" class="headerlink" title="6.3.3.1for (( 初始值;循环控制条件;变量变化 ))"></a>6.3.3.1for (( 初始值;循环控制条件;变量变化 ))</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/19a54755e442431b88114118fd8b6fb3.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/7342bcb337a340cab81d02f18840f046.png" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/19f22bc485a34a06985305f4536afb31.png" alt="在这里插入图片描述"></p>
<h4 id="6-3-3-2“-”在linux-shell里面表示生成序列"><a href="#6-3-3-2“-”在linux-shell里面表示生成序列" class="headerlink" title="6.3.3.2“{}”在linux shell里面表示生成序列"></a>6.3.3.2“{}”在linux shell里面表示生成序列</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/56ab13d84c494424b8ba57dda0e875ca.png" alt="在这里插入图片描述"></p>
<p>{1..100}表示从1到100，<code>中间是两个点，别看错了</code></p>
<h4 id="6-3-3-3for-变量-in-值-1-值-2-值-3…"><a href="#6-3-3-3for-变量-in-值-1-值-2-值-3…" class="headerlink" title="6.3.3.3for 变量 in 值 1 值 2 值 3…"></a>6.3.3.3for 变量 in 值 1 值 2 值 3…</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/7621c1eaa7a94abca2450053c37b1fb0.png" alt="在这里插入图片描述"></p>
<h4 id="6-3-3-2在for循环中-和-的区别"><a href="#6-3-3-2在for循环中-和-的区别" class="headerlink" title="6.3.3.2在for循环中$*和$@的区别"></a>6.3.3.2在for循环中<code>$*和$@的区别</code></h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/376fdcef17b6498ebd642da9461b0bc5.png" alt="在这里插入图片描述"><br>当<code>$*和$@</code>没有加双引号的时候输出结果为下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/45a4580dcb1d4a65b5d12f10e16d4c9a.png" alt="在这里插入图片描述"><br>他们两个的输出结果一致</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/f88dc7238a19462792b6a2246de28e48.png" alt="在这里插入图片描述"></p>
<p>当加上双引号后。结果如下：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/32d9b51763f446fa95f971ee0dffa144.png" alt="在这里插入图片描述"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">当它们被双引号“”包含时，</span><br><span class="line">$*会将所有的参数作为一个整体，以“$1 $2 …$n”的形式输 出所有参数；</span><br><span class="line">$@会将各个参数分开，以“$1” “$2”…“$n”的形式输出所有参数。</span><br></pre></td></tr></table></figure>

<h2 id="6-4while-循环"><a href="#6-4while-循环" class="headerlink" title="6.4while 循环"></a>6.4while 循环</h2><h3 id="6-4-1基本语法"><a href="#6-4-1基本语法" class="headerlink" title="6.4.1基本语法"></a>6.4.1基本语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while [ 条件判断式 ] </span><br><span class="line">do </span><br><span class="line">    程序 </span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="6-4-2从1加到100"><a href="#6-4-2从1加到100" class="headerlink" title="6.4.2从1加到100"></a>6.4.2从1加到100</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/f138debe0a3a4e119a354676ef9ac1af.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/503186ebf6ba4e908539b331e69aed67.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/e118727aa1b8402da5bf51c96a7b3367.png" alt="在这里插入图片描述"></p>
<h3 id="6-4-3let用法"><a href="#6-4-3let用法" class="headerlink" title="6.4.3let用法"></a>6.4.3let用法</h3><p>在新版shell中支持用let的，他的语言是和高级语言差不多的<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0adad4dd70e145d992c147de7015681e.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0e301ecd89cc48af908bcd04fd407220.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/60dfe3b0a0d14350ad8cb037c1ab9493.png" alt="在这里插入图片描述"></p>
<h2 id="7-read-读取控制台输入"><a href="#7-read-读取控制台输入" class="headerlink" title="7.read 读取控制台输入"></a>7.read 读取控制台输入</h2><p>read 是 Shell 内置命令，用来从标准输入中读取数据并赋值给变量。如果没有进行重定向，默认就是从键盘读取用户输入的数据；如果进行了重定向，那么可以从文件中读取数据。</p>
<h2 id="7-1基本语法"><a href="#7-1基本语法" class="headerlink" title="7.1基本语法"></a>7.1基本语法</h2><p>read (options) (variables)</p>
<p>options表示选项，如下表所示；<br>variables表示用来存储数据的变量，可以有一个，也可以有多个。<br>options和variables都是可选的，如果没有提供变量名，那么读取的数据将存放到环境变量 REPLY 中。<br>①options：</p>
<ul>
<li>-p：指定读取值时的提示符；</li>
<li>-t：指定读取值时等待的时间（秒）如果-t 不加表示一直等待</li>
</ul>
<p>②variables</p>
<ul>
<li>变量：指定读取值的变量名</li>
</ul>
<h2 id="7-2read的使用"><a href="#7-2read的使用" class="headerlink" title="7.2read的使用"></a>7.2read的使用</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/bbaa404c2bae4bdbb97a281d171e9db8.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/eedfd21fefb6470d9edae49849967559.png" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/e5de0fc6063e4da5b69f72889df8c970.png" alt="在这里插入图片描述"></p>
<p>如果超过设置的时间，则直接跳过<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/c6964e6811d84194bbebbca9dab476f1.png" alt="在这里插入图片描述"></p>
<h2 id="8-函数"><a href="#8-函数" class="headerlink" title="8.函数"></a>8.函数</h2><h2 id="8-1系统函数"><a href="#8-1系统函数" class="headerlink" title="8.1系统函数"></a>8.1系统函数</h2><h3 id="8-1-1basename"><a href="#8-1-1basename" class="headerlink" title="8.1.1basename"></a>8.1.1basename</h3><h4 id="8-1-1-1基本语法"><a href="#8-1-1-1基本语法" class="headerlink" title="8.1.1.1基本语法"></a>8.1.1.1基本语法</h4><p>basename [string &#x2F; pathname] [suffix] （功能描述：basename 命令会删掉所有的前缀包括最后一个（‘&#x2F;’）字符，然后将字符串显示出来。<br>basename 可以理解为取路径里的文件名称<br>选项：<br>suffix 为后缀，如果 suffix 被指定了，basename 会将 pathname 或 string 中的 suffix 去掉。</p>
<h3 id="8-1-2dirname"><a href="#8-1-2dirname" class="headerlink" title="8.1.2dirname"></a>8.1.2dirname</h3><p>dirname 文件绝对路径 （功能描述：从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分））<br>dirname 可以理解为取文件路径的绝对路径名称</p>
<h3 id="8-1-3案例"><a href="#8-1-3案例" class="headerlink" title="8.1.3案例"></a>8.1.3案例</h3><h4 id="8-1-3-1date-s时间戳练习"><a href="#8-1-3-1date-s时间戳练习" class="headerlink" title="8.1.3.1date+%s时间戳练习"></a>8.1.3.1date+%s时间戳练习</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/41327c74bef64a0d809d9c8893dbd248.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/3554120049e94d4db6fba31ae2c045c3.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/8f6aa0fc35d34c4d9b26dffb3afbb6cc.png" alt="在这里插入图片描述"></p>
<h4 id="8-1-3-2basename的练习"><a href="#8-1-3-2basename的练习" class="headerlink" title="8.1.3.2basename的练习"></a>8.1.3.2basename的练习</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/807fd25b689c4c27a704df35ed1cd832.png" alt="在这里插入图片描述"></p>
<p>将文件名剪切下来<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/8a9f081cb5264c5eb1f44f0dcccdfcfb.png" alt="在这里插入图片描述"><br>parameter文件的代码<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/d38be947f8af4af9b2b9595d240ea804.png" alt="在这里插入图片描述"></p>
<p>显示的文件名包括路径，我们不需要输出路径，因此加上basename来解决</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/e731adc935654898ab1f2fdb59d309a1.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/03fcb3898f00424a9e5b52ca03519aec.png" alt="在这里插入图片描述"></p>
<h4 id="8-1-3-3dirname的练习"><a href="#8-1-3-3dirname的练习" class="headerlink" title="8.1.3.3dirname的练习"></a>8.1.3.3dirname的练习</h4><p>dirname截取最后一个斜杠之前的路径，不包括文件名<br>而basename截取最后一个斜杠之后的文件名，不包括路径</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/269f319a35ed4c55bbe63ccfc3ef589f.png" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/88346983f74b47ecbfc69a59af84d159.png" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/d07ff166221f411bab0fe957154546a1.png" alt="在这里插入图片描述"></p>
<p>如果只有pwd的话，在其他文件夹里执行代码则不会打印脚本的目录，需要加上dirname，如下<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/6b5ee5251a474fc9af5fa54db5bda6d0.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/ada50b47cba24bc29737c67189b9e8df.png" alt="在这里插入图片描述"></p>
<p>加上dirname后输出的脚本路径是保持不变的</p>
<h2 id="8-2自定义函数"><a href="#8-2自定义函数" class="headerlink" title="8.2自定义函数"></a>8.2自定义函数</h2><h3 id="8-2-1基本语法"><a href="#8-2-1基本语法" class="headerlink" title="8.2.1基本语法"></a>8.2.1基本语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ function ] funname[()] </span><br><span class="line">&#123; </span><br><span class="line">    Action; </span><br><span class="line">    [return int;] </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-2-2经验技巧"><a href="#8-2-2经验技巧" class="headerlink" title="8.2.2经验技巧"></a>8.2.2经验技巧</h3><p>（1）必须在调用函数地方之前，先声明函数，shell 脚本是逐行运行。不会像其它语言一样先编译。<br>（2）函数返回值，只能通过$?系统变量获得，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。return 后跟数值 n(0-255)</p>
<h3 id="8-2-3案例"><a href="#8-2-3案例" class="headerlink" title="8.2.3案例"></a>8.2.3案例</h3><h4 id="8-2-3-1没有使用return的版本"><a href="#8-2-3-1没有使用return的版本" class="headerlink" title="8.2.3.1没有使用return的版本"></a>8.2.3.1没有使用return的版本</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/cbec2e5aebb94f7496d8433f33f81713.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/383d1a78b3a84a2c8dd3d6895b0ca1fa.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/2587a9dd48cb49f18b50c64853f1074d.png" alt="在这里插入图片描述"><br>可以输出和</p>
<h4 id="8-2-3-2用return返回的话"><a href="#8-2-3-2用return返回的话" class="headerlink" title="8.2.3.2用return返回的话"></a>8.2.3.2用return返回的话</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/c768882af4794365aaed4bcd390df4b6.png" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/3a5b86cb583b495396de081f7a653f1d.png" alt="在这里插入图片描述"><br>可以看出，return后面必须是跟数字，修改如下：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/6a042fde12a441ab9bbd4db9abe22269.png" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/7d39dd58be8349bfa3d1fb75b1b9f170.png" alt="在这里插入图片描述"></p>
<p>这样就可以正常输出结果了,<code>但是return的时候只能返回0-255，超过的数就不能显示正确的答案，如下</code><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/460f369829b34c6f803fd326f8ab0236.png" alt="在这里插入图片描述"><br>156+245！&#x3D;145的，所以可以说明return只能返回0-255的数，那我们应该如何解决呢，看下面的代码<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/8c7d6370477b41bbbceaadee99bc0e19.png" alt="在这里插入图片描述"><br>这样写就可以将函数add里面echo的值赋给ans，然后再输出<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/a99169cf597c4008a7fb4316817cfa53.png" alt="在这里插入图片描述"></p>
<p>结果也是对的，说明这样写是正确的</p>
<h2 id="9-正则表达式入门"><a href="#9-正则表达式入门" class="headerlink" title="9.正则表达式入门"></a>9.正则表达式入门</h2><p>正则表达式使用单个字符串来描述、匹配一系列符合某个语法规则的字符串。在很多文本编辑器里，正则表达式通常被用来检索、替换那些符合某个模式的文本。在 Linux 中，grep，sed，awk 等文本处理工具都支持通过正则表达式进行模式匹配。</p>
<h2 id="9-1常规匹配"><a href="#9-1常规匹配" class="headerlink" title="9.1常规匹配"></a>9.1常规匹配</h2><p>一串不包含特殊字符的正则表达式匹配它自己，例如：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/5d0d6755d97a4485b942e13476146b02.png" alt="在这里插入图片描述"><br>[root@hadoop100 ~]# cat &#x2F;etc&#x2F;passwd | grep 00:<br>就会匹配所有包含 00:的行。</p>
<h2 id="9-2常用特殊字符"><a href="#9-2常用特殊字符" class="headerlink" title="9.2常用特殊字符"></a>9.2常用特殊字符</h2><h3 id="9-2-1特殊字符："><a href="#9-2-1特殊字符：" class="headerlink" title="9.2.1特殊字符：^"></a>9.2.1特殊字符：^</h3><p>^ 匹配一行的开头，例如：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/8a3752e98fe0410fa384313cd754c98c.png" alt="在这里插入图片描述"><br>会匹配出所有以 a 开头的行</p>
<h3 id="9-2-2特殊字符："><a href="#9-2-2特殊字符：" class="headerlink" title="9.2.2特殊字符：$"></a>9.2.2特殊字符：$</h3><p>$ 匹配一行的结束，例如<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/4db8205e6ea345df8cd2a846b7fea6b6.png" alt="在这里插入图片描述"></p>
<p>会匹配出所有以 h结尾的行</p>
<ul>
<li>思考：^$ 匹配什么？</li>
</ul>
<p>匹配空行</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/37ec1ebccaa646bda514c99db933d61a.png" alt="在这里插入图片描述"><br>daily_archive.sh文件是在<a target="_blank" rel="noopener" href="http://t.csdn.cn/0Wpml">http://t.csdn.cn/0Wpml</a> 写的，想看的点这里看里面的内容</p>
<h3 id="9-2-3特殊字符："><a href="#9-2-3特殊字符：" class="headerlink" title="9.2.3特殊字符：."></a>9.2.3特殊字符：.</h3><p>匹配一个任意的字符，例如<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/c3d2daacce8644a093c0632424d84a10.png" alt="在这里插入图片描述"></p>
<h3 id="9-2-4特殊字符："><a href="#9-2-4特殊字符：" class="headerlink" title="9.2.4特殊字符：*"></a>9.2.4特殊字符：*</h3><p>“*”不单独使用，他和上一个字符连用，表示匹配上一个字符 0 次或多次，例如</p>
<p>[root@hadoop100 ~]# cat &#x2F;etc&#x2F;passwd | grep ro*t<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/abd0f32127744a37b2a208a142b5e668.png" alt="在这里插入图片描述"></p>
<p>会匹配 rt, rot, root, rooot, roooot 等所有行</p>
<p>思考：.* 匹配什么？<br>匹配任意字符，可以和^$连用，放在他们中间用，就可以将下面的代码实现，以a开头，login结尾的行<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/bea18902872b4369a161fb93098ae6b9.png" alt="在这里插入图片描述"></p>
<p>[root@hadoop100 ~]# cat &#x2F;etc&#x2F;passwd | grep ^a.*login$</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/8c83bfdb1049409ab25ef7ce2ab3fbbf.png" alt="在这里插入图片描述"><br>[root@hadoop100 ~]# cat &#x2F;etc&#x2F;passwd | grep ^a.*var.*login$</p>
<h3 id="9-2-5字符区间（中括号）："><a href="#9-2-5字符区间（中括号）：" class="headerlink" title="9.2.5字符区间（中括号）：[ ]"></a>9.2.5字符区间（中括号）：[ ]</h3><p>[ ] 表示匹配某个范围内的一个字符，例如<br>[6,8]——匹配 6 或者 8<br>[0-9]——匹配一个 0-9 的数字<br>[0-9]<em>——匹配任意长度的数字字符串<br>[a-z]——匹配一个 a-z 之间的字符<br>[a-z]</em> ——匹配任意长度的字母字符串<br>[a-c, e-f]-匹配 a-c 或者 e-f 之间的任意字符</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/e24dc489e1904298ac178b61d77df18e.png" alt="在这里插入图片描述"><br>[root@hadoop100 ~]# cat &#x2F;etc&#x2F;passwd | grep r[a-z]*t</p>
<h3 id="9-2-6特殊字符："><a href="#9-2-6特殊字符：" class="headerlink" title="9.2.6特殊字符：\"></a>9.2.6特殊字符：\</h3><p>\ 表示转义，并不会单独使用。由于所有特殊字符都有其特定匹配模式，当我们想匹配某一特殊字符本身时（例如，我想找出所有包含 ‘$’ 的行），就会碰到困难。此时我们就要将转义字符和特殊字符连用，来表示特殊字符本身，例如</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/654708338f2b4ab497c76ac67be0b6be.png" alt="在这里插入图片描述"></p>
<p>就会匹配所有包含 $ 的行。注意需要使用单引号将表达式引起来。</p>
<h3 id="9-2-7匹配手机号"><a href="#9-2-7匹配手机号" class="headerlink" title="9.2.7匹配手机号"></a>9.2.7匹配手机号</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/bc4c8f1b7f8e4ce2b72667d5f629dd21.png" alt="在这里插入图片描述"></p>
<p>[root@hadoop100 scripts]# echo “13812345678” | grep ^1345780-90-90-90-9$</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/919eb2a5df7344e481f3f40bafd5346d.png" alt="在这里插入图片描述"></p>
<p>[root@hadoop100 scripts]# echo “13812345678” | grep -E ^134578{9}$</p>
<p>记得加大写的-E，因为目前grep不支持{9}的扩展的正则的，所以需要加上-E，表示支持扩展的正则表达式</p>
<h2 id="10-文本处理工具"><a href="#10-文本处理工具" class="headerlink" title="10.文本处理工具"></a>10.文本处理工具</h2><h2 id="10-1cut"><a href="#10-1cut" class="headerlink" title="10.1cut"></a>10.1cut</h2><p>cut 的工作就是“剪”，具体的说就是在文件中负责剪切数据用的。cut 命令从文件的每一行剪切字节、字符和字段并将这些字节、字符和字段输出。</p>
<h3 id="10-1-1基本用法"><a href="#10-1-1基本用法" class="headerlink" title="10.1.1基本用法"></a>10.1.1基本用法</h3><p>cut [选项参数] filename<br>说明：默认分隔符是制表符</p>
<h3 id="10-1-2选项参数说明"><a href="#10-1-2选项参数说明" class="headerlink" title="10.1.2选项参数说明"></a>10.1.2选项参数说明</h3><table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-f</td>
<td>列号，提取第几列</td>
</tr>
<tr>
<td>-d</td>
<td>分隔符，按照指定分隔符分割列，默认是制表符“\t”</td>
</tr>
<tr>
<td>-c</td>
<td>按字符进行切割 后加加 n 表示取第几列 比如 -c 1</td>
</tr>
</tbody></table>
<h3 id="10-1-3案例"><a href="#10-1-3案例" class="headerlink" title="10.1.3案例"></a>10.1.3案例</h3><h4 id="10-1-3-1数据准备"><a href="#10-1-3-1数据准备" class="headerlink" title="10.1.3.1数据准备"></a>10.1.3.1数据准备</h4><p>[root@hadoop100 scripts]# vim cut_test.txt<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/164648ee29964dcea2191a8c994f0638.png" alt="在这里插入图片描述"></p>
<h4 id="10-1-3-2切割-cut-test-txt-第一列"><a href="#10-1-3-2切割-cut-test-txt-第一列" class="headerlink" title="10.1.3.2切割 cut_test.txt 第一列"></a>10.1.3.2切割 cut_test.txt 第一列</h4><p>[root@hadoop100 scripts]# cut -d “ “ -f 1 cut_test.txt<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/a2bb7b08463147058f7dc266724adf44.png" alt="在这里插入图片描述"></p>
<h4 id="10-1-3-3切割-cut-test-txt-第二、三列"><a href="#10-1-3-3切割-cut-test-txt-第二、三列" class="headerlink" title="10.1.3.3切割 cut_test.txt 第二、三列"></a>10.1.3.3切割 cut_test.txt 第二、三列</h4><p>[root@hadoop100 scripts]# cut -d “ “ -f 2,3 cut_test.txt<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/277e1e3c83e84c7bb65ddbabde94fcf0.png" alt="在这里插入图片描述"></p>
<h4 id="10-1-3-4在-cut-test-txt-文件中切割出-nan"><a href="#10-1-3-4在-cut-test-txt-文件中切割出-nan" class="headerlink" title="10.1.3.4在 cut_test.txt 文件中切割出 nan"></a>10.1.3.4在 cut_test.txt 文件中切割出 nan</h4><p>[root@hadoop100 scripts]# cat cut_test.txt | grep nan | cut -d “ “ -f 1</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/f510775a09c443cba36dac6418211529.png" alt="在这里插入图片描述"></p>
<h4 id="10-1-3-5要passwd中以bash结尾的第一，六，七列"><a href="#10-1-3-5要passwd中以bash结尾的第一，六，七列" class="headerlink" title="10.1.3.5要passwd中以bash结尾的第一，六，七列"></a>10.1.3.5要passwd中以bash结尾的第一，六，七列</h4><p>[root@hadoop100 scripts]# cat &#x2F;etc&#x2F;passwd | grep bash$ | cut -d “:” -f 1,6,7</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/53dcd37b29c84296af598a5f051657a3.png" alt="在这里插入图片描述"></p>
<p>如果列多的话总不能1,2，3,4，5,6，7,8，9,10…等吧，可以用“-”来，下面介绍</p>
<h4 id="10-1-3-6要passwd中以bash结尾的第1-4列"><a href="#10-1-3-6要passwd中以bash结尾的第1-4列" class="headerlink" title="10.1.3.6要passwd中以bash结尾的第1-4列"></a>10.1.3.6要passwd中以bash结尾的第1-4列</h4><p>[root@hadoop100 scripts]# cat &#x2F;etc&#x2F;passwd | grep bash$ | cut -d “:” -f 1-4</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/2c7fb46903a841d9a5e8facf2e0634a3.png" alt="在这里插入图片描述"></p>
<h4 id="10-1-3-7要passwd中以bash结尾的第4列往后的全部列"><a href="#10-1-3-7要passwd中以bash结尾的第4列往后的全部列" class="headerlink" title="10.1.3.7要passwd中以bash结尾的第4列往后的全部列"></a>10.1.3.7要passwd中以bash结尾的第4列往后的全部列</h4><p>[root@hadoop100 scripts]# cat &#x2F;etc&#x2F;passwd | grep bash$ | cut -d “:” -f 4-</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/2d95bee6075a4f6caef3362449e47bba.png" alt="在这里插入图片描述"></p>
<h4 id="10-1-3-8要passwd中以bash结尾的第4列之前的全部列"><a href="#10-1-3-8要passwd中以bash结尾的第4列之前的全部列" class="headerlink" title="10.1.3.8要passwd中以bash结尾的第4列之前的全部列"></a>10.1.3.8要passwd中以bash结尾的第4列之前的全部列</h4><p>[root@hadoop100 scripts]# cat &#x2F;etc&#x2F;passwd | grep bash$ | cut -d “:” -f -4</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/087ed35cc72f42a89cfe9672a1e049b5.png" alt="在这里插入图片描述"></p>
<h4 id="10-1-3-9选取系统-PATH-变量值，第-2-个“：”开始后的所有路径："><a href="#10-1-3-9选取系统-PATH-变量值，第-2-个“：”开始后的所有路径：" class="headerlink" title="10.1.3.9选取系统 PATH 变量值，第 2 个“：”开始后的所有路径："></a>10.1.3.9选取系统 PATH 变量值，第 2 个“：”开始后的所有路径：</h4><p>[root@hadoop100 scripts]# echo $PATH | cut -d “:” -f 3-</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/5757ca44cf5d4f2d9ae9689b6093ec91.png" alt="在这里插入图片描述"></p>
<h4 id="10-1-3-10切割-ifconfig-后打印的-IP-地址"><a href="#10-1-3-10切割-ifconfig-后打印的-IP-地址" class="headerlink" title="10.1.3.10切割 ifconfig 后打印的 IP 地址"></a>10.1.3.10切割 ifconfig 后打印的 IP 地址</h4><p>[root@hadoop100 scripts]# ifconfig ens33 | grep netmask | cut -d “ “ -f 10</p>
<p>为什么是10呢，因为inet前面有8个空格<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0d8f9a5501364012bf77ed20d3c46068.png" alt="在这里插入图片描述"></p>
<h2 id="10-2awk"><a href="#10-2awk" class="headerlink" title="10.2awk"></a>10.2awk</h2><p><code>awk和gawk是一样的，awk是gawk的一个软连接</code><br>一个强大的文本分析工具，把文件逐行的读入，以空格为默认分隔符将每行切片，切开的部分再进行分析处理。</p>
<h3 id="10-2-1基本用法"><a href="#10-2-1基本用法" class="headerlink" title="10.2.1基本用法"></a>10.2.1基本用法</h3><p>awk [选项参数] ‘&#x2F;pattern1&#x2F;{action1} &#x2F;pattern2&#x2F;{action2}…’ filename<br>pattern：表示 awk 在数据中查找的内容，就是匹配模式<br>action：在找到匹配内容时所执行的一系列命令</p>
<h3 id="10-2-2选项参数说明"><a href="#10-2-2选项参数说明" class="headerlink" title="10.2.2选项参数说明"></a>10.2.2选项参数说明</h3><table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-F</td>
<td>指定输入文件分隔符</td>
</tr>
<tr>
<td>-v</td>
<td>赋值一个用户定义变量</td>
</tr>
</tbody></table>
<h3 id="10-2-3案例"><a href="#10-2-3案例" class="headerlink" title="10.2.3案例"></a>10.2.3案例</h3><h4 id="10-2-3-1搜索-passwd-文件以-root-关键字开头的所有行，并输出该行的第-7-列"><a href="#10-2-3-1搜索-passwd-文件以-root-关键字开头的所有行，并输出该行的第-7-列" class="headerlink" title="10.2.3.1搜索 passwd 文件以 root 关键字开头的所有行，并输出该行的第 7 列"></a>10.2.3.1搜索 passwd 文件以 root 关键字开头的所有行，并输出该行的第 7 列</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/d844654268ef4a36b601f6ac9dd5cbf8.png" alt="在这里插入图片描述"></p>
<h4 id="10-2-3-2搜索-passwd-文件以-root-关键字开头的所有行，并输出该行的第-1-列和第-7-列，-中间以“，”号分割"><a href="#10-2-3-2搜索-passwd-文件以-root-关键字开头的所有行，并输出该行的第-1-列和第-7-列，-中间以“，”号分割" class="headerlink" title="10.2.3.2搜索 passwd 文件以 root 关键字开头的所有行，并输出该行的第 1 列和第 7 列， 中间以“，”号分割"></a>10.2.3.2搜索 passwd 文件以 root 关键字开头的所有行，并输出该行的第 1 列和第 7 列， 中间以“，”号分割</h4><p>用cut是不能改变输出中间用什么隔开的，而awk可以，记住，需要用“”包裹<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/1efe632fd5a246c5be29630ed76eb3db.png" alt="在这里插入图片描述"></p>
<h4 id="10-2-3-3只显示-etc-passwd-的第一列和第七列，以逗号分割，且在所有行前面添加列名-user，shell-在最后一行添加”end-of-file”"><a href="#10-2-3-3只显示-etc-passwd-的第一列和第七列，以逗号分割，且在所有行前面添加列名-user，shell-在最后一行添加”end-of-file”" class="headerlink" title="10.2.3.3只显示&#x2F;etc&#x2F;passwd 的第一列和第七列，以逗号分割，且在所有行前面添加列名 user，shell 在最后一行添加”end of file”"></a>10.2.3.3只显示&#x2F;etc&#x2F;passwd 的第一列和第七列，以逗号分割，且在所有行前面添加列名 user，shell 在最后一行添加”end of file”</h4><p>[root@hadoop100 scripts]# cat &#x2F;etc&#x2F;passwd | awk -F “:” ‘BEGIN{print “user,shell”}{print <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0031.png" alt="img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/0022.png" alt="img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/002C.png" alt="img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://yqfile.alicdn.com/mathjax/2.7.2/fonts/HTML-CSS/TeX/png/Main/Regular/336/0022.png?V=2.7.2" alt="img">1”,”7} END{print “end of file”}’</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/961d7f3b26d94a6a92fa969df0fd3634.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/70cfb815824e4b6a9e08ec72e7ea89d2.png" alt="在这里插入图片描述"></p>
<h4 id="10-2-3-4将-passwd-文件中的用户-id-增加数值-1-并输出"><a href="#10-2-3-4将-passwd-文件中的用户-id-增加数值-1-并输出" class="headerlink" title="10.2.3.4将 passwd 文件中的用户 id 增加数值 1 并输出"></a>10.2.3.4将 passwd 文件中的用户 id 增加数值 1 并输出</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/c6f947fa4f574f0da39436138e8f36c2.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/8ab07ccd4e144f14aa481f82b7fa9923.png" alt="在这里插入图片描述"></p>
<p>因为{}里面是代码块，可以直接在里面更改</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/15d3b787b9df4bc6acf5c1b8a75962d0.png" alt="在这里插入图片描述"></p>
<p>如果{}代码块里的代码多了，需要更改会很麻烦，因此使用-v，这样的话在外面一改数字代码块里面的代码就都改了</p>
<h3 id="10-2-4awk-的内置变量"><a href="#10-2-4awk-的内置变量" class="headerlink" title="10.2.4awk 的内置变量"></a>10.2.4awk 的内置变量</h3><table>
<thead>
<tr>
<th>变量</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>FILENAME</td>
<td>文件名</td>
</tr>
<tr>
<td>NR</td>
<td>已读的记录数（行号）</td>
</tr>
<tr>
<td>NF</td>
<td>浏览记录的域的个数（切割后，列的个数）</td>
</tr>
</tbody></table>
<h4 id="10-2-4-1统计-passwd-文件名，每行的行号，每行的列数"><a href="#10-2-4-1统计-passwd-文件名，每行的行号，每行的列数" class="headerlink" title="10.2.4.1统计 passwd 文件名，每行的行号，每行的列数"></a>10.2.4.1统计 passwd 文件名，每行的行号，每行的列数</h4><p>[root@hadoop100 scripts]# awk -v i&#x3D;1 -F “:” ‘{print “文件名：” FILENAME “行号：” NR “列数：” NF}’ &#x2F;etc&#x2F;passwd</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/51f79caedb8049908579a427ac46244e.png" alt="在这里插入图片描述"></p>
<h4 id="10-2-4-2查询-ifconfig-命令输出结果中的空行所在的行号"><a href="#10-2-4-2查询-ifconfig-命令输出结果中的空行所在的行号" class="headerlink" title="10.2.4.2查询 ifconfig 命令输出结果中的空行所在的行号"></a>10.2.4.2查询 ifconfig 命令输出结果中的空行所在的行号</h4><p>[root@hadoop100 scripts]# ifconfig | grep -n ^$</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/ab98e5f98b6643db881eb7968e8bcd9c.png" alt="在这里插入图片描述"><br>用之前的方法输出会有”:”，但是结果不想要，用awk解决</p>
<p>[root@hadoop100 scripts]# ifconfig | awk ‘&#x2F;^$&#x2F; {print NR}’</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/66d54c924045419c90d8da6094c28d61.png" alt="在这里插入图片描述"></p>
<p>也可以随意加东西</p>
<p>[root@hadoop100 scripts]# ifconfig | awk ‘&#x2F;^$&#x2F; {print “空行：”NR}’</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/47f92590abda4282b33b45e8f34ead0b.png" alt="在这里插入图片描述"></p>
<h4 id="10-2-4-3切割-IP"><a href="#10-2-4-3切割-IP" class="headerlink" title="10.2.4.3切割 IP"></a>10.2.4.3切割 IP</h4><p>使用cut时-f后需要数前面那一堆空格</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/b30e74a9f47345d2bf4397dfed079c6d.png" alt="在这里插入图片描述"></p>
<p>使用awk后，前面那一堆空格是不需要数的<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/1da3218da7f0491cac9b6e43fc600847.png" alt="在这里插入图片描述"></p>
<h2 id="11-归档文件"><a href="#11-归档文件" class="headerlink" title="11.归档文件"></a>11.归档文件</h2><p>实际生产应用中，往往需要对重要数据进行归档备份。<br>需求:实现一个每天对指定目录归档备份的脚本，输入一个目录名称(末尾不带&#x2F;)，将目录下所有文件按天归档保存，并将归档日期附加在归档文件名上，放在&#x2F;root&#x2F;archive下。<br>这里用到了归档命令: tar<br>后面可以加上-c选项表示归档，加上-z选项表示同时进行压缩，得到的文件后缀名为.tar.gz</p>
<h2 id="11-1脚本实现"><a href="#11-1脚本实现" class="headerlink" title="11.1脚本实现"></a>11.1脚本实现</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/d538b741427f4baf9b1ae223384567c6.png" alt="在这里插入图片描述"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">#首先判断输入参数个数是否为1</span><br><span class="line">if [ $# -ne 1 ]</span><br><span class="line">then</span><br><span class="line">        echo &quot;参数个数错误！应该输入一个参数，作为归档目录名&quot;</span><br><span class="line">        exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 从参数中获取目录名称</span><br><span class="line">if [ -d $1 ]</span><br><span class="line">then</span><br><span class="line">        echo</span><br><span class="line">else</span><br><span class="line">        echo</span><br><span class="line">        echo &quot;目录不存在！&quot;</span><br><span class="line">        echo</span><br><span class="line">        exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">DIR_NAME=$(basename $1)</span><br><span class="line">DIR_PATH=$(cd $(dirname $1); pwd)</span><br><span class="line"></span><br><span class="line"># 获取当前日期</span><br><span class="line">FILE=archive_$&#123;DIR_NAME&#125;_$DATE.tar.gz</span><br><span class="line">DEST=/root/archive/$FILE</span><br><span class="line"></span><br><span class="line"># 开始归档目录文件</span><br><span class="line"></span><br><span class="line">echo &quot;开始归档...&quot;</span><br><span class="line">echo</span><br><span class="line"></span><br><span class="line">tar -czf $DEST $DIR_PATH/$DIR_NAME</span><br><span class="line"></span><br><span class="line">if [ $? -eq 0 ]</span><br><span class="line">then</span><br><span class="line">        echo</span><br><span class="line">        echo &quot;归档成功！&quot;</span><br><span class="line">        echo &quot;归档文件为：$DEST&quot;</span><br><span class="line">        echo</span><br><span class="line">else</span><br><span class="line">        echo &quot;归档出现问题!&quot;</span><br><span class="line">        echo</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

<h2 id="11-2测试"><a href="#11-2测试" class="headerlink" title="11.2测试"></a>11.2测试</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/dee191a708f74d4abdfb12d922b9dcbb.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/4ea0f2503cc54b9bbd1dceccb2114027.png" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/dc3821a16bc248a1aeb049cbf7aab61c.png" alt="在这里插入图片描述"><br>则创建一个文件<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/b79bc3900ff1471baa22ad7428a5e4be.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/5abbe329ba6f4b7baf8cbe21c0917911.png" alt="在这里插入图片描述"></p>
<p>归档成功</p>
<h2 id="11-3定期归档"><a href="#11-3定期归档" class="headerlink" title="11.3定期归档"></a>11.3定期归档</h2><p>使用crontab<br>crontab中的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 2 * * * /root/scripts/daily_archive.sh /root/scripts</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/2acd9c1923df418cbeb75468107dba46.png" alt="在这里插入图片描述"></p>
<h2 id="12-发送消息"><a href="#12-发送消息" class="headerlink" title="12.发送消息"></a>12.发送消息</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/f96a276ddfbb4e659baa90eb17970559.png" alt="在这里插入图片描述"></p>
<p>这个可以查看用户在线情况， +号代表的是可以发送信息，mesg是打开的<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/a91a29672c1942b9bed7ce480740ece2.png" alt="在这里插入图片描述"><br>mesg n可以将mesg关闭<br>mesg y可以将mesg打开</p>
<h2 id="12-1write发送信息"><a href="#12-1write发送信息" class="headerlink" title="12.1write发送信息"></a>12.1write发送信息</h2><ul>
<li>write 用户名 控制台</li>
</ul>
<p>[root@hadoop100 scripts]# write cat pts&#x2F;1</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/9ac9ca1702164b4d9a3e2b4429bbb9d1.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/6ec0ec70288a4280a62d468e95820d39.png" alt="在这里插入图片描述"></p>
<p>我们可以利用 Linux 自带的 mesg 和 write 工具，向其它用户发送消息。<br>需求：实现一个向某个用户快速发送消息的脚本，输入用户名作为第一个参数，后面直接跟要发送的消息。脚本需要检测用户是否登录在系统中、是否打开消息功能，以及当前发送消息是否为空。<br>脚本实现如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line"># 查看用户是否登录</span><br><span class="line">login_user=$(who | grep -i -m 1 $1 | awk &#x27;&#123;print $1&#125;&#x27;)</span><br><span class="line"></span><br><span class="line">if [ -z $login_user ]</span><br><span class="line">then</span><br><span class="line">        echo &quot;$1 不在线!&quot;</span><br><span class="line">        echo &quot;脚本退出...&quot;</span><br><span class="line">        exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 查看用户是否开启消息功能</span><br><span class="line">is_allwoed=$(who -T | grep -i -m 1 $1 | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if [ &quot;$is_allowed&quot;x != &quot;+&quot;x ]</span><br><span class="line">then</span><br><span class="line">        echo &quot;$1 没有开启消息功能&quot;</span><br><span class="line">        echo &quot;脚本退出...&quot;</span><br><span class="line">        exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 确认是否有消息发送</span><br><span class="line">if [ -z $2 ]</span><br><span class="line">then</span><br><span class="line">        echo &quot;$1 没有消息发送&quot;</span><br><span class="line">        echo &quot;脚本退出...&quot;</span><br><span class="line">        exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 从参数中获取要发送的消息</span><br><span class="line">whole_msg=$(echo $* | cut -d &quot; &quot; -f 2-)</span><br><span class="line"></span><br><span class="line"># 获取用户登录的终端</span><br><span class="line">user_terminal=$(who | grep -i -m 1 $1 | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"># 写入要发送的消息</span><br><span class="line">echo $whole_msg | write $login_user $user_terminal</span><br><span class="line"></span><br><span class="line">if [ $? != 0 ]</span><br><span class="line">then</span><br><span class="line">        echo &quot;发送失败！&quot;</span><br><span class="line">else</span><br><span class="line">        echo &quot;发送成功！&quot;</span><br><span class="line">fi</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/7c709f1f7297429282fc862b2e99bb30.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/shell%E8%84%9A%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8Pictures/f67eccd422ed4ad6a93f8f2a4bce1b45.png" alt="在这里插入图片描述"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://chabai000.github.io">茶白</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://chabai000.github.io/posts/43771/">https://chabai000.github.io/posts/43771/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://chabai000.github.io" target="_blank">茶白的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/shell/">shell</a></div><div class="post_share"><div class="social-share" data-image="https://api.dujin.org/bing/1366.php" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/%E8%B5%9E%E8%B5%8F%E7%A0%81.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/%E8%B5%9E%E8%B5%8F%E7%A0%81.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/7648/" title="java八股文-高级篇"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.dujin.org/bing/1366.php" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">java八股文-高级篇</div></div></a></div><div class="next-post pull-right"><a href="/posts/55491/" title="java常用知识集"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/java.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">java常用知识集</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">茶白</div><div class="author-info__description">不论你在什么时候开始，重要的是开始之后就不要停止；不论你在什么时候结束，重要的是结束之后就不要悔恨</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/chabai000"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/chabai000" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1693522579@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#shell%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%88csdn%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">shell快速入门（csdn）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFshell%EF%BC%9F"><span class="toc-number">1.0.1.</span> <span class="toc-text">一、什么是shell？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%E4%B9%A0%E5%92%8C%E4%BD%BF%E7%94%A8shell%EF%BC%9F"><span class="toc-number">1.0.1.1.</span> <span class="toc-text">为什么要学习和使用shell？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81shell%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.0.2.</span> <span class="toc-text">二、shell的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Bash-%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">1.0.2.1.</span> <span class="toc-text">Bash 常用快捷键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">1.0.2.2.</span> <span class="toc-text">输入输出重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#linux-%E7%9A%84%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E4%B8%8E%E8%BE%93%E5%87%BA"><span class="toc-number">1.0.2.2.1.</span> <span class="toc-text">linux 的标准输入与输出</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">1.0.2.2.2.</span> <span class="toc-text">输入重定向</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">1.0.2.2.3.</span> <span class="toc-text">输出重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#dev-null-%E6%96%87%E4%BB%B6"><span class="toc-number">1.0.2.2.3.1.</span> <span class="toc-text">&#x2F;dev&#x2F;null 文件</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E5%91%BD%E4%BB%A4%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C"><span class="toc-number">1.0.2.2.4.</span> <span class="toc-text">多命令顺序执行</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#shell%E8%84%9A%E6%9C%AC%E7%9A%84%E6%89%A7%E8%A1%8C"><span class="toc-number">1.0.2.3.</span> <span class="toc-text">shell脚本的执行</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81shell%E5%8F%98%E9%87%8F"><span class="toc-number">1.0.3.</span> <span class="toc-text">三、shell变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%8F%98%E9%87%8F%E7%9A%84%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99%EF%BC%9A"><span class="toc-number">1.0.3.1.</span> <span class="toc-text">1. 变量的命名规则：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#shell%E4%B8%AD%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7"><span class="toc-number">1.0.3.1.1.</span> <span class="toc-text">shell中特殊符号</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%8F%98%E9%87%8F%E7%9A%84%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-number">1.0.3.2.</span> <span class="toc-text">2. 变量的分类：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F%EF%BC%9A"><span class="toc-number">1.0.3.2.1.</span> <span class="toc-text">2.1 用户自定义变量：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#2-1-1-%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89"><span class="toc-number">1.0.3.2.1.1.</span> <span class="toc-text">2.1.1 变量定义</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-1-2-%E5%8F%98%E9%87%8F%E8%B0%83%E7%94%A8"><span class="toc-number">1.0.3.2.1.2.</span> <span class="toc-text">2.1.2 变量调用</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-1-3-%E5%8F%98%E9%87%8F%E6%9F%A5%E7%9C%8B"><span class="toc-number">1.0.3.2.1.3.</span> <span class="toc-text">2.1.3 变量查看</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-1-4-%E5%8F%98%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-number">1.0.3.2.1.4.</span> <span class="toc-text">2.1.4 变量删除</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%EF%BC%9A"><span class="toc-number">1.0.3.2.2.</span> <span class="toc-text">2.2 环境变量：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#2-2-1-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.0.3.2.2.1.</span> <span class="toc-text">2.2.1 环境变量设置</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-2-2-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%88%A0%E9%99%A4"><span class="toc-number">1.0.3.2.2.2.</span> <span class="toc-text">2.2.2 环境变量查询和删除</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-2-3-%E7%B3%BB%E7%BB%9F%E9%BB%98%E8%AE%A4%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">1.0.3.2.2.3.</span> <span class="toc-text">2.2.3 系统默认环境变量</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0%E5%8F%98%E9%87%8F%EF%BC%9A"><span class="toc-number">1.0.3.2.3.</span> <span class="toc-text">2.3 位置参数变量：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-%E9%A2%84%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F%EF%BC%9A"><span class="toc-number">1.0.3.2.4.</span> <span class="toc-text">2.4 预定义变量：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%8F%AA%E8%AF%BB%E5%8F%98%E9%87%8F%EF%BC%9A"><span class="toc-number">1.0.3.2.5.</span> <span class="toc-text">3. 只读变量：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%8E%A5%E5%8F%97%E9%94%AE%E7%9B%98%E8%BE%93%E5%85%A5%EF%BC%9A"><span class="toc-number">1.0.3.2.6.</span> <span class="toc-text">4. 接受键盘输入：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81shell-%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.0.4.</span> <span class="toc-text">四、shell 运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.0.4.1.</span> <span class="toc-text">1. 算数运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.0.4.2.</span> <span class="toc-text">2. 关系运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.0.4.3.</span> <span class="toc-text">3. 逻辑运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.0.4.4.</span> <span class="toc-text">4. 字符串运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">1.0.4.5.</span> <span class="toc-text">5. 文件测试运算符（重点）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">1.0.5.</span> <span class="toc-text">五、流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-if%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-number">1.0.5.1.</span> <span class="toc-text">1. if条件判断</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-%E5%8D%95%E5%88%86%E6%94%AFif%E6%9D%A1%E4%BB%B6"><span class="toc-number">1.0.5.1.1.</span> <span class="toc-text">1.1 单分支if条件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-%E5%8F%8C%E5%88%86%E6%94%AFif%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.0.5.1.2.</span> <span class="toc-text">1.2 双分支if条件语句</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-%E5%A4%9A%E5%88%86%E6%94%AFif%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.0.5.1.3.</span> <span class="toc-text">1.3 多分支if条件语句</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%A4%9A%E5%88%86%E6%94%AFcase%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.0.5.2.</span> <span class="toc-text">2. 多分支case条件语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-for%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.0.5.3.</span> <span class="toc-text">3. for循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-while%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.0.5.4.</span> <span class="toc-text">4. while循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-until%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.0.5.5.</span> <span class="toc-text">5. until循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%87%BD%E6%95%B0"><span class="toc-number">1.0.5.6.</span> <span class="toc-text">6. 函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E7%89%B9%E6%AE%8A%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.0.5.7.</span> <span class="toc-text">7. 特殊流程控制语句</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-1-exit%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.0.5.7.1.</span> <span class="toc-text">7.1 exit语句</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-break%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.0.5.7.2.</span> <span class="toc-text">7.2 break语句</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-3-continue%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.0.5.7.3.</span> <span class="toc-text">7.3 continue语句</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%AD%97%E7%AC%A6%E6%88%AA%E5%8F%96%E3%80%81%E6%9B%BF%E6%8D%A2%E5%92%8C%E5%A4%84%E7%90%86%E5%91%BD%E4%BB%A4"><span class="toc-number">1.0.6.</span> <span class="toc-text">六、字符截取、替换和处理命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.0.6.1.</span> <span class="toc-text">正则表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AD%97%E7%AC%A6%E6%88%AA%E5%8F%96%E3%80%81%E6%9B%BF%E6%8D%A2%E5%91%BD%E4%BB%A4"><span class="toc-number">1.0.6.2.</span> <span class="toc-text">1 字符截取、替换命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-cut-%E5%88%97%E6%8F%90%E5%8F%96%E5%91%BD%E4%BB%A4"><span class="toc-number">1.0.6.2.1.</span> <span class="toc-text">1.1 cut 列提取命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-awk-%E7%BC%96%E7%A8%8B"><span class="toc-number">1.0.6.2.2.</span> <span class="toc-text">1.2 awk 编程</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-1-awk-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.0.6.2.2.1.</span> <span class="toc-text">1.2.1 awk 概述</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-2-printf-%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA"><span class="toc-number">1.0.6.2.2.2.</span> <span class="toc-text">1.2.2 printf 格式化输出</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-3-awk-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.0.6.2.2.3.</span> <span class="toc-text">1.2.3 awk 基本使用</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-4-awk-%E7%9A%84%E6%9D%A1%E4%BB%B6"><span class="toc-number">1.0.6.2.2.4.</span> <span class="toc-text">1.2.4 awk 的条件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#BEGIN"><span class="toc-number">1.0.6.2.2.5.</span> <span class="toc-text">BEGIN</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#END"><span class="toc-number">1.0.6.2.2.6.</span> <span class="toc-text">END</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.0.6.2.2.7.</span> <span class="toc-text">关系运算符</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-1"><span class="toc-number">1.0.6.2.2.8.</span> <span class="toc-text">正则表达式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-5-awk-%E5%86%85%E7%BD%AE%E5%8F%98%E9%87%8F"><span class="toc-number">1.0.6.2.2.9.</span> <span class="toc-text">1.2.5 awk 内置变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#awk%E5%B8%B8%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.0.6.2.2.10.</span> <span class="toc-text">awk常用统计实例</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-6-awk-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">1.0.6.2.2.11.</span> <span class="toc-text">1.2.6 awk 流程控制</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-7-awk-%E5%87%BD%E6%95%B0"><span class="toc-number">1.0.6.2.2.12.</span> <span class="toc-text">1.2.7 awk 函数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-8-awk-%E4%B8%AD%E8%B0%83%E7%94%A8%E8%84%9A%E6%9C%AC"><span class="toc-number">1.0.6.2.2.13.</span> <span class="toc-text">1.2.8 awk 中调用脚本</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-sed-%E6%96%87%E6%9C%AC%E9%80%89%E5%8F%96%E3%80%81%E6%9B%BF%E6%8D%A2%E3%80%81%E5%88%A0%E9%99%A4%E3%80%81%E6%96%B0%E5%A2%9E%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-number">1.0.6.2.3.</span> <span class="toc-text">1.3 sed 文本选取、替换、删除、新增的命令</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-3-1-%E6%8F%90%E5%8F%96%E8%A1%8C%E6%95%B0%E6%8D%AE"><span class="toc-number">1.0.6.2.3.1.</span> <span class="toc-text">1.3.1 提取行数据</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-3-2-%E5%88%A0%E9%99%A4%E8%A1%8C%E6%95%B0%E6%8D%AE"><span class="toc-number">1.0.6.2.3.2.</span> <span class="toc-text">1.3.2 删除行数据</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-3-3-%E8%BF%BD%E5%8A%A0%E6%8F%92%E5%85%A5%E8%A1%8C%E6%95%B0%E6%8D%AE"><span class="toc-number">1.0.6.2.3.3.</span> <span class="toc-text">1.3.3 追加插入行数据</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-3-4-%E6%9B%BF%E6%8D%A2%E8%A1%8C%E6%95%B0%E6%8D%AE"><span class="toc-number">1.0.6.2.3.4.</span> <span class="toc-text">1.3.4 替换行数据</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-3-5-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9B%BF%E6%8D%A2"><span class="toc-number">1.0.6.2.3.5.</span> <span class="toc-text">1.3.5 字符串替换</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AD%97%E7%AC%A6%E5%A4%84%E7%90%86%E5%91%BD%E4%BB%A4"><span class="toc-number">1.0.6.3.</span> <span class="toc-text">2 字符处理命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-sort-%E6%8E%92%E5%BA%8F%E5%91%BD%E4%BB%A4"><span class="toc-number">1.0.6.3.1.</span> <span class="toc-text">2.1 sort 排序命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-uniq-%E5%8F%96%E6%B6%88%E9%87%8D%E5%A4%8D%E8%A1%8C"><span class="toc-number">1.0.6.3.2.</span> <span class="toc-text">2.2 uniq 取消重复行</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-wc-%E7%BB%9F%E8%AE%A1%E5%91%BD%E4%BB%A4"><span class="toc-number">1.0.6.3.3.</span> <span class="toc-text">2.3 wc 统计命令</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shell%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%88ali%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">shell快速入门（ali）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Shell-%E6%A6%82%E8%BF%B0"><span class="toc-number">2.1.</span> <span class="toc-text">1.Shell 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1Linux-%E6%8F%90%E4%BE%9B%E7%9A%84-Shell-%E8%A7%A3%E6%9E%90%E5%99%A8%E6%9C%89"><span class="toc-number">2.2.</span> <span class="toc-text">1.1Linux 提供的 Shell 解析器有</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2bash-%E5%92%8C-sh-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">2.3.</span> <span class="toc-text">1.2bash 和 sh 的关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3Centos-%E9%BB%98%E8%AE%A4%E7%9A%84%E8%A7%A3%E6%9E%90%E5%99%A8%E6%98%AF-bash"><span class="toc-number">2.4.</span> <span class="toc-text">1.3Centos 默认的解析器是 bash</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Shell-%E8%84%9A%E6%9C%AC%E5%85%A5%E9%97%A8"><span class="toc-number">2.5.</span> <span class="toc-text">2.Shell 脚本入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E8%84%9A%E6%9C%AC%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.6.</span> <span class="toc-text">2.1脚本格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E7%AC%AC%E4%B8%80%E4%B8%AA-Shell-%E8%84%9A%E6%9C%AC%EF%BC%9Ahelloworld-sh"><span class="toc-number">2.7.</span> <span class="toc-text">2.2第一个 Shell 脚本：helloworld.sh</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1%E9%9C%80%E6%B1%82"><span class="toc-number">2.7.1.</span> <span class="toc-text">2.2.1需求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2%E5%AE%9E%E8%B7%B5"><span class="toc-number">2.7.2.</span> <span class="toc-text">2.2.2实践</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3%E8%84%9A%E6%9C%AC%E7%9A%84%E5%B8%B8%E7%94%A8%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F"><span class="toc-number">2.8.</span> <span class="toc-text">2.3脚本的常用执行方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1%E7%AC%AC%E4%B8%80%E7%A7%8D%EF%BC%9A%E9%87%87%E7%94%A8-bash-%E6%88%96-sh-%E8%84%9A%E6%9C%AC%E7%9A%84%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E6%88%96%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84%EF%BC%88%E4%B8%8D%E7%94%A8%E8%B5%8B%E4%BA%88%E8%84%9A%E6%9C%AC-x-%E6%9D%83%E9%99%90%EF%BC%89"><span class="toc-number">2.8.1.</span> <span class="toc-text">2.3.1第一种：采用 bash 或 sh+脚本的相对路径或绝对路径（不用赋予脚本+x 权限）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-1sh-%E8%84%9A%E6%9C%AC%E7%9A%84%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.8.1.1.</span> <span class="toc-text">2.3.1.1sh+脚本的相对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-2sh-%E8%84%9A%E6%9C%AC%E7%9A%84%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.8.1.2.</span> <span class="toc-text">2.3.1.2sh+脚本的绝对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-3bash-%E8%84%9A%E6%9C%AC%E7%9A%84%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.8.1.3.</span> <span class="toc-text">2.3.1.3bash+脚本的相对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-4bash-%E8%84%9A%E6%9C%AC%E7%9A%84%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.8.1.4.</span> <span class="toc-text">2.3.1.4bash+脚本的绝对路径</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2%E7%AC%AC%E4%BA%8C%E7%A7%8D%EF%BC%9A%E9%87%87%E7%94%A8%E8%BE%93%E5%85%A5%E8%84%9A%E6%9C%AC%E7%9A%84%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84%E6%88%96%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC%EF%BC%88%E5%BF%85%E9%A1%BB%E5%85%B7%E6%9C%89%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%9D%83%E9%99%90-x%EF%BC%89"><span class="toc-number">2.8.2.</span> <span class="toc-text">2.3.2第二种：采用输入脚本的绝对路径或相对路径执行脚本（必须具有可执行权限+x）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-1%E9%A6%96%E5%85%88%E8%A6%81%E8%B5%8B%E4%BA%88-helloworld-sh-%E8%84%9A%E6%9C%AC%E7%9A%84-x-%E6%9D%83%E9%99%90"><span class="toc-number">2.8.2.1.</span> <span class="toc-text">2.3.2.1首先要赋予 helloworld.sh 脚本的+x 权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-2%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC"><span class="toc-number">2.8.2.2.</span> <span class="toc-text">2.3.2.2执行脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-2-2-1%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.8.2.2.1.</span> <span class="toc-text">2.3.2.2.1相对路径</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-2-2-1%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.8.2.2.2.</span> <span class="toc-text">2.3.2.2.1绝对路径</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3%E6%B3%A8%E6%84%8F"><span class="toc-number">2.8.3.</span> <span class="toc-text">2.3.3注意</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-4%E7%AC%AC%E4%B8%89%E7%A7%8D%EF%BC%9A%E5%9C%A8%E8%84%9A%E6%9C%AC%E7%9A%84%E8%B7%AF%E5%BE%84%E5%89%8D%E5%8A%A0%E4%B8%8A%E2%80%9C-%E2%80%9D%E6%88%96%E8%80%85-source%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">2.8.4.</span> <span class="toc-text">2.3.4第三种：在脚本的路径前加上“.”或者 source（了解）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4-1-source%E5%91%BD%E4%BB%A4%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.8.4.1.</span> <span class="toc-text">2.3.4.1 source命令绝对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4-2source%E5%91%BD%E4%BB%A4%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.8.4.2.</span> <span class="toc-text">2.3.4.2source命令相对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4-3-%E2%80%9C-%E2%80%9D%E5%91%BD%E4%BB%A4%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.8.4.3.</span> <span class="toc-text">2.3.4.3 “.”命令绝对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4-4-%E2%80%9C-%E2%80%9D%E5%91%BD%E4%BB%A4%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.8.4.4.</span> <span class="toc-text">2.3.4.4 “.”命令相对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4-5%E6%B3%A8%E6%84%8F"><span class="toc-number">2.8.4.5.</span> <span class="toc-text">2.3.4.5注意</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-7%E5%AD%90shell"><span class="toc-number">2.8.5.</span> <span class="toc-text">2.3.7子shell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-6%E4%B8%80%E8%88%AC%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80"><span class="toc-number">2.8.6.</span> <span class="toc-text">2.3.6一般使用第二种方式执行脚本语言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-6-1%E5%A6%82%E6%9E%9C%E6%8A%8A%E8%A6%81%E6%89%A7%E8%A1%8C%E7%9A%84%E8%84%9A%E6%9C%AC%E6%94%BE%E5%88%B0%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4%E9%87%8C%EF%BC%88bin%E7%9B%AE%E5%BD%95%E6%88%96%E8%80%85sbin%E7%9B%AE%E5%BD%95%EF%BC%89"><span class="toc-number">2.8.6.1.</span> <span class="toc-text">2.3.6.1如果把要执行的脚本放到系统命令里（bin目录或者sbin目录）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-6-2%E6%9B%B4%E6%94%B9%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">2.8.6.2.</span> <span class="toc-text">2.3.6.2更改环境变量</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-7%E6%80%BB%E7%BB%93"><span class="toc-number">2.8.7.</span> <span class="toc-text">2.3.7总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%8F%98%E9%87%8F"><span class="toc-number">2.9.</span> <span class="toc-text">3.变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1%E7%B3%BB%E7%BB%9F%E9%A2%84%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">2.10.</span> <span class="toc-text">3.1系统预定义变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1%E5%B8%B8%E7%94%A8%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F"><span class="toc-number">2.10.1.</span> <span class="toc-text">3.1.1常用系统变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2%E7%9C%8B%E6%89%80%E6%9C%89%E7%9A%84%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%80%BC"><span class="toc-number">2.10.2.</span> <span class="toc-text">3.1.2看所有的全局变量值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">2.11.</span> <span class="toc-text">3.2自定义变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.11.1.</span> <span class="toc-text">3.2.1基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89%E8%A7%84%E5%88%99"><span class="toc-number">2.11.2.</span> <span class="toc-text">3.2.2变量定义规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3%E6%A1%88%E4%BE%8B"><span class="toc-number">2.11.3.</span> <span class="toc-text">3.2.3案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-1%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8Fa"><span class="toc-number">2.11.3.1.</span> <span class="toc-text">3.2.3.1定义变量a</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-2%E6%9F%A5%E7%9C%8B%E6%B2%A1%E6%9C%89%E5%AE%9A%E4%B9%89%E7%9A%84sssshell"><span class="toc-number">2.11.3.2.</span> <span class="toc-text">3.2.3.2查看没有定义的sssshell</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-3%E2%80%9C-%E2%80%9D%E5%8F%B7%E5%89%8D%E5%90%8E%E6%9C%89%E7%A9%BA%E6%A0%BC%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-number">2.11.3.3.</span> <span class="toc-text">3.2.3.3“&#x3D;”号前后有空格的情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-4%E6%9B%B4%E6%94%B9%E5%8F%98%E9%87%8F%E7%9A%84%E5%80%BC"><span class="toc-number">2.11.3.4.</span> <span class="toc-text">3.2.3.4更改变量的值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-5%E5%BD%93%E8%A6%81%E8%B5%8B%E5%80%BC%E7%9A%84%E5%86%85%E5%AE%B9%E6%9C%89%E7%A9%BA%E6%A0%BC%E7%9A%84%E6%97%B6%E5%80%99%E9%9C%80%E8%A6%81%E5%8A%A0%E4%B8%8A%E5%8D%95%E5%BC%95%E5%8F%B7%E6%88%96%E8%80%85%E5%8F%8C%E5%BC%95%E5%8F%B7"><span class="toc-number">2.11.3.5.</span> <span class="toc-text">3.2.3.5当要赋值的内容有空格的时候需要加上单引号或者双引号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-6%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E5%92%8C%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="toc-number">2.11.3.6.</span> <span class="toc-text">3.2.3.6局部变量和全局变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-7%E5%B0%86ssshell%E5%AE%9A%E4%B9%89%E6%88%90%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="toc-number">2.11.3.7.</span> <span class="toc-text">3.2.3.7将ssshell定义成全局变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-8%E5%9C%A8%E5%AD%90shell%E4%B8%AD%E6%9B%B4%E6%94%B9%E7%88%B6shell%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%8F%AA%E5%9C%A8%E5%AD%90shell%E6%9C%89%E6%95%88%EF%BC%8C%E5%9B%9E%E5%88%B0%E7%88%B6shell%E9%87%8C%E4%B8%8D%E4%BC%9A%E6%94%B9%E5%8F%98"><span class="toc-number">2.11.3.8.</span> <span class="toc-text">3.2.3.8在子shell中更改父shell全局变量只在子shell有效，回到父shell里不会改变</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-9%E7%94%A8vim%E8%BE%93%E5%87%BA%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%92%8C%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.11.3.9.</span> <span class="toc-text">3.2.3.9用vim输出全局变量和局部变量的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-10%E5%9C%A8set%E4%B8%AD%E7%9C%8B%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">2.11.3.10.</span> <span class="toc-text">3.2.3.10在set中看自定义变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-11%E5%A3%B0%E6%98%8E%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F"><span class="toc-number">2.11.3.11.</span> <span class="toc-text">3.2.3.11声明静态变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-12%E6%92%A4%E9%94%80%E5%8F%98%E9%87%8Fa"><span class="toc-number">2.11.3.12.</span> <span class="toc-text">3.2.3.12撤销变量a</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-13%E4%B8%8D%E8%83%BD%E6%92%A4%E9%94%80%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F"><span class="toc-number">2.11.3.13.</span> <span class="toc-text">3.2.3.13不能撤销静态变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-14%E5%9C%A8-bash-%E4%B8%AD%EF%BC%8C%E5%8F%98%E9%87%8F%E9%BB%98%E8%AE%A4%E7%B1%BB%E5%9E%8B%E9%83%BD%E6%98%AF%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%EF%BC%8C%E6%97%A0%E6%B3%95%E7%9B%B4%E6%8E%A5%E8%BF%9B%E8%A1%8C%E6%95%B0%E5%80%BC%E8%BF%90%E7%AE%97"><span class="toc-number">2.11.3.14.</span> <span class="toc-text">3.2.3.14在 bash 中，变量默认类型都是字符串类型，无法直接进行数值运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-15%E5%A6%82%E6%9E%9C%E8%BF%9B%E8%A1%8C%E6%95%B0%E5%80%BC%E8%BF%90%E7%AE%97%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%EF%BC%8C%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8shell%E4%B8%AD%E7%9A%84%E8%BF%90%E7%AE%97%E7%AC%A6%E7%9A%84%E8%A1%A8%E8%BE%BE"><span class="toc-number">2.11.3.15.</span> <span class="toc-text">3.2.3.15如果进行数值运算需要使用，需要使用shell中的运算符的表达</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F"><span class="toc-number">2.12.</span> <span class="toc-text">3.3特殊变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-n"><span class="toc-number">2.12.1.</span> <span class="toc-text">3.3.1$n</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.12.1.1.</span> <span class="toc-text">3.3.1.1基本语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-2%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%93%8D"><span class="toc-number">2.12.1.2.</span> <span class="toc-text">3.3.1.2案例实操</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-1-2-1%E5%9C%A8vim%E9%87%8C%E9%9D%A2%E2%80%9D%E2%80%9D%E5%92%8C%E2%80%99%E2%80%99%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.12.1.2.1.</span> <span class="toc-text">3.3.1.2.1在vim里面””和’’的区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-1-2-2-n%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.12.1.2.2.</span> <span class="toc-text">3.3.1.2.2$n的使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2"><span class="toc-number">2.12.2.</span> <span class="toc-text">3.3.2$</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.12.2.1.</span> <span class="toc-text">3.3.2.1基本语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-2"><span class="toc-number">2.12.2.2.</span> <span class="toc-text">3.3.2.2$</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-%E3%80%81"><span class="toc-number">2.12.3.</span> <span class="toc-text">3.3.3 $*、$@</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-3-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.12.3.1.</span> <span class="toc-text">3.3.3.1基本语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-3-2-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.12.3.2.</span> <span class="toc-text">3.3.3.2$*$@的使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-%EF%BC%9F"><span class="toc-number">2.12.4.</span> <span class="toc-text">3.3.3$？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-3-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-1"><span class="toc-number">2.12.4.1.</span> <span class="toc-text">3.3.3.1基本语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-3-2%E5%88%A4%E6%96%AD-parameter-sh-%E8%84%9A%E6%9C%AC%E6%98%AF%E5%90%A6%E6%AD%A3%E7%A1%AE%E6%89%A7%E8%A1%8C"><span class="toc-number">2.12.4.2.</span> <span class="toc-text">3.3.3.2判断 parameter.sh 脚本是否正确执行</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">2.13.</span> <span class="toc-text">4.运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.14.</span> <span class="toc-text">4.1基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1expr%E6%96%B9%E6%B3%95"><span class="toc-number">2.14.1.</span> <span class="toc-text">4.1.1expr方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2%E7%94%A8expr%E7%BB%99a%E8%B5%8B%E5%80%BC"><span class="toc-number">2.14.2.</span> <span class="toc-text">4.1.2用expr给a赋值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-3%E8%BF%90%E7%AE%97%E5%BC%8F%E6%88%96-%E8%BF%90%E7%AE%97%E5%BC%8F-%E6%88%96-%E8%BF%90%E7%AE%97%E5%BC%8F"><span class="toc-number">2.14.3.</span> <span class="toc-text">4.1.3运算式或((运算式))或[运算式]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-4%E7%94%A8%E8%84%9A%E6%9C%AC%E8%AE%A1%E7%AE%97%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%9A%84%E5%92%8C"><span class="toc-number">2.14.4.</span> <span class="toc-text">4.1.4用脚本计算两个数的和</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-number">2.15.</span> <span class="toc-text">5.条件判断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.16.</span> <span class="toc-text">5.1基本语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2%E5%B8%B8%E7%94%A8%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6"><span class="toc-number">2.17.</span> <span class="toc-text">5.2常用判断条件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-1%E4%B8%A4%E4%B8%AA%E6%95%B4%E6%95%B0%E4%B9%8B%E9%97%B4%E6%AF%94%E8%BE%83"><span class="toc-number">2.17.1.</span> <span class="toc-text">5.2.1两个整数之间比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-2%E6%8C%89%E7%85%A7%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E8%BF%9B%E8%A1%8C%E5%88%A4%E6%96%AD"><span class="toc-number">2.17.2.</span> <span class="toc-text">5.2.2按照文件权限进行判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-3%E6%8C%89%E7%85%A7%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E8%BF%9B%E8%A1%8C%E5%88%A4%E6%96%AD"><span class="toc-number">2.17.3.</span> <span class="toc-text">5.2.3按照文件类型进行判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-4%E6%B5%8B%E8%AF%95"><span class="toc-number">2.17.4.</span> <span class="toc-text">5.2.4测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-1test-condition"><span class="toc-number">2.17.4.1.</span> <span class="toc-text">5.2.4.1test condition</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-2-condition-%EF%BC%88%E6%B3%A8%E6%84%8F-condition-%E5%89%8D%E5%90%8E%E8%A6%81%E6%9C%89%E7%A9%BA%E6%A0%BC%EF%BC%89"><span class="toc-number">2.17.4.2.</span> <span class="toc-text">5.2.4.2[ condition ]（注意 condition 前后要有空格）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-3%E5%9C%A8-%E9%87%8C%E9%9D%A2%E4%BD%BF%E7%94%A8-%E5%92%8C%EF%BC%81"><span class="toc-number">2.17.4.3.</span> <span class="toc-text">5.2.4.3在[]里面使用&#x3D;和！&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-4-eq-%E7%AD%89%E4%BA%8E%EF%BC%88equal%EF%BC%89-ne-%E4%B8%8D%E7%AD%89%E4%BA%8E%EF%BC%88not-equal%EF%BC%89"><span class="toc-number">2.17.4.4.</span> <span class="toc-text">5.2.4.4-eq 等于（equal） -ne 不等于（not equal）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-5-lt-%E5%B0%8F%E4%BA%8E%EF%BC%88less-than%EF%BC%89-le-%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8E%EF%BC%88less-equal%EF%BC%89"><span class="toc-number">2.17.4.5.</span> <span class="toc-text">5.2.4.5-lt 小于（less than） -le 小于等于（less equal）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-6-gt-%E5%A4%A7%E4%BA%8E%EF%BC%88greater-than%EF%BC%89-ge-%E5%A4%A7%E4%BA%8E%E7%AD%89%E4%BA%8E%EF%BC%88greater-equal%EF%BC%89"><span class="toc-number">2.17.4.6.</span> <span class="toc-text">5.2.4.6-gt 大于（greater than） -ge 大于等于（greater equal）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-7%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E3%80%81-r-%E6%9C%89%E8%AF%BB%E7%9A%84%E6%9D%83%E9%99%90%EF%BC%88read%EF%BC%89%E3%80%81-w-%E6%9C%89%E5%86%99%E7%9A%84%E6%9D%83%E9%99%90%EF%BC%88write%EF%BC%89-%E3%80%81-x-%E6%9C%89%E6%89%A7%E8%A1%8C%E7%9A%84%E6%9D%83%E9%99%90%EF%BC%88execute%EF%BC%89"><span class="toc-number">2.17.4.7.</span> <span class="toc-text">5.2.4.7判断文件权限、 -r 有读的权限（read）、 -w 有写的权限（write） 、 -x 有执行的权限（execute）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-8%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E3%80%81-e-%E6%96%87%E4%BB%B6%E5%AD%98%E5%9C%A8%EF%BC%88existence%EF%BC%89%E3%80%81-f-%E6%96%87%E4%BB%B6%E5%AD%98%E5%9C%A8%E5%B9%B6%E4%B8%94%E6%98%AF%E4%B8%80%E4%B8%AA%E5%B8%B8%E8%A7%84%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%88file%EF%BC%89%E3%80%81-d-%E6%96%87%E4%BB%B6%E5%AD%98%E5%9C%A8%E5%B9%B6%E4%B8%94%E6%98%AF%E4%B8%80%E4%B8%AA%E7%9B%AE%E5%BD%95%EF%BC%88directory%EF%BC%89"><span class="toc-number">2.17.4.8.</span> <span class="toc-text">5.2.4.8判断文件类型、-e 文件存在（existence）、-f 文件存在并且是一个常规的文件（file）、-d 文件存在并且是一个目录（directory）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-9%E5%A4%9A%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%EF%BC%88-%E8%A1%A8%E7%A4%BA%E5%89%8D%E4%B8%80%E6%9D%A1%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%88%90%E5%8A%9F%E6%97%B6%EF%BC%8C%E6%89%8D%E6%89%A7%E8%A1%8C%E5%90%8E%E4%B8%80%E6%9D%A1%E5%91%BD%E4%BB%A4%EF%BC%8C-%E8%A1%A8%E7%A4%BA%E4%B8%8A%E4%B8%80-%E6%9D%A1%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%A4%B1%E8%B4%A5%E5%90%8E%EF%BC%8C%E6%89%8D%E6%89%A7%E8%A1%8C%E4%B8%8B%E4%B8%80%E6%9D%A1%E5%91%BD%E4%BB%A4%EF%BC%89"><span class="toc-number">2.17.4.9.</span> <span class="toc-text">5.2.4.9多条件判断（&amp;&amp; 表示前一条命令执行成功时，才执行后一条命令，|| 表示上一 条命令执行失败后，才执行下一条命令）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">2.18.</span> <span class="toc-text">6.流程控制（重点）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1if-%E5%88%A4%E6%96%AD"><span class="toc-number">2.19.</span> <span class="toc-text">6.1if 判断</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.19.1.</span> <span class="toc-text">6.1.1基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-1-1%E5%8D%95%E5%88%86%E6%94%AF"><span class="toc-number">2.19.1.1.</span> <span class="toc-text">6.1.1.1单分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-1-2%E5%A4%9A%E5%88%86%E6%94%AF"><span class="toc-number">2.19.1.2.</span> <span class="toc-text">6.1.1.2多分支</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2%E6%A1%88%E4%BE%8B"><span class="toc-number">2.19.2.</span> <span class="toc-text">6.1.2案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-2-1%E5%8D%95%E5%88%86%E6%94%AF"><span class="toc-number">2.19.2.1.</span> <span class="toc-text">6.1.2.1单分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-2-2%E7%94%A8%E9%80%BB%E8%BE%91%E4%B8%8E-%E9%80%BB%E8%BE%91%E6%88%96-%E8%BF%9E%E6%8E%A5%EF%BC%88%E5%8D%95%E5%88%86%E6%94%AF%EF%BC%89"><span class="toc-number">2.19.2.2.</span> <span class="toc-text">6.1.2.2用逻辑与&amp;&amp;逻辑或||连接（单分支）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-2-2-1%E9%80%BB%E8%BE%91%E4%B8%8E"><span class="toc-number">2.19.2.2.1.</span> <span class="toc-text">6.1.2.2.1逻辑与&amp;&amp;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-2-2-2%E9%80%BB%E8%BE%91%E6%88%96"><span class="toc-number">2.19.2.2.2.</span> <span class="toc-text">6.1.2.2.2逻辑或||</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-2-3%E5%A4%9A%E5%88%86%E6%94%AF"><span class="toc-number">2.19.2.3.</span> <span class="toc-text">6.1.2.3多分支</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2case-%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.20.</span> <span class="toc-text">6.2case 语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.20.1.</span> <span class="toc-text">6.2.1基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-2%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%9A"><span class="toc-number">2.20.2.</span> <span class="toc-text">6.2.2注意事项：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-3%E6%A1%88%E4%BE%8Bcast-test-sh"><span class="toc-number">2.20.3.</span> <span class="toc-text">6.2.3案例cast_test.sh</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3for-%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.21.</span> <span class="toc-text">6.3for 循环</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%951"><span class="toc-number">2.21.1.</span> <span class="toc-text">6.3.1基本语法1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-2%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-2"><span class="toc-number">2.21.2.</span> <span class="toc-text">6.3.2基本语法 2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-3%E6%A1%88%E4%BE%8B"><span class="toc-number">2.21.3.</span> <span class="toc-text">6.3.3案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-3-1for-%E5%88%9D%E5%A7%8B%E5%80%BC-%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6%E6%9D%A1%E4%BB%B6-%E5%8F%98%E9%87%8F%E5%8F%98%E5%8C%96"><span class="toc-number">2.21.3.1.</span> <span class="toc-text">6.3.3.1for (( 初始值;循环控制条件;变量变化 ))</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-3-2%E2%80%9C-%E2%80%9D%E5%9C%A8linux-shell%E9%87%8C%E9%9D%A2%E8%A1%A8%E7%A4%BA%E7%94%9F%E6%88%90%E5%BA%8F%E5%88%97"><span class="toc-number">2.21.3.2.</span> <span class="toc-text">6.3.3.2“{}”在linux shell里面表示生成序列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-3-3for-%E5%8F%98%E9%87%8F-in-%E5%80%BC-1-%E5%80%BC-2-%E5%80%BC-3%E2%80%A6"><span class="toc-number">2.21.3.3.</span> <span class="toc-text">6.3.3.3for 变量 in 值 1 值 2 值 3…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-3-2%E5%9C%A8for%E5%BE%AA%E7%8E%AF%E4%B8%AD-%E5%92%8C-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.21.3.4.</span> <span class="toc-text">6.3.3.2在for循环中$*和$@的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4while-%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.22.</span> <span class="toc-text">6.4while 循环</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.22.1.</span> <span class="toc-text">6.4.1基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-2%E4%BB%8E1%E5%8A%A0%E5%88%B0100"><span class="toc-number">2.22.2.</span> <span class="toc-text">6.4.2从1加到100</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-3let%E7%94%A8%E6%B3%95"><span class="toc-number">2.22.3.</span> <span class="toc-text">6.4.3let用法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-read-%E8%AF%BB%E5%8F%96%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%85%A5"><span class="toc-number">2.23.</span> <span class="toc-text">7.read 读取控制台输入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.24.</span> <span class="toc-text">7.1基本语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2read%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.25.</span> <span class="toc-text">7.2read的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E5%87%BD%E6%95%B0"><span class="toc-number">2.26.</span> <span class="toc-text">8.函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0"><span class="toc-number">2.27.</span> <span class="toc-text">8.1系统函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-1basename"><span class="toc-number">2.27.1.</span> <span class="toc-text">8.1.1basename</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-1-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.27.1.1.</span> <span class="toc-text">8.1.1.1基本语法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-2dirname"><span class="toc-number">2.27.2.</span> <span class="toc-text">8.1.2dirname</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-3%E6%A1%88%E4%BE%8B"><span class="toc-number">2.27.3.</span> <span class="toc-text">8.1.3案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-3-1date-s%E6%97%B6%E9%97%B4%E6%88%B3%E7%BB%83%E4%B9%A0"><span class="toc-number">2.27.3.1.</span> <span class="toc-text">8.1.3.1date+%s时间戳练习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-3-2basename%E7%9A%84%E7%BB%83%E4%B9%A0"><span class="toc-number">2.27.3.2.</span> <span class="toc-text">8.1.3.2basename的练习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-3-3dirname%E7%9A%84%E7%BB%83%E4%B9%A0"><span class="toc-number">2.27.3.3.</span> <span class="toc-text">8.1.3.3dirname的练习</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="toc-number">2.28.</span> <span class="toc-text">8.2自定义函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-1%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.28.1.</span> <span class="toc-text">8.2.1基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-2%E7%BB%8F%E9%AA%8C%E6%8A%80%E5%B7%A7"><span class="toc-number">2.28.2.</span> <span class="toc-text">8.2.2经验技巧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-3%E6%A1%88%E4%BE%8B"><span class="toc-number">2.28.3.</span> <span class="toc-text">8.2.3案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-3-1%E6%B2%A1%E6%9C%89%E4%BD%BF%E7%94%A8return%E7%9A%84%E7%89%88%E6%9C%AC"><span class="toc-number">2.28.3.1.</span> <span class="toc-text">8.2.3.1没有使用return的版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-3-2%E7%94%A8return%E8%BF%94%E5%9B%9E%E7%9A%84%E8%AF%9D"><span class="toc-number">2.28.3.2.</span> <span class="toc-text">8.2.3.2用return返回的话</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%85%A5%E9%97%A8"><span class="toc-number">2.29.</span> <span class="toc-text">9.正则表达式入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1%E5%B8%B8%E8%A7%84%E5%8C%B9%E9%85%8D"><span class="toc-number">2.30.</span> <span class="toc-text">9.1常规匹配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2%E5%B8%B8%E7%94%A8%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><span class="toc-number">2.31.</span> <span class="toc-text">9.2常用特殊字符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-1%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%EF%BC%9A"><span class="toc-number">2.31.1.</span> <span class="toc-text">9.2.1特殊字符：^</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-2%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%EF%BC%9A"><span class="toc-number">2.31.2.</span> <span class="toc-text">9.2.2特殊字符：$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-3%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%EF%BC%9A"><span class="toc-number">2.31.3.</span> <span class="toc-text">9.2.3特殊字符：.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-4%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%EF%BC%9A"><span class="toc-number">2.31.4.</span> <span class="toc-text">9.2.4特殊字符：*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-5%E5%AD%97%E7%AC%A6%E5%8C%BA%E9%97%B4%EF%BC%88%E4%B8%AD%E6%8B%AC%E5%8F%B7%EF%BC%89%EF%BC%9A"><span class="toc-number">2.31.5.</span> <span class="toc-text">9.2.5字符区间（中括号）：[ ]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-6%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%EF%BC%9A"><span class="toc-number">2.31.6.</span> <span class="toc-text">9.2.6特殊字符：\</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-7%E5%8C%B9%E9%85%8D%E6%89%8B%E6%9C%BA%E5%8F%B7"><span class="toc-number">2.31.7.</span> <span class="toc-text">9.2.7匹配手机号</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">2.32.</span> <span class="toc-text">10.文本处理工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1cut"><span class="toc-number">2.33.</span> <span class="toc-text">10.1cut</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-1%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">2.33.1.</span> <span class="toc-text">10.1.1基本用法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-2%E9%80%89%E9%A1%B9%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="toc-number">2.33.2.</span> <span class="toc-text">10.1.2选项参数说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-3%E6%A1%88%E4%BE%8B"><span class="toc-number">2.33.3.</span> <span class="toc-text">10.1.3案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-1%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87"><span class="toc-number">2.33.3.1.</span> <span class="toc-text">10.1.3.1数据准备</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-2%E5%88%87%E5%89%B2-cut-test-txt-%E7%AC%AC%E4%B8%80%E5%88%97"><span class="toc-number">2.33.3.2.</span> <span class="toc-text">10.1.3.2切割 cut_test.txt 第一列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-3%E5%88%87%E5%89%B2-cut-test-txt-%E7%AC%AC%E4%BA%8C%E3%80%81%E4%B8%89%E5%88%97"><span class="toc-number">2.33.3.3.</span> <span class="toc-text">10.1.3.3切割 cut_test.txt 第二、三列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-4%E5%9C%A8-cut-test-txt-%E6%96%87%E4%BB%B6%E4%B8%AD%E5%88%87%E5%89%B2%E5%87%BA-nan"><span class="toc-number">2.33.3.4.</span> <span class="toc-text">10.1.3.4在 cut_test.txt 文件中切割出 nan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-5%E8%A6%81passwd%E4%B8%AD%E4%BB%A5bash%E7%BB%93%E5%B0%BE%E7%9A%84%E7%AC%AC%E4%B8%80%EF%BC%8C%E5%85%AD%EF%BC%8C%E4%B8%83%E5%88%97"><span class="toc-number">2.33.3.5.</span> <span class="toc-text">10.1.3.5要passwd中以bash结尾的第一，六，七列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-6%E8%A6%81passwd%E4%B8%AD%E4%BB%A5bash%E7%BB%93%E5%B0%BE%E7%9A%84%E7%AC%AC1-4%E5%88%97"><span class="toc-number">2.33.3.6.</span> <span class="toc-text">10.1.3.6要passwd中以bash结尾的第1-4列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-7%E8%A6%81passwd%E4%B8%AD%E4%BB%A5bash%E7%BB%93%E5%B0%BE%E7%9A%84%E7%AC%AC4%E5%88%97%E5%BE%80%E5%90%8E%E7%9A%84%E5%85%A8%E9%83%A8%E5%88%97"><span class="toc-number">2.33.3.7.</span> <span class="toc-text">10.1.3.7要passwd中以bash结尾的第4列往后的全部列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-8%E8%A6%81passwd%E4%B8%AD%E4%BB%A5bash%E7%BB%93%E5%B0%BE%E7%9A%84%E7%AC%AC4%E5%88%97%E4%B9%8B%E5%89%8D%E7%9A%84%E5%85%A8%E9%83%A8%E5%88%97"><span class="toc-number">2.33.3.8.</span> <span class="toc-text">10.1.3.8要passwd中以bash结尾的第4列之前的全部列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-9%E9%80%89%E5%8F%96%E7%B3%BB%E7%BB%9F-PATH-%E5%8F%98%E9%87%8F%E5%80%BC%EF%BC%8C%E7%AC%AC-2-%E4%B8%AA%E2%80%9C%EF%BC%9A%E2%80%9D%E5%BC%80%E5%A7%8B%E5%90%8E%E7%9A%84%E6%89%80%E6%9C%89%E8%B7%AF%E5%BE%84%EF%BC%9A"><span class="toc-number">2.33.3.9.</span> <span class="toc-text">10.1.3.9选取系统 PATH 变量值，第 2 个“：”开始后的所有路径：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-10%E5%88%87%E5%89%B2-ifconfig-%E5%90%8E%E6%89%93%E5%8D%B0%E7%9A%84-IP-%E5%9C%B0%E5%9D%80"><span class="toc-number">2.33.3.10.</span> <span class="toc-text">10.1.3.10切割 ifconfig 后打印的 IP 地址</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2awk"><span class="toc-number">2.34.</span> <span class="toc-text">10.2awk</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-1%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">2.34.1.</span> <span class="toc-text">10.2.1基本用法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-2%E9%80%89%E9%A1%B9%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="toc-number">2.34.2.</span> <span class="toc-text">10.2.2选项参数说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-3%E6%A1%88%E4%BE%8B"><span class="toc-number">2.34.3.</span> <span class="toc-text">10.2.3案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-3-1%E6%90%9C%E7%B4%A2-passwd-%E6%96%87%E4%BB%B6%E4%BB%A5-root-%E5%85%B3%E9%94%AE%E5%AD%97%E5%BC%80%E5%A4%B4%E7%9A%84%E6%89%80%E6%9C%89%E8%A1%8C%EF%BC%8C%E5%B9%B6%E8%BE%93%E5%87%BA%E8%AF%A5%E8%A1%8C%E7%9A%84%E7%AC%AC-7-%E5%88%97"><span class="toc-number">2.34.3.1.</span> <span class="toc-text">10.2.3.1搜索 passwd 文件以 root 关键字开头的所有行，并输出该行的第 7 列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-3-2%E6%90%9C%E7%B4%A2-passwd-%E6%96%87%E4%BB%B6%E4%BB%A5-root-%E5%85%B3%E9%94%AE%E5%AD%97%E5%BC%80%E5%A4%B4%E7%9A%84%E6%89%80%E6%9C%89%E8%A1%8C%EF%BC%8C%E5%B9%B6%E8%BE%93%E5%87%BA%E8%AF%A5%E8%A1%8C%E7%9A%84%E7%AC%AC-1-%E5%88%97%E5%92%8C%E7%AC%AC-7-%E5%88%97%EF%BC%8C-%E4%B8%AD%E9%97%B4%E4%BB%A5%E2%80%9C%EF%BC%8C%E2%80%9D%E5%8F%B7%E5%88%86%E5%89%B2"><span class="toc-number">2.34.3.2.</span> <span class="toc-text">10.2.3.2搜索 passwd 文件以 root 关键字开头的所有行，并输出该行的第 1 列和第 7 列， 中间以“，”号分割</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-3-3%E5%8F%AA%E6%98%BE%E7%A4%BA-etc-passwd-%E7%9A%84%E7%AC%AC%E4%B8%80%E5%88%97%E5%92%8C%E7%AC%AC%E4%B8%83%E5%88%97%EF%BC%8C%E4%BB%A5%E9%80%97%E5%8F%B7%E5%88%86%E5%89%B2%EF%BC%8C%E4%B8%94%E5%9C%A8%E6%89%80%E6%9C%89%E8%A1%8C%E5%89%8D%E9%9D%A2%E6%B7%BB%E5%8A%A0%E5%88%97%E5%90%8D-user%EF%BC%8Cshell-%E5%9C%A8%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C%E6%B7%BB%E5%8A%A0%E2%80%9Dend-of-file%E2%80%9D"><span class="toc-number">2.34.3.3.</span> <span class="toc-text">10.2.3.3只显示&#x2F;etc&#x2F;passwd 的第一列和第七列，以逗号分割，且在所有行前面添加列名 user，shell 在最后一行添加”end of file”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-3-4%E5%B0%86-passwd-%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E7%94%A8%E6%88%B7-id-%E5%A2%9E%E5%8A%A0%E6%95%B0%E5%80%BC-1-%E5%B9%B6%E8%BE%93%E5%87%BA"><span class="toc-number">2.34.3.4.</span> <span class="toc-text">10.2.3.4将 passwd 文件中的用户 id 增加数值 1 并输出</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-4awk-%E7%9A%84%E5%86%85%E7%BD%AE%E5%8F%98%E9%87%8F"><span class="toc-number">2.34.4.</span> <span class="toc-text">10.2.4awk 的内置变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-4-1%E7%BB%9F%E8%AE%A1-passwd-%E6%96%87%E4%BB%B6%E5%90%8D%EF%BC%8C%E6%AF%8F%E8%A1%8C%E7%9A%84%E8%A1%8C%E5%8F%B7%EF%BC%8C%E6%AF%8F%E8%A1%8C%E7%9A%84%E5%88%97%E6%95%B0"><span class="toc-number">2.34.4.1.</span> <span class="toc-text">10.2.4.1统计 passwd 文件名，每行的行号，每行的列数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-4-2%E6%9F%A5%E8%AF%A2-ifconfig-%E5%91%BD%E4%BB%A4%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E4%B8%AD%E7%9A%84%E7%A9%BA%E8%A1%8C%E6%89%80%E5%9C%A8%E7%9A%84%E8%A1%8C%E5%8F%B7"><span class="toc-number">2.34.4.2.</span> <span class="toc-text">10.2.4.2查询 ifconfig 命令输出结果中的空行所在的行号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-4-3%E5%88%87%E5%89%B2-IP"><span class="toc-number">2.34.4.3.</span> <span class="toc-text">10.2.4.3切割 IP</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E5%BD%92%E6%A1%A3%E6%96%87%E4%BB%B6"><span class="toc-number">2.35.</span> <span class="toc-text">11.归档文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1%E8%84%9A%E6%9C%AC%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.36.</span> <span class="toc-text">11.1脚本实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2%E6%B5%8B%E8%AF%95"><span class="toc-number">2.37.</span> <span class="toc-text">11.2测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3%E5%AE%9A%E6%9C%9F%E5%BD%92%E6%A1%A3"><span class="toc-number">2.38.</span> <span class="toc-text">11.3定期归档</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF"><span class="toc-number">2.39.</span> <span class="toc-text">12.发送消息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1write%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%AF"><span class="toc-number">2.40.</span> <span class="toc-text">12.1write发送信息</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/7648/" title="java八股文-高级篇"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.dujin.org/bing/1366.php" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java八股文-高级篇"/></a><div class="content"><a class="title" href="/posts/7648/" title="java八股文-高级篇">java八股文-高级篇</a><time datetime="2023-06-11T14:12:54.000Z" title="发表于 2023-06-11 22:12:54">2023-06-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/43771/" title="shell脚本快速入门"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.dujin.org/bing/1366.php" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="shell脚本快速入门"/></a><div class="content"><a class="title" href="/posts/43771/" title="shell脚本快速入门">shell脚本快速入门</a><time datetime="2022-06-24T12:55:57.000Z" title="发表于 2022-06-24 20:55:57">2022-06-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/55491/" title="java常用知识集"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/java.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java常用知识集"/></a><div class="content"><a class="title" href="/posts/55491/" title="java常用知识集">java常用知识集</a><time datetime="2022-05-19T12:32:28.000Z" title="发表于 2022-05-19 20:32:28">2022-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/37319/" title="jvm"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/java.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jvm"/></a><div class="content"><a class="title" href="/posts/37319/" title="jvm">jvm</a><time datetime="2022-05-19T04:13:32.000Z" title="发表于 2022-05-19 12:13:32">2022-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/12796/" title="centos7"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/centos.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="centos7"/></a><div class="content"><a class="title" href="/posts/12796/" title="centos7">centos7</a><time datetime="2022-05-18T07:14:53.000Z" title="发表于 2022-05-18 15:14:53">2022-05-18</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 茶白</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const disqus_config = function () {
    this.page.url = 'https://chabai000.github.io/posts/43771/'
    this.page.identifier = '/posts/43771/'
    this.page.title = 'shell脚本快速入门'
  }

  const disqusReset = () => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  btf.addGlobalFn('themeChange', disqusReset, 'disqus')

  const loadDisqus = () =>{
    if (window.DISQUS) disqusReset()
    else {
      const script = document.createElement('script')
      script.src = 'https://lchabai.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=lchabai&api_key=&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if ('Disqus' === 'Disqus' || !true) {
    if (true) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<code>.*?<\/code>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    fetch('https://disqus.com/api/3.0/forums/listPosts.json?forum=lchabai&related=thread&limit=6&api_key=')
      .then(response => response.json())
      .then(data => {
        const disqusArray = data.response.map(item => {
          return {
            'avatar': item.author.avatar.cache,
            'content': changeContent(item.message),
            'nick': item.author.name,
            'url': item.url,
            'date': item.createdAt
          }
        })

        saveToLocal.set('disqus-newest-comments', JSON.stringify(disqusArray), 10/(60*24))
        generateHtml(disqusArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (false) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick}</span><time> / ${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('disqus-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="9310458102" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false" data-lrcType="0"> </div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>